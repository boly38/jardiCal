{"version":3,"sources":["core/JBetaCorner.js","core/JConstants.js","services/Tracking.js","core/JMenu.js","core/JHome.js","core/JMonth.js","common/JSearchEntries.js","docs/JPeriod.js","docs/JDoc.js","docs/JDocChoice.js","services/ApiV0.js","docs/JDocs.js","admin/JAdmin.js","contrib/JPeriodSelector.js","contrib/JAddContrib.js","contrib/JContribChoice.js","contrib/JContribsList.js","contrib/JContrib.js","core/JAbout.js","JApp.js","serviceWorker.js","index.js"],"names":["JBetaCorner","tooltip","this","props","version","className","Component","JConstants","ADMIN","MENU","ENTRIES","CONTRIB","initGA","trackingID","ReactGA","initialize","Event","category","action","label","event","JMenu","onMenuClic","bind","menuEntry","console","info","Navbar","bg","expand","Brand","href","onClick","Toggle","aria-controls","Collapse","id","Nav","Link","roles","includes","NavDropdown","alignRight","title","Item","Divider","target","JHome","JMonth","data","handleMonthsChange","log","board","fetch","then","res","json","forceUpdate","catch","months","bucket","ground","forEach","element","sowBucket","isBucket","elementBucket","push","name","sowGround","isGround","elementGround","ToggleButtonGroup","type","defaultValue","onChange","ToggleButton","value","JSearchEntries","searchInput","focus","searchLocked","Badge","variant","size","onUnlock","searchString","unSearch","style","cursor","Form","inline","onSubmit","onSearch","FormControl","key","placeholder","e","onSearchStringUpdated","ref","input","Button","JPeriod","v","disabled","JDoc","onUnselect","Table","striped","bordered","hover","colSpan","doc","nom","semi","m","plantation","floraison","recolte","nom_scientifique","familles","join","JDocChoice","onSelect","map","docType","index","ApiV0","Promise","resolve","reject","response","a","aboutResponse","debug","ok","authError","options","getQueryString","queryString","stringify","docsResults","error","details","message","status","getError","contribsResults","method","samplesResponse","count","entryToAdd","headers","body","JSON","contribResponse","JDocs","state","docs","errorMessage","infoMessage","hasNext","bookmark","_handleKeyDown","keyCode","onUnSearch","onNext","onReload","_refocus","searchDocs","document","addEventListener","removeEventListener","searchEntries","jd","setState","preventDefault","evt","lastDocId","length","_id","filter","getDocs","newState","getErrorMessage","Alert","unLock","newSearchString","JAdmin","onAddSample","onRemoveDocuments","onRemoveContribs","admin","removeAllDocs","nbDeleted","actionDone","onActionDone","removeAllContribs","samples","nbSample","docName","docCount","contribName","contribCount","isOwner","about","isAdmin","dbName","documents","adminDbName","contributions","window","confirm","JPeriodSelector","enabled","selected","curSelection","isSelected","splice","indexOf","Error","field","month","Text","ButtonToolbar","aria-label","ButtonGroup","multiple","toggleOption","getVariantStyle","onDeactivate","onActivate","JAddContrib","onCancelAdd","contribNom","contribute","addResult","onAdded","addErrorMessage","onCancel","addContribSchema","Yup","required","contribNomScientifique","validationSchema","handleAddSubmit","initialValues","handleSubmit","handleChange","values","handleBlur","touched","errors","isValid","setFieldValue","noValidate","Group","controlId","Label","Control","isInvalid","Feedback","JContribChoice","JContribsList","JContrib","contribs","add","searchContribs","newEntry","jc","getContribs","onContrib","JAbout","apiVersion","api","jlVersion","JApp","pageview","location","pathname","search","doAbout","aboutResults","actionMessage","exact","path","component","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ff13c196.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './JBetaCorner.css';\r\n\r\nclass JBetaCorner extends Component {\r\n  render() {\r\n    var tooltip = (this.props.version)?this.props.version:\"\";\r\n    return (\r\n  <div className=\"corner-ribbon bottom-right sticky blue shadow\">Alpha <sup>{tooltip}</sup></div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JBetaCorner;\r\n","export const JConstants = {\r\n  GOOGLE_ANALYTICS_CODE: \"UA-1988442-19\",\r\n  GG_CATEGORY: { ADMIN:\"ADMIN\", MENU:\"MENU\", ENTRIES:\"ENTRIES\", CONTRIB:\"CONTRIB\" }\r\n};","/**\r\n * credit: https://medium.com/@malith.dev/track-users-in-your-react-app-with-google-analytics-6364ebfcbae8\r\n */\r\nimport ReactGA from \"react-ga\";\r\n\r\nexport const initGA = (trackingID) => {\r\n   ReactGA.initialize(trackingID);\r\n}\r\n\r\nexport const PageView = () => {\r\n    ReactGA.pageview(window.location.pathname +\r\n                     window.location.search);\r\n}\r\n\r\n/**\r\n * Event - Add custom tracking event.\r\n * @param {string} category\r\n * @param {string} action\r\n * @param {string} label\r\n */\r\nexport const Event = (category, action, label) => {\r\n  ReactGA.event({\r\n    category: category,\r\n    action: action,\r\n    label: label\r\n  });\r\n};","import React, { Component } from 'react'\r\nimport './JMenu.css';\r\nimport { Navbar, Nav, NavDropdown } from 'react-bootstrap';\r\nimport {JConstants} from './JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\nimport { GiFlowerPot } from 'react-icons/gi';\r\n\r\nclass JMenu extends Component {\r\n  constructor(props) {\r\n      super(props);\r\n      this.onMenuClic = this.onMenuClic.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n  }\r\n\r\n  onMenuClic(menuEntry) {\r\n    console.info(\"onMenuClic\", menuEntry)\r\n    Event(JConstants.GG_CATEGORY.MENU, menuEntry, \"Menu clic on \" + menuEntry)\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <Navbar bg=\"light\" expand=\"lg\">\r\n        <Navbar.Brand href=\"/\" onClick={this.onMenuClic.bind(this, 'logo')}><GiFlowerPot/> JardiCal</Navbar.Brand>\r\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n        <Navbar.Collapse id=\"basic-navbar-nav\">\r\n          <Nav className=\"mr-auto\">\r\n            <Nav.Link href=\"/docs\" onClick={this.onMenuClic.bind(this, 'entrées')}>Entrées</Nav.Link>\r\n            {/* <Nav.Link href=\"/month\">Par mois</Nav.Link> */}\r\n        { this.props.roles && this.props.roles.includes('admin') ?\r\n          ( <Nav.Link href=\"/contrib\" onClick={this.onMenuClic.bind(this, 'contrib')}>Contribuer</Nav.Link> )\r\n          : ( null)\r\n        }\r\n        { this.props.roles && this.props.roles.includes('owner') ?\r\n          ( <Nav.Link href=\"/owner\" onClick={this.onMenuClic.bind(this, 'admin')}>Admin</Nav.Link> )\r\n          : ( null)\r\n        }\r\n          </Nav>\r\n          <Nav>\r\n            <NavDropdown alignRight title=\"Aide\" id=\"collasible-nav-dropdown\">\r\n              <NavDropdown.Item href=\"/about\" onClick={this.onMenuClic.bind(this, 'about')}>À propos</NavDropdown.Item>\r\n              <NavDropdown.Divider />\r\n              <NavDropdown.Item href=\"https://github.com/boly38/jardiCal\" target=\"_dep\">Github - source</NavDropdown.Item>\r\n            </NavDropdown>\r\n          </Nav>\r\n        </Navbar.Collapse>\r\n      </Navbar>\r\n\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default JMenu;\r\n/*\r\n            <div>\r\n              <ul className=\"jmenu\">\r\n                  <li><NavLink activeClassName={\"active\"} exact={true}  to=\"/\">Home</NavLink></li>\r\n                  <li><NavLink activeClassName={\"active\"} to=\"/month\">Par mois</NavLink></li>\r\n                </ul>\r\n            </div>\r\n*/","import React, { Component } from 'react'\r\n\r\nclass JHome extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"jhome\">\r\n        <h1>JardiCal</h1>\r\n        <p>\r\n        Retrouvez quand planter quoi, et quand récolter !\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JHome;","import React, { Component } from 'react'\r\nimport { ToggleButtonGroup, ToggleButton} from 'react-bootstrap';\r\n\r\nclass JMonth extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.data = \"\";\r\n\r\n    this.handleMonthsChange = this.handleMonthsChange.bind(this);\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    if (this.data !== \"\") {\r\n      return;\r\n    }\r\n    console.log(\"fetch json\");\r\n      var board = this;\r\n      fetch('/garden.json')\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n              board.data = data;\r\n              console.log(\"data\", data);\r\n              this.forceUpdate();\r\n            })\r\n            .catch(console.log)\r\n  }\r\n\r\n\r\n  handleMonthsChange(months) {\r\n    console.log('handleMonthsChange', months);\r\n    this.bucket = [];\r\n    this.ground = [];\r\n    this.data.forEach(element => {\r\n      if (element.sowBucket) {\r\n        var isBucket = false;\r\n        element.sowBucket.forEach(elementBucket => {\r\n            if (months.includes(elementBucket)) {\r\n                isBucket = true;\r\n            }\r\n        })\r\n        if (isBucket) {\r\n            this.bucket.push(element.name);\r\n        }\r\n      }\r\n      if (element.sowGround) {\r\n        var isGround = false;\r\n        element.sowGround.forEach(elementGround => {\r\n            if (months.includes(elementGround)) {\r\n                isGround = true;\r\n            }\r\n        })\r\n        if (isGround) {\r\n            this.ground.push(element.name);\r\n        }\r\n      }\r\n    });\r\n    this.forceUpdate();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"jmonth\">\r\n       <div className=\"selectMonth\">\r\n        <h1>Par mois</h1>\r\n        <p>\r\n        Choisissez un ou plusieurs mois\r\n        </p>\r\n          <ToggleButtonGroup type=\"checkbox\" defaultValue={[]}\r\n            className=\"mb-2\"\r\n            onChange={this.handleMonthsChange}>\r\n            <ToggleButton value={1}>Janvier</ToggleButton>\r\n            <ToggleButton value={2}>Février</ToggleButton>\r\n            <ToggleButton value={3}>Mars</ToggleButton>\r\n            <ToggleButton value={4}>Avril</ToggleButton>\r\n            <ToggleButton value={5}>Mai</ToggleButton>\r\n            <ToggleButton value={6}>Juin</ToggleButton>\r\n            <ToggleButton value={7}>Juillet</ToggleButton>\r\n            <ToggleButton value={8}>Août</ToggleButton>\r\n            <ToggleButton value={9}>Septembre</ToggleButton>\r\n            <ToggleButton value={10}>Octobre</ToggleButton>\r\n            <ToggleButton value={11}>Novembre</ToggleButton>\r\n            <ToggleButton value={12}>Décembre</ToggleButton>\r\n          </ToggleButtonGroup>\r\n       </div>\r\n       <div className=\"showMonth\">\r\n           Semis en godets : { this.bucket }<br/>\r\n           Semis en pleine terre : { this.ground }<br/>\r\n       </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JMonth;","import React, { Component } from 'react'\r\nimport { Badge } from 'react-bootstrap';\r\nimport { Form, FormControl, Button} from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare } from 'react-icons/ai';\r\n\r\nclass JSearchEntries extends Component {\r\n\r\n  focus() {\r\n    if (this.searchInput) {\r\n      this.searchInput.focus();\r\n    }\r\n  }\r\n\r\n  render() {\r\n      return this.props.searchLocked ? (\r\n                <div className=\"mb-3\">\r\n                 <Badge variant=\"secondary\" size=\"sm mr-2 mt-2\"\r\n                    onClick={this.props.onUnlock}>search : {this.props.searchString}</Badge>\r\n                 &#160;\r\n                 <AiOutlineCloseSquare\r\n                             onClick={this.props.unSearch}\r\n                             style={{cursor: 'pointer'}}\r\n                             title=\"Annuler la recherche (raccourci: Escape)\"/>\r\n                </div>\r\n      ) : (\r\n                <Form inline className=\"mb-3\" onSubmit={this.props.onSearch}>\r\n                    <FormControl key=\"entriesSearch\"\r\n                                 type=\"text\"\r\n                                 placeholder=\"Recherche par nom\"\r\n                                 value={this.props.searchString}\r\n                                 className=\"mr-sm-2\"\r\n                                 onChange={e => this.props.onSearchStringUpdated(e.target.value)}\r\n                                 size=\"sm\"\r\n                                 ref={(input) => { this.searchInput = input; }}\r\n                    />\r\n                    <Button key=\"entriesSearchButton\"\r\n                            variant=\"outline-success\"\r\n                            onClick={this.props.onSearch}\r\n                            title=\"Lancer la recherche (raccourci: Enter)\"\r\n                            size=\"sm\"\r\n                            >Rechercher</Button>\r\n                </Form>\r\n      );\r\n  }\r\n}\r\n\r\nexport default JSearchEntries;","import React, { Component } from 'react'\r\nimport { Button} from 'react-bootstrap';\r\n\r\nclass JPeriod extends Component {\r\n  render() {\r\n    var v = this.props.value;\r\n    return (<div>\r\n      <Button variant={ v.includes(1) ? 'primary':'secondary' } size=\"sm\" disabled>jan.</Button>\r\n      <Button variant={ v.includes(2) ? 'primary':'secondary' } size=\"sm\" disabled>fév.</Button>\r\n      <Button variant={ v.includes(3) ? 'primary':'secondary' } size=\"sm\" disabled>mars</Button>\r\n      <Button variant={ v.includes(4) ? 'primary':'secondary' } size=\"sm\" disabled>avril</Button>\r\n      <Button variant={ v.includes(5) ? 'primary':'secondary' } size=\"sm\" disabled>mai</Button>\r\n      <Button variant={ v.includes(6) ? 'primary':'secondary' } size=\"sm\" disabled>juin</Button>\r\n      <Button variant={ v.includes(7) ? 'primary':'secondary' } size=\"sm\" disabled>juil.</Button>\r\n      <Button variant={ v.includes(8) ? 'primary':'secondary' } size=\"sm\" disabled>août</Button>\r\n      <Button variant={ v.includes(9) ? 'primary':'secondary' } size=\"sm\" disabled>sep.</Button>\r\n      <Button variant={ v.includes(10) ? 'primary':'secondary' } size=\"sm\" disabled>oct.</Button>\r\n      <Button variant={ v.includes(11) ? 'primary':'secondary' } size=\"sm\" disabled>nov.</Button>\r\n      <Button variant={ v.includes(12) ? 'primary':'secondary' } size=\"sm\" disabled>déc.</Button>\r\n    </div>)\r\n  }\r\n}\r\n\r\nexport default JPeriod;","import React, { Component } from 'react'\r\nimport { Badge, Table} from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare } from 'react-icons/ai';\r\nimport './JDoc.css';\r\nimport JPeriod from './JPeriod';\r\n\r\nclass JDoc extends Component {\r\n\r\n  onUnselect() {\r\n    this.props.onUnselect();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"doc-selected\" >\r\n        <Table striped bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <th colSpan=\"2\">\r\n                  <span className=\"entryName\">{this.props.doc.nom}</span>\r\n                  <Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                       style={{cursor: 'pointer'}}\r\n                       onClick={this.onUnselect.bind(this)}>\r\n                    Fermer <AiOutlineCloseSquare />\r\n                  </Badge>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            { this.props.doc.semi && this.props.doc.semi.m ? (\r\n            <tr>\r\n              <td>Semi</td>\r\n              <td><JPeriod name=\"semi\" value={this.props.doc.semi.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { this.props.doc.plantation && this.props.doc.plantation.m ? (\r\n            <tr>\r\n              <td>Plantation</td>\r\n              <td><JPeriod name=\"plantation\" value={this.props.doc.plantation.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { this.props.doc.floraison && this.props.doc.floraison.m ? (\r\n            <tr>\r\n              <td>Floraison</td>\r\n              <td><JPeriod name=\"floraison\" value={this.props.doc.floraison.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { this.props.doc.recolte && this.props.doc.recolte.m ? (\r\n            <tr>\r\n              <td>Récolte</td>\r\n              <td><JPeriod name=\"recolte\" value={this.props.doc.recolte.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            <tr>\r\n              <td>Nom scientifique</td>\r\n              <td>{this.props.doc.nom_scientifique}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Famille</td>\r\n              <td>{this.props.doc.familles.join(' - ')}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Type</td>\r\n              <td>{this.props.doc.type.join(' - ')}</td>\r\n            </tr>\r\n          </tbody>\r\n        </Table>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JDoc;","import React, { Component } from 'react'\r\nimport { Badge } from 'react-bootstrap';\r\nimport { GiFireFlower, GiPear, GiCarrot, GiHighGrass } from 'react-icons/gi'; // https://react-icons.github.io/react-icons/icons?name=gi\r\n\r\nclass JDocChoice extends Component {\r\n\r\n  onSelect(doc) {\r\n    this.props.onSelect(doc);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"doc-choice\" >\r\n        {/*\r\n        <Button variant=\"secondary\" size=\"sm\">\r\n          {this.props.index} - {this.props.doc.nom} - ({this.props.doc.type})\r\n        </Button>\r\n\r\n        badge doc: https://react-bootstrap.github.io/components/badge/#badge-props\r\n        */}\r\n        <Badge variant=\"success\" size=\"sm mr-2 mt-2\"\r\n               style={{cursor: 'pointer'}}\r\n               title={this.props.doc.type}\r\n               onClick={this.onSelect.bind(this, this.props.doc)}>\r\n          {this.props.doc.nom}\r\n          &#160;\r\n          { this.props.doc.type.map( (docType, index) => {\r\n              if (docType === \"fleur\") {\r\n                return ( <GiFireFlower key={index} />)\r\n              }\r\n              if (docType === \"fruit\") {\r\n                return ( <GiPear key={index} />)\r\n              }\r\n              if (docType === \"légume\") {\r\n                return ( <GiCarrot key={index} />)\r\n              }\r\n              return ( <GiHighGrass key={index} />)\r\n            }) }\r\n        </Badge>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JDocChoice;\r\n//onClick={(e) => this.props.onChoice(this.props.index, e)}","import queryString from 'query-string';\r\n\r\nclass ApiV0 {\r\n  static debug = false;\r\n\r\n  static about() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch('/api/v0/about')\r\n      .then(async response => {\r\n          var aboutResponse = null;\r\n          try {\r\n            aboutResponse = await response.json();\r\n            if (ApiV0.debug) {\r\n              console.log(\"RESPONSE\", aboutResponse);\r\n            }\r\n          } catch (jsonException) {\r\n          }\r\n          if (!response.ok) {\r\n            reject();\r\n            return;\r\n          }\r\n          resolve(aboutResponse);\r\n      })\r\n      .catch((authError) => {\r\n          if (ApiV0.debug) { console.log(\"ERR\", authError); }\r\n          reject(authError)\r\n        });\r\n    });\r\n  }\r\n\r\n  static getDocs(options) {\r\n    return new Promise((resolve, reject) => {\r\n      const getQueryString = queryString.stringify(options);\r\n      fetch(`/api/v0/docs?${getQueryString}`)\r\n      .then(async response => {\r\n        const docsResults = await response.json();\r\n        if (ApiV0.debug) { console.log(\"RESPONSE\", docsResults); }\r\n        if (!response.ok) {\r\n          // get error message from body or default to response status\r\n          const error = (docsResults && docsResults.details) || (docsResults && docsResults.message) || response.status;\r\n          return Promise.reject(error);\r\n        }\r\n        resolve(docsResults);\r\n      })\r\n      .catch((getError) => {\r\n        if (ApiV0.debug) { console.log(\"ERR\", getError); }\r\n        reject(getError);\r\n      });\r\n    });\r\n  }\r\n\r\n  static getContribs(options) {\r\n    return new Promise((resolve, reject) => {\r\n      const getQueryString = queryString.stringify(options);\r\n      fetch(`/api/v0/contributions?${getQueryString}`)\r\n      .then(async response => {\r\n        const contribsResults = await response.json();\r\n        if (ApiV0.debug) { console.log(\"RESPONSE\", contribsResults); }\r\n        if (!response.ok) {\r\n          // get error message from body or default to response status\r\n          const error = (contribsResults && contribsResults.details) || (contribsResults && contribsResults.message) || response.status;\r\n          return Promise.reject(error);\r\n        }\r\n        resolve(contribsResults);\r\n      })\r\n      .catch((getError) => {\r\n        if (ApiV0.debug) { console.log(\"ERR\", getError); }\r\n        reject(getError);\r\n      });\r\n    });\r\n  }\r\n\r\n  static samples() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch('/api/v0/docs/samples', { method: 'POST' })\r\n      .then(async response => {\r\n          var samplesResponse = null;\r\n          try {\r\n            samplesResponse = await response.json();\r\n            if (ApiV0.debug) { console.log(\"RESPONSE\", samplesResponse); }\r\n          } catch (jsonException) {\r\n          }\r\n          if (!response.ok) {\r\n            reject();\r\n            return;\r\n          }\r\n          resolve(samplesResponse.count);\r\n      })\r\n      .catch((authError) => {\r\n        if (ApiV0.debug) { console.log(\"ERR\", authError); }\r\n        reject(authError)\r\n      });\r\n    });\r\n  }\r\n\r\n  static contribute(entryToAdd) {\r\n    return new Promise((resolve, reject) => {\r\n        fetch('/api/v0/contributions',\r\n          { method: 'POST',\r\n            headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(entryToAdd) })\r\n        .then(async response => {\r\n            var contribResponse = null;\r\n            try {\r\n              contribResponse = await response.json();\r\n              if (ApiV0.debug) { console.log(\"RESPONSE\", contribResponse); }\r\n            } catch (jsonException) {\r\n            }\r\n            if (!response.ok) {\r\n              reject(\"Impossible de contribuer - \"+response.status);\r\n              return;\r\n            }\r\n            resolve(contribResponse);\r\n        })\r\n        .catch((authError) => {\r\n          if (ApiV0.debug) { console.log(\"ERR\", authError); }\r\n          reject(authError)\r\n        });\r\n    });\r\n  }\r\n\r\n  static removeAllDocs() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`/api/v0/docs`, { method: 'DELETE' })\r\n      .then(async response => {\r\n        const docsResults = await response.json();\r\n        if (ApiV0.debug) { console.log(\"RESPONSE\", docsResults); }\r\n        if (!response.ok) {\r\n          // get error message from body or default to response status\r\n          const error = (docsResults && docsResults.details) || (docsResults && docsResults.message) || response.status;\r\n          return Promise.reject(error);\r\n        }\r\n        resolve(docsResults.count);\r\n      })\r\n      .catch((getError) => {\r\n        if (ApiV0.debug) { console.log(\"ERR\", getError); }\r\n        reject(reject);\r\n      });\r\n    });\r\n  }\r\n\r\n  static removeAllContribs() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`/api/v0/contributions`, { method: 'DELETE' })\r\n      .then(async response => {\r\n        const docsResults = await response.json();\r\n        if (ApiV0.debug) { console.log(\"RESPONSE\", docsResults); }\r\n        if (!response.ok) {\r\n          // get error message from body or default to response status\r\n          const error = (docsResults && docsResults.details) || (docsResults && docsResults.message) || response.status;\r\n          return Promise.reject(error);\r\n        }\r\n        resolve(docsResults.count);\r\n      })\r\n      .catch((getError) => {\r\n        if (ApiV0.debug) { console.log(\"ERR\", getError); }\r\n        reject(getError);\r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default ApiV0;","import React, { Component } from 'react'\r\nimport './JDocs.css';\r\nimport { Alert, Badge } from 'react-bootstrap';\r\nimport JSearchEntries from '../common/JSearchEntries';\r\nimport JDoc from './JDoc';\r\nimport JDocChoice from './JDocChoice';\r\nimport ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\n\r\nconst ESCAPE_KEY = 27;\r\nconst UP_ARROW = 38;\r\nconst RIGHT_ARROW = 39;\r\n\r\nclass JDocs extends Component {\r\n  state = {\r\n      docs: null,\r\n      errorMessage: null,\r\n      infoMessage: null,\r\n      hasNext: true,\r\n      searchString: '',\r\n      bookmark: '',\r\n      searchLocked: false // toogle search form\r\n  }\r\n\r\n  componentDidMount() {\r\n    // DEBUG // console.info('componentDidMount')\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n    this._refocus();\r\n    this.searchDocs();\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY:\r\n              this.onUnSearch();\r\n              break;\r\n          case RIGHT_ARROW:\r\n              this.onNext();\r\n              break;\r\n          case UP_ARROW:\r\n              this.onReload();\r\n              break;\r\n          default:\r\n              break;\r\n      }\r\n  }\r\n\r\n  _refocus() {\r\n    if (this.searchEntries) {\r\n          this.searchEntries.focus();\r\n    }\r\n  }\r\n\r\n  onReload() {\r\n    var jd = this;\r\n    this.setState({searchString:'',bookmark:'', searchLocked: false}, () => jd.searchDocs())\r\n  }\r\n\r\n  onSearch(e) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n    var jd = this;\r\n    var evt = \"search \" + this.state.searchString;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({searchString:this.state.searchString,bookmark:'',searchLocked:true}, () => jd.searchDocs());\r\n  }\r\n\r\n  onNext() {\r\n    var jd = this;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, \"list next\", \"list next\")\r\n    var lastDocId = this.state.docs[this.state.docs.length-1]._id;\r\n    this.setState({bookmark:lastDocId,searchLocked: false}, () => jd.searchDocs());\r\n  }\r\n\r\n  onSelect(doc) {\r\n    var evt = \"select \" + doc.nom;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({doc})\r\n  }\r\n\r\n  onUnselect() {\r\n    var jd = this;\r\n    var evt = \"unselect\" + this.state.doc.nom;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({doc:null}, () => jd.searchDocs())\r\n  }\r\n\r\n  onUnlock() {\r\n    this.setState({searchLocked: false}, () => this._refocus());\r\n  }\r\n\r\n  onUnSearch() {\r\n    this.onReload();\r\n  }\r\n\r\n  searchDocs() {\r\n    var bookmark = this.state.bookmark;\r\n    var searchString = this.state.searchString;\r\n    var filter = {\"limit\":5, };\r\n    if (bookmark && bookmark !== '') {\r\n      filter.bookmark = bookmark;\r\n    }\r\n    if (searchString && searchString !== '') {\r\n      filter.nom = searchString;\r\n    }\r\n    // DEBUG // console.info(\"searchDocs\", filter);\r\n    ApiV0.getDocs(filter)\r\n      .then((docsResults) => {\r\n        if (docsResults.length) {\r\n          this.setState({ docs: docsResults, errorMessage: null, infoMessage: null, hasNext: true },\r\n            () => this._refocus());\r\n        } else {\r\n          var newState = {hasNext: false};\r\n          if (bookmark == null || bookmark === '') {\r\n            newState.infoMessage = \"aucun résultat\";\r\n            newState.docs = null;\r\n          }\r\n          this.setState(newState, () => this._refocus())\r\n        }\r\n      })\r\n      .catch((getErrorMessage) => { this.setState({errorMessage: getErrorMessage}, () => this._refocus()); });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"jdocs\">\r\n\r\n        { this.state.errorMessage ? (<Alert variant=\"warning\">{this.state.errorMessage}</Alert>) : (null) }\r\n        <div className=\"infoBox\">{this.state.infoMessage}&#160;</div>\r\n        { this.state.doc ?\r\n                  (<div> <JDoc doc={this.state.doc} onUnselect={this.onUnselect.bind(this)} /> </div> ) :\r\n                  (\r\n                  <div className=\"docsList\">\r\n                      <p>Entrées liées au jardin</p>\r\n                      <JSearchEntries searchLocked={this.state.searchLocked}\r\n                                      searchString={this.state.searchString}\r\n                                      unLock={this.onUnlock.bind(this)}\r\n                                      unSearch={this.onUnSearch.bind(this)}\r\n                                      onSearchStringUpdated={(newSearchString) => this.setState({ searchString:newSearchString})}\r\n                                      onSearch={this.onSearch.bind(this)}\r\n                                      ref={(input) => { this.searchEntries = input; }}/>\r\n\r\n                      { this.state.docs && this.state.docs.length ?\r\n                        ( <div>\r\n                          { this.state.docs.map( (doc, index) => { return(\r\n                               <JDocChoice key={index} index={index} doc={doc} onSelect={this.onSelect.bind(this)} />)\r\n                          }) }\r\n                          </div>\r\n                        ) :\r\n                        ( null )\r\n                      }\r\n                      { this.state.hasNext ?\r\n                          (<div><Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                                  style={{cursor: 'pointer'}}\r\n                                  onClick={this.onNext.bind(this)}\r\n                                  title=\"Suivant (raccourci: <Flèche droite>)\"\r\n                                  >...</Badge></div>) :\r\n                          (<div><Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                                  style={{cursor: 'pointer'}}\r\n                                  onClick={this.onReload.bind(this)}\r\n                                  title=\"Raccourci (raccourci: <Flèche du haut>)\"\r\n                                  >Recharger</Badge></div>)\r\n                       }\r\n                  </div>\r\n                  )\r\n                }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JDocs;","import React, { Component } from 'react'\r\nimport { Alert, Button, Table} from 'react-bootstrap';\r\nimport ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\n\r\nclass JAdmin extends Component {\r\n  state = {\r\n      docs: null,\r\n      errorMessage: null,\r\n      infoMessage: null,\r\n  }\r\n\r\n  constructor(props) {\r\n      super(props);\r\n      this.onAddSample = this.onAddSample.bind(this);\r\n      this.onRemoveDocuments = this.onRemoveDocuments.bind(this);\r\n      this.onRemoveContribs = this.onRemoveContribs.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n  }\r\n\r\n  onRemoveDocuments() {\r\n      var admin = this;\r\n      ApiV0.removeAllDocs()\r\n      .then((nbDeleted) => {\r\n        var actionDone = nbDeleted + \" échantillon(s) supprimé(s)\";\r\n        Event(JConstants.GG_CATEGORY.ADMIN, \"removeAllDocs\", actionDone)\r\n        admin.props.onActionDone(actionDone);\r\n      })\r\n      .catch((getErrorMessage) => {\r\n        this.setState({errorMessage: getErrorMessage})\r\n      });\r\n  }\r\n\r\n  onRemoveContribs() {\r\n      var admin = this;\r\n      ApiV0.removeAllContribs()\r\n      .then((nbDeleted) => {\r\n        var actionDone = nbDeleted + \" contribution(s) supprimé(s)\";\r\n        Event(JConstants.GG_CATEGORY.ADMIN, \"removeAllContribs\", actionDone)\r\n        admin.props.onActionDone(actionDone);\r\n      })\r\n      .catch((getErrorMessage) => {\r\n        this.setState({errorMessage: getErrorMessage})\r\n      });\r\n  }\r\n\r\n  onAddSample() {\r\n      var admin = this;\r\n      ApiV0.samples()\r\n        .then((nbSample) => {\r\n          // DEBUG// console.info(\"samplesResult\",nbSample);\r\n          var actionDone = nbSample + \" échantillons en base\";\r\n          Event(JConstants.GG_CATEGORY.ADMIN, \"samples\", actionDone)\r\n          admin.props.onActionDone(actionDone);\r\n        })\r\n        .catch((getErrorMessage) => { this.setState({errorMessage: getErrorMessage}); } );\r\n  }\r\n\r\n  render() {\r\n    var docName = null;\r\n    var docCount = null;\r\n    var contribName = null;\r\n    var contribCount = null;\r\n    var isOwner = this.props.about && this.props.about.roles.includes('owner');\r\n    var isAdmin = this.props.about && this.props.about.roles.includes('admin');\r\n    if (this.props.about) {\r\n      docName = this.props.about.dbName\r\n      docCount = this.props.about.documents\r\n      contribName = this.props.about.adminDbName\r\n      contribCount = this.props.about.contributions\r\n    }\r\n    return (\r\n      <div className=\"jadmin\">\r\n        { this.state.errorMessage ?\r\n            ( <Alert variant=\"warning\">\r\n                {this.state.errorMessage}\r\n              </Alert> )\r\n            : ( null)\r\n        }\r\n        { this.state.infoMessage ?\r\n            ( <Alert variant=\"info\">\r\n                {this.state.infoMessage}\r\n              </Alert> )\r\n            : ( null)\r\n        }\r\n        <div className=\"adminContent\">\r\n        <h1>Configuration</h1>\r\n        <Table striped bordered hover size=\"sm\">\r\n          <thead>\r\n            <tr>\r\n              <th>Base</th>\r\n              <th>Nom</th>\r\n              <th>Nombre d&apos;entrées</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td>Utilisateur</td>\r\n              <td>{docName}</td>\r\n              <td>{docCount}</td>\r\n              <td>\r\n                { isOwner ? ( <Button variant=\"secondary\" size=\"sm\" className=\"mr-2\"\r\n                                      onClick={this.onAddSample.bind(this)}\r\n                                      >Ajout d&apos;un échantillon</Button> ) : (null) }\r\n                { isOwner && docCount > 0 ? (<Button variant=\"secondary\" size=\"sm\"\r\n                                      onClick={() => { if (window.confirm('Êtes-vous sûr de vouloir supprimer les documents ?')) this.onRemoveDocuments() } }\r\n                                      >Supprimer</Button> ) : (null) }\r\n              </td>\r\n            </tr>\r\n            { contribName ?\r\n            (<tr>\r\n              <td>Contribution</td>\r\n              <td>{contribName}</td>\r\n              <td>{contribCount}</td>\r\n              <td>\r\n                { isAdmin && contribCount > 0 ? (<Button variant=\"secondary\" size=\"sm\"\r\n                                      onClick={() => { if (window.confirm('Êtes-vous sûr de vouloir supprimer les contributions ?')) this.onRemoveContribs() } }\r\n                                      >Supprimer</Button> ) : (null) }\r\n              </td>\r\n            </tr>) : (null)\r\n            }\r\n          </tbody>\r\n        </Table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JAdmin;","import React, { Component } from 'react'\r\nimport {  Button, ButtonToolbar, ButtonGroup, Nav, Navbar } from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare, AiOutlineCheck } from 'react-icons/ai';\r\n\r\nclass JPeriodSelector extends Component {\r\n  state = {\r\n      enabled: false,\r\n      selected: []\r\n  }\r\n\r\n  onActivate() {\r\n    this.setState({enabled:true});\r\n  }\r\n\r\n  onDeactivate() {\r\n    this.setState({enabled:false});\r\n  }\r\n\r\n  toggleOption(e) {\r\n    const key = e.target.value; // e.g. '1'\r\n    var curSelection = this.state.selected;\r\n    if (this.isSelected(key)) {\r\n      curSelection.splice(curSelection.indexOf(key), 1);\r\n    } else {\r\n      curSelection.push(key);\r\n    }\r\n    this.setState({ selected: curSelection }, () => {\r\n      if (!this.props.onChange) {\r\n        throw new Error(\"JPeriodSelector need onChange(field, value) handler as property\");\r\n      }\r\n      // DEBUG // console.info(\"onChange(\",this.props.field,curSelection,\")\")\r\n      this.props.onChange(this.props.field, curSelection);\r\n    });\r\n  }\r\n\r\n  isSelected(month) {\r\n    return this.state.selected && this.state.selected.includes(month)\r\n  }\r\n\r\n  getVariantStyle(key) {\r\n   return this.isSelected(key) ? 'primary' : 'default';\r\n  }\r\n\r\n  render() {\r\n    return this.state.enabled ? (\r\n  <Navbar bg=\"light\" variant=\"light\">\r\n    <Nav className=\"mr-auto\">\r\n      <Navbar.Text className=\"mr-2\">Mois</Navbar.Text>\r\n      <ButtonToolbar aria-label=\"Choix des mois de la période\">\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Hiver\" multiple>\r\n          <Button onClick={this.toggleOption.bind(this)} value='1' variant={this.getVariantStyle('1')}>1</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='2' variant={this.getVariantStyle('2')}>2</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='3' variant={this.getVariantStyle('3')}>3</Button>\r\n        </ButtonGroup>\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Printemps\">\r\n          <Button onClick={this.toggleOption.bind(this)} value='4' variant={this.getVariantStyle('4')}>4</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='5' variant={this.getVariantStyle('5')}>5</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='6' variant={this.getVariantStyle('6')}>6</Button>\r\n        </ButtonGroup>\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Été\">\r\n          <Button onClick={this.toggleOption.bind(this)} value='7' variant={this.getVariantStyle('7')}>7</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='8' variant={this.getVariantStyle('8')}>8</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='9' variant={this.getVariantStyle('9')}>9</Button>\r\n        </ButtonGroup>\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Automne\">\r\n          <Button onClick={this.toggleOption.bind(this)} value='10' variant={this.getVariantStyle('10')}>10</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='11' variant={this.getVariantStyle('11')}>11</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='12' variant={this.getVariantStyle('12')}>12</Button>\r\n        </ButtonGroup>\r\n        <Navbar.Text className=\"ml-2\">Période de {this.props.name}</Navbar.Text>\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Actions\">\r\n          <Button onClick={this.onDeactivate.bind(this)} variant='secondary'\r\n                  size=\"sm\" className=\"ml-2\">Désactiver <AiOutlineCloseSquare /></Button>\r\n        </ButtonGroup>\r\n      </ButtonToolbar>\r\n    </Nav>\r\n  </Navbar>\r\n\r\n    ) : (\r\n  <Navbar bg=\"light\" variant=\"light\">\r\n    <Nav>\r\n      <ButtonToolbar aria-label=\"Choix des mois de la période\">\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Actions\">\r\n          <Button onClick={this.onActivate.bind(this)} variant='info'\r\n                  size=\"sm\" className=\"ml-2\">Ajouter une période de {this.props.name}<AiOutlineCheck className=\"ml-2\"/></Button>\r\n        </ButtonGroup>\r\n      </ButtonToolbar>\r\n    </Nav>\r\n  </Navbar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JPeriodSelector;","import React, { Component } from 'react'\r\nimport { Alert, Button, Form } from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare, AiOutlineCheck } from 'react-icons/ai';\r\nimport {initGA, Event} from '../services/Tracking';\r\nimport ApiV0 from '../services/ApiV0'\r\nimport JPeriodSelector from './JPeriodSelector';\r\nimport { JConstants } from '../core/JConstants'\r\nimport { Formik } from 'formik';\r\nimport * as Yup from 'yup';\r\n\r\nconst ESCAPE_KEY = 27;\r\nconst ENTER_KEY = 13;\r\n\r\nclass JAddContrib extends Component {\r\n  state = {\r\n      errorMessage: null\r\n  }\r\n\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n    this._refocus()\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _refocus() {\r\n    this.contribNom.focus()\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY:\r\n              this.onCancelAdd();\r\n              break;\r\n          case ENTER_KEY:\r\n              // this.handleAddSubmit();\r\n              break;\r\n          default:\r\n              // DEBUG // console.info(\"key\", event.keyCode)\r\n              break;\r\n      }\r\n  }\r\n\r\n  handleAddSubmit(entryToAdd) {\r\n    console.info(\"handleAddSubmit \", entryToAdd)\r\n    ApiV0.contribute(entryToAdd)\r\n      .then((addResult) => {\r\n           console.info(\"addResult\", addResult)\r\n           this.props.onAdded(addResult);\r\n         })\r\n      .catch((addErrorMessage) => {\r\n           this.setState({errorMessage: addErrorMessage}, () => this._refocus())\r\n         });\r\n  }\r\n\r\n  onCancelAdd() {\r\n    var evt = \"cancel add contrib\";\r\n    Event(JConstants.GG_CATEGORY.CONTRIB, evt, evt);\r\n    this.props.onCancel();\r\n  }\r\n\r\n  handlePeriodChange(name, value){\r\n    // DEBUG //\r\n    console.info(\"handlePeriodChange\", name, value);\r\n  }\r\n\r\n  render() {\r\n\r\n    const addContribSchema = Yup.object({\r\n      contribNom: Yup.string().required(),\r\n      contribNomScientifique: Yup.string().required()\r\n    });\r\n\r\n\r\n    return (\r\n<div className=\"add-contrib\" >\r\n\r\n      <h1>Ajout d&apos;une entrée</h1>\r\n        { this.state.errorMessage ?\r\n            ( <Alert variant=\"warning\">\r\n                {this.state.errorMessage}\r\n              </Alert> )\r\n            : ( null)\r\n        }\r\n      {/*\r\n        DOC https://formik.org/\r\n        https://react-bootstrap.netlify.app/components/forms/#forms-validation-libraries\r\n       */}\r\n      <div className=\"add-contrib-form\">\r\n        <Formik validationSchema={addContribSchema}\r\n                onSubmit={this.handleAddSubmit.bind(this)}\r\n                initialValues={{\r\n                  contribNom: 'MaFleur',\r\n                  contribNomScientifique: 'MaFleurLatine'\r\n                }}\r\n        >\r\n         {({\r\n            handleSubmit,\r\n            handleChange,\r\n            handleBlur,\r\n            values,\r\n            touched,\r\n            isValid,\r\n            errors,\r\n            setFieldValue\r\n          }) => (\r\n             <Form noValidate onSubmit={handleSubmit}>\r\n              <Form.Group controlId=\"addContrib.Nom\">\r\n                <Form.Label>Nom</Form.Label>\r\n                <Form.Control\r\n                        required\r\n                        type=\"text\"\r\n                        key=\"contribNom\"\r\n                        name=\"contribNom\"\r\n                        value={values.contribNom}\r\n                        onChange={handleChange}\r\n                        isValid={touched.contribNom && !errors.contribNom}\r\n                        isInvalid={!!errors.contribNom}\r\n                        ref={(input) => { this.contribNom = input; }}\r\n                        placeholder=\"nom commun court\"\r\n                        />\r\n                <Form.Control.Feedback>Valide</Form.Control.Feedback>\r\n                <Form.Control.Feedback type=\"invalid\">Merci de choisir un nom</Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.NomScientifique\">\r\n                <Form.Label>Nom scientifique</Form.Label>\r\n                <Form.Control\r\n                        required\r\n                        type=\"text\"\r\n                        key=\"contribNomScientifique\"\r\n                        name=\"contribNomScientifique\"\r\n                        value={values.contribNomScientifique}\r\n                        onChange={handleChange}\r\n                        isValid={touched.contribNomScientifique && !errors.contribNomScientifique}\r\n                        isInvalid={!!errors.contribNomScientifique}\r\n                        ref={(input) => { this.contribNomScientifique = input; }}\r\n                        placeholder=\"nom scientifique (latin)\"\r\n                        />\r\n                <Form.Control.Feedback>Valide</Form.Control.Feedback>\r\n                <Form.Control.Feedback type=\"invalid\">Le nom scientifique est requis</Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Semi\">\r\n                <JPeriodSelector field=\"semi\" name=\"semi\" onChange={setFieldValue}/>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Plantation\">\r\n                <JPeriodSelector field=\"plantation\" name=\"plantation\" onChange={setFieldValue}/>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Floraison\">\r\n                <JPeriodSelector field=\"floraison\" name=\"floraison\" onChange={setFieldValue}/>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Récolte\">\r\n                <JPeriodSelector field=\"recolte\" name=\"récolte\" onChange={setFieldValue}/>\r\n              </Form.Group>\r\n              <Button type=\"submit\" variant=\"primary\" size=\"sm\" className=\"mr-2\"\r\n                      >Ajouter <AiOutlineCheck /></Button>\r\n              <Button variant=\"secondary\" size=\"sm\" className=\"mr-2\"\r\n                      onClick={this.onCancelAdd.bind(this)}>Annuler <AiOutlineCloseSquare /></Button>\r\n            </Form>\r\n\r\n          )}\r\n        </Formik>\r\n      </div>\r\n  {/* TODO: Famille / Type */}\r\n</div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JAddContrib;","import React, { Component } from 'react'\r\nimport { Badge } from 'react-bootstrap';\r\n\r\nclass JContribChoice extends Component {\r\n\r\n  onSelect(doc) {\r\n    this.props.onSelect(doc);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"contrib-choice\" >\r\n        <Badge variant=\"success\" size=\"sm mr-2 mt-2\"\r\n               style={{cursor: 'pointer'}}\r\n               title={this.props.doc.doc.type}\r\n               onClick={this.onSelect.bind(this, this.props.doc)}>\r\n          {this.props.doc.doc.nom}\r\n        </Badge>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JContribChoice;","import React, { Component } from 'react'\r\nimport JContribChoice from './JContribChoice';\r\n\r\nclass JContribsList extends Component {\r\n\r\n  onSelect(doc) {\r\n    var evt = \"select \" + doc.doc.nom;\r\n    console.info(evt);\r\n    // TODO // Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    // this.setState({doc});\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <div className=\"contribsList\">\r\n          { this.props.docs && this.props.docs.length ?\r\n            ( <div>\r\n              { this.props.docs.map( (doc, index) => {\r\n                  return( <JContribChoice  key={index} index={index} doc={doc} onSelect={this.onSelect.bind(this)} /> )\r\n              }) }\r\n              </div>\r\n            ) :\r\n            ( null )\r\n          }\r\n        </div>\r\n    );\r\n  }\r\n}\r\nexport default JContribsList;","import React, { Component } from 'react'\r\nimport { Alert, Button} from 'react-bootstrap';\r\n// import ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\nimport JAddContrib from './JAddContrib';\r\nimport JSearchEntries from '../common/JSearchEntries';\r\nimport JContribsList from './JContribsList';\r\nimport ApiV0 from '../services/ApiV0'\r\n\r\nconst ESCAPE_KEY = 27;\r\nconst UP_ARROW = 38;\r\nconst RIGHT_ARROW = 39;\r\n\r\nclass JContrib extends Component {\r\n  state = {\r\n      contribs: null,\r\n      errorMessage: null,\r\n      infoMessage: null,\r\n      add: false,\r\n      hasNext: true,\r\n      searchString: '',\r\n      bookmark: '',\r\n      searchLocked: false // toogle search form\r\n  }\r\n\r\n  componentDidMount() {\r\n    // DEBUG // console.info('componentDidMount')\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n    this.searchContribs();\r\n    this._refocus();\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY:\r\n              this.onUnSearch();\r\n              break;\r\n          case RIGHT_ARROW:\r\n              // this.onNext();\r\n              break;\r\n          case UP_ARROW:\r\n              this.onReload();\r\n              break;\r\n          default:\r\n              break;\r\n      }\r\n  }\r\n\r\n  _refocus() {\r\n    if (this.searchEntries) {\r\n          this.searchEntries.focus();\r\n    }\r\n  }\r\n\r\n  onContrib() {\r\n    var evt = \"open add contrib\";\r\n    Event(JConstants.GG_CATEGORY.CONTRIB, evt, evt);\r\n    this.setState({add:true})\r\n  }\r\n\r\n  onCancelAdd() {\r\n    this.setState({add:false})\r\n  }\r\n\r\n  onAdded(newEntry) {\r\n    if (newEntry && newEntry.doc && newEntry.doc.nom) {\r\n      this.setState({add:false, infoMessage: newEntry.doc.nom + \" ajouté\"});\r\n      return;\r\n    }\r\n    console.info(\"no newEntry?\")\r\n  }\r\n\r\n  onUnlock() {\r\n    this.setState({searchLocked: false}, () => this._refocus());\r\n  }\r\n\r\n  onUnSearch() {\r\n    this.onReload();\r\n  }\r\n\r\n  onReload() {\r\n    var jc = this;\r\n    this.setState({searchString:'',bookmark:'', searchLocked: false}, () => jc.searchContribs())\r\n  }\r\n\r\n  onSearch(e) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n    var jc = this;\r\n    var evt = \"search \" + this.state.searchString;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({searchString:this.state.searchString,bookmark:'',searchLocked:true}, () => jc.searchContribs());\r\n  }\r\n\r\n  searchContribs() {\r\n    var bookmark = this.state.bookmark;\r\n    var searchString = this.state.searchString;\r\n    var filter = {\"limit\":5, };\r\n    if (bookmark && bookmark !== '') {\r\n      filter.bookmark = bookmark;\r\n    }\r\n    if (searchString && searchString !== '') {\r\n      filter.nom = searchString;\r\n    }\r\n    // DEBUG // console.info(\"searchContribs\", filter);\r\n    ApiV0.getContribs(filter)\r\n      .then((contribsResults) => {\r\n        if (contribsResults.length) {\r\n          this.setState({ contribs: contribsResults, errorMessage: null, infoMessage: null, hasNext: true },\r\n            () => this._refocus());\r\n        } else {\r\n          var newState = {hasNext: false};\r\n          if (bookmark == null || bookmark === '') {\r\n            newState.infoMessage = \"aucune contribution\";\r\n            newState.docs = null;\r\n          }\r\n          this.setState(newState, () => this._refocus())\r\n        }\r\n      })\r\n      .catch((getErrorMessage) => { this.setState({errorMessage: getErrorMessage}, () => this._refocus()); });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"jcontrib\">\r\n        { this.state.errorMessage ?(<Alert variant=\"warning\">{this.state.errorMessage}</Alert>) : (null) }\r\n        { this.state.infoMessage ?(<Alert variant=\"info\">{this.state.infoMessage}</Alert>) : (null) }\r\n        <div className=\"contribContent\">\r\n        { this.state.add === true\r\n           ?(<JAddContrib onCancel={this.onCancelAdd.bind(this)} onAdded={this.onAdded.bind(this)} />)\r\n           :(\r\n              <div className=\"contribShow\">\r\n                <p>Contributions</p>\r\n                <JSearchEntries searchLocked={this.state.searchLocked}\r\n                                searchString={this.state.searchString}\r\n                                unLock={this.onUnlock.bind(this)}\r\n                                unSearch={this.onUnSearch.bind(this)}\r\n                                onSearchStringUpdated={(newSearchString) => this.setState({ searchString:newSearchString})}\r\n                                onSearch={this.onSearch.bind(this)}\r\n                                ref={(input) => { this.searchEntries = input; }}/>\r\n\r\n                <JContribsList docs={this.state.contribs}/>\r\n                <Button variant=\"secondary\" size=\"sm\" className=\"mr-2\" onClick={this.onContrib.bind(this)}\r\n                    >Contribuer</Button>\r\n              </div>\r\n            )\r\n        }\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JContrib;","import React, { Component } from 'react'\r\nimport { Table} from 'react-bootstrap';\r\n// import ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport { initGA } from '../services/Tracking';\r\nimport { GiSpottedBug, GiFlowerPot } from 'react-icons/gi';\r\nimport { GrWorkshop, GrHeroku } from 'react-icons/gr';\r\nimport { GoMarkGithub } from 'react-icons/go';\r\nimport { DiMongodb } from 'react-icons/di';\r\n\r\nclass JAbout extends Component {\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n  }\r\n\r\n  render() {\r\n    var apiVersion = this.props.about ? this.props.about.version.api : \"N/A\";\r\n    var jlVersion = this.props.about ? this.props.about.version['jardi-lib'] : \"N/A\";\r\n    return (\r\n      <div className=\"jabout\">\r\n        <div className=\"aboutContent\">\r\n        <h1><GiFlowerPot/> À propos</h1>\r\n        <p>\r\n          <b><GiFlowerPot/> JardiCal</b> est un service en ligne gratuit et sans publicité en version <GrWorkshop/> alpha .<br/>\r\n          Ce service gratuit est possible grâce aux plans gratuits mis à disposition des projets open-source :<br/>\r\n        </p>\r\n        <ul style={{'marginLeft': '40px'}}>\r\n          <li>Le code source est présent sur <a href=\"https://github.com\" target=\"_dep\"><GoMarkGithub/> Github</a>,</li>\r\n          <li>L&apos;application est hébergée par <a href=\"https://heroku.com/\" target=\"_dep\"><GrHeroku/> Heroku</a>,</li>\r\n          <li>La base de données par <a href=\"https://cloud.mongodb.com/\" target=\"_dep\"><DiMongodb/>Cloud MongoDB</a>.</li>\r\n        </ul>\r\n        <br/>\r\n        <p>\r\n          <code>version <GrWorkshop/> alpha</code> - le service est en cours de construction\r\n          &#160;et peut comporter <a href=\"https://github.com/boly38/jardiCal/issues\" target=\"_dep\">des bugs <GiSpottedBug/></a>,\r\n          &#160;ou connaître de longues périodes d&apos;indisponibilité.\r\n        </p>\r\n        <Table striped bordered hover size=\"sm\">\r\n          <thead>\r\n            <tr>\r\n              <th>Composant</th>\r\n              <th>Détails</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td><a href=\"https://github.com/boly38/jardiCal\" target=\"_dep\">JardiCal</a> version</td>\r\n              <td>{apiVersion}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><a href=\"https://github.com/boly38/jardiLib\" target=\"_dep\">JardiLib</a> version</td>\r\n              <td>{jlVersion}</td>\r\n            </tr>\r\n          </tbody>\r\n        </Table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JAbout;","import React, { Component } from 'react'\nimport './JApp.css';\nimport { Alert } from 'react-bootstrap';\nimport JBetaCorner from './core/JBetaCorner';\nimport JMenu from './core/JMenu';\nimport JHome from './core/JHome';\nimport JMonth from './core/JMonth';\nimport JDocs from './docs/JDocs';\nimport JAdmin from './admin/JAdmin';\nimport JContrib from './contrib/JContrib';\nimport JAbout from './core/JAbout';\nimport {JConstants} from './core/JConstants'\nimport {PageView, initGA} from './services/Tracking';\nimport ApiV0 from './services/ApiV0'\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nclass JApp extends Component {\n  state = {\n      errorMessage: null,\n      about: null\n  }\n\n  constructor(props) {\n      super(props);\n      this.onActionDone = this.onActionDone.bind(this);\n  }\n\n  componentDidMount() {\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\n    PageView();\n    if (this.state.about != null || this.state.errorMessage != null) {\n      return;\n    }\n    this.doAbout();\n  }\n\n  doAbout() {\n      ApiV0.about()\n        .then((aboutResults) => { this.setState({ about: aboutResults }); })\n        .catch((getErrorMessage) => { this.setState({errorMessage: getErrorMessage}); });\n  }\n\n  onActionDone(actionMessage) {\n    console.info(\"onActionDone\",actionMessage);\n    this.doAbout();\n  }\n\n  render() {\n    var roles = [];\n    if (this.state.about && this.state.about.roles) {\n      roles = this.state.about.roles;\n    }\n    return (\n     <Router>\n      <JBetaCorner/>\n      { this.state.about ?\n         ( <JBetaCorner version={this.state.about.version.api} /> )\n          : ( <JBetaCorner/> )\n      }\n      <div className=\"app\">\n        { this.state.errorMessage ?\n            ( <Alert variant=\"warning\">\n                {this.state.errorMessage}\n              </Alert> )\n            : ( null)\n        }\n        <div className=\"JMenu\"><JMenu roles={roles}/></div>\n        <div className=\"JContent\">\n          <Switch>\n            <Route exact path=\"/\" component={() => <JHome />} />\n            <Route exact path=\"/month\" component={() => <JMonth />} />\n            <Route exact path=\"/docs\" component={() => <JDocs />} />\n        { roles.includes('admin') ?\n          ( <Route exact path=\"/contrib\" component={() =>\n                    <JContrib about={this.state.about} />\n            } /> )\n          : ( null)\n        }\n        { roles.includes('owner') ?\n          ( <Route exact path=\"/owner\" component={() =>\n                    <JAdmin about={this.state.about} onActionDone={this.onActionDone} />\n            } /> )\n          : ( null)\n        }\n            <Route exact path=\"/about\" component={() => <JAbout about={this.state.about}/>} />\n          </Switch>\n        </div>\n      </div>\n     </Router>\n    );\n  }\n}\n\nexport default JApp;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport JApp from './JApp';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <JApp />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}