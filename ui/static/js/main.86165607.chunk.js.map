{"version":3,"sources":["core/JBetaCorner.js","core/JConstants.js","services/Tracking.js","core/JMenu.js","core/JHome.js","core/JMonth.js","docs/JPeriod.js","docs/JDoc.js","docs/JDocChoice.js","services/ApiV0.js","docs/JDocs.js","admin/JAdmin.js","JApp.js","serviceWorker.js","index.js"],"names":["JBetaCorner","tooltip","this","props","version","className","Component","JConstants","ADMIN","MENU","ENTRIES","initGA","trackingID","ReactGA","initialize","Event","category","action","label","event","JMenu","onMenuClic","bind","menuEntry","console","info","Navbar","bg","expand","Brand","href","onClick","Toggle","aria-controls","Collapse","id","Nav","Link","roles","includes","JHome","JMonth","data","handleMonthsChange","log","board","fetch","then","res","json","forceUpdate","catch","months","bucket","ground","forEach","element","sowBucket","isBucket","elementBucket","push","name","sowGround","isGround","elementGround","ToggleButtonGroup","type","defaultValue","onChange","ToggleButton","value","JPeriod","v","Button","variant","size","disabled","JDoc","onUnselect","Table","striped","bordered","hover","colSpan","doc","nom","Badge","style","cursor","semi","m","plantation","floraison","recolte","nom_scientifique","familles","join","JDocChoice","onSelect","title","map","docType","index","key","ApiV0","onSuccess","onFailure","response","a","aboutResponse","debug","ok","authError","options","queryString","objToQueryString","docsResults","error","details","message","status","Promise","reject","getError","method","samplesResponse","count","obj","keyValuePairs","encodeURIComponent","JDocs","state","docs","errorMessage","infoMessage","hasNext","searchString","bookmark","searchLocked","_handleKeyDown","keyCode","onUnSearch","onNext","onReload","_refocus","searchDocs","document","addEventListener","removeEventListener","entriesSearch","focus","jd","setState","e","preventDefault","evt","lastDocId","length","_id","filter","getDocs","newState","getErrorMessage","Alert","onUnlock","Form","inline","onSubmit","onSearch","FormControl","placeholder","target","ref","input","JAdmin","onAddSample","onRemoveDocuments","onRemoveContribs","admin","removeAllDocs","nbDeleted","actionDone","onActionDone","removeAllContribs","samples","nbSample","docName","docCount","contribName","contribCount","isOwner","about","isAdmin","dbName","documents","adminDbName","contributions","window","confirm","JApp","pageview","location","pathname","search","doAbout","aboutResults","actionMessage","api","exact","path","component","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.86165607.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './JBetaCorner.css';\r\n\r\nclass JBetaCorner extends Component {\r\n  render() {\r\n    var tooltip = (this.props.version)?this.props.version:\"\";\r\n    return (\r\n  <div className=\"corner-ribbon bottom-right sticky blue shadow\">Alpha <sup>{tooltip}</sup></div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JBetaCorner;\r\n","export const JConstants = {\r\n  GOOGLE_ANALYTICS_CODE: \"UA-1988442-19\",\r\n  GG_CATEGORY: { ADMIN:\"ADMIN\", MENU:\"MENU\", ENTRIES:\"ENTRIES\" }\r\n};","/**\r\n * credit: https://medium.com/@malith.dev/track-users-in-your-react-app-with-google-analytics-6364ebfcbae8\r\n */\r\nimport ReactGA from \"react-ga\";\r\n\r\nexport const initGA = (trackingID) => {\r\n   ReactGA.initialize(trackingID);\r\n}\r\n\r\nexport const PageView = () => {\r\n    ReactGA.pageview(window.location.pathname +\r\n                     window.location.search);\r\n}\r\n\r\n/**\r\n * Event - Add custom tracking event.\r\n * @param {string} category\r\n * @param {string} action\r\n * @param {string} label\r\n */\r\nexport const Event = (category, action, label) => {\r\n  ReactGA.event({\r\n    category: category,\r\n    action: action,\r\n    label: label\r\n  });\r\n};","import React, { Component } from 'react'\r\nimport './JMenu.css';\r\nimport { Navbar, Nav } from 'react-bootstrap';\r\nimport {JConstants} from './JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\n\r\nclass JMenu extends Component {\r\n  constructor(props) {\r\n      super(props);\r\n      this.onMenuClic = this.onMenuClic.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n  }\r\n\r\n  onMenuClic(menuEntry) {\r\n    console.info(\"onMenuClic\", menuEntry)\r\n    Event(JConstants.GG_CATEGORY.MENU, menuEntry, \"Menu clic on \" + menuEntry)\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <Navbar bg=\"light\" expand=\"lg\">\r\n        <Navbar.Brand href=\"/\" onClick={this.onMenuClic.bind(this, 'logo')}>JardiCal</Navbar.Brand>\r\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n        <Navbar.Collapse id=\"basic-navbar-nav\">\r\n          <Nav className=\"container-fluid\">\r\n            <Nav.Link href=\"/docs\" onClick={this.onMenuClic.bind(this, 'entrées')}>Entrées</Nav.Link>\r\n            {/* <Nav.Link href=\"/month\">Par mois</Nav.Link> */}\r\n        { this.props.roles && this.props.roles.includes('owner') ?\r\n          ( <Nav.Link href=\"/owner\" onClick={this.onMenuClic.bind(this, 'admin')} className=\"ml-auto\">Admin.</Nav.Link> )\r\n          : ( null)\r\n        }\r\n          </Nav>\r\n        </Navbar.Collapse>\r\n      </Navbar>\r\n\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default JMenu;\r\n/*\r\n            <div>\r\n              <ul className=\"jmenu\">\r\n                  <li><NavLink activeClassName={\"active\"} exact={true}  to=\"/\">Home</NavLink></li>\r\n                  <li><NavLink activeClassName={\"active\"} to=\"/month\">Par mois</NavLink></li>\r\n                </ul>\r\n            </div>\r\n*/","import React, { Component } from 'react'\r\n\r\nclass JHome extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"jhome\">\r\n        <h1>JardiCal</h1>\r\n        <p>\r\n        Retrouvez quand planter quoi, et quand récolter !\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JHome;","import React, { Component } from 'react'\r\nimport { ToggleButtonGroup, ToggleButton} from 'react-bootstrap';\r\n\r\nclass JMonth extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.data = \"\";\r\n\r\n    this.handleMonthsChange = this.handleMonthsChange.bind(this);\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    if (this.data !== \"\") {\r\n      return;\r\n    }\r\n    console.log(\"fetch json\");\r\n      var board = this;\r\n      fetch('/garden.json')\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n              board.data = data;\r\n              console.log(\"data\", data);\r\n              this.forceUpdate();\r\n            })\r\n            .catch(console.log)\r\n  }\r\n\r\n\r\n  handleMonthsChange(months) {\r\n    console.log('handleMonthsChange', months);\r\n    this.bucket = [];\r\n    this.ground = [];\r\n    this.data.forEach(element => {\r\n      if (element.sowBucket) {\r\n        var isBucket = false;\r\n        element.sowBucket.forEach(elementBucket => {\r\n            if (months.includes(elementBucket)) {\r\n                isBucket = true;\r\n            }\r\n        })\r\n        if (isBucket) {\r\n            this.bucket.push(element.name);\r\n        }\r\n      }\r\n      if (element.sowGround) {\r\n        var isGround = false;\r\n        element.sowGround.forEach(elementGround => {\r\n            if (months.includes(elementGround)) {\r\n                isGround = true;\r\n            }\r\n        })\r\n        if (isGround) {\r\n            this.ground.push(element.name);\r\n        }\r\n      }\r\n    });\r\n    this.forceUpdate();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"jmonth\">\r\n       <div className=\"selectMonth\">\r\n        <h1>Par mois</h1>\r\n        <p>\r\n        Choisissez un ou plusieurs mois\r\n        </p>\r\n          <ToggleButtonGroup type=\"checkbox\" defaultValue={[]}\r\n            className=\"mb-2\"\r\n            onChange={this.handleMonthsChange}>\r\n            <ToggleButton value={1}>Janvier</ToggleButton>\r\n            <ToggleButton value={2}>Février</ToggleButton>\r\n            <ToggleButton value={3}>Mars</ToggleButton>\r\n            <ToggleButton value={4}>Avril</ToggleButton>\r\n            <ToggleButton value={5}>Mai</ToggleButton>\r\n            <ToggleButton value={6}>Juin</ToggleButton>\r\n            <ToggleButton value={7}>Juillet</ToggleButton>\r\n            <ToggleButton value={8}>Août</ToggleButton>\r\n            <ToggleButton value={9}>Septembre</ToggleButton>\r\n            <ToggleButton value={10}>Octobre</ToggleButton>\r\n            <ToggleButton value={11}>Novembre</ToggleButton>\r\n            <ToggleButton value={12}>Décembre</ToggleButton>\r\n          </ToggleButtonGroup>\r\n       </div>\r\n       <div className=\"showMonth\">\r\n           Semis en godets : { this.bucket }<br/>\r\n           Semis en pleine terre : { this.ground }<br/>\r\n       </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JMonth;","import React, { Component } from 'react'\r\nimport { Button} from 'react-bootstrap';\r\n\r\nclass JPeriod extends Component {\r\n  render() {\r\n    var v = this.props.value;\r\n    return (<div>\r\n      <Button variant={ v.includes(1) ? 'primary':'secondary' } size=\"sm\" disabled>jan.</Button>\r\n      <Button variant={ v.includes(2) ? 'primary':'secondary' } size=\"sm\" disabled>fév.</Button>\r\n      <Button variant={ v.includes(3) ? 'primary':'secondary' } size=\"sm\" disabled>mars</Button>\r\n      <Button variant={ v.includes(4) ? 'primary':'secondary' } size=\"sm\" disabled>avril</Button>\r\n      <Button variant={ v.includes(5) ? 'primary':'secondary' } size=\"sm\" disabled>mai</Button>\r\n      <Button variant={ v.includes(6) ? 'primary':'secondary' } size=\"sm\" disabled>juin</Button>\r\n      <Button variant={ v.includes(7) ? 'primary':'secondary' } size=\"sm\" disabled>juil.</Button>\r\n      <Button variant={ v.includes(8) ? 'primary':'secondary' } size=\"sm\" disabled>août</Button>\r\n      <Button variant={ v.includes(9) ? 'primary':'secondary' } size=\"sm\" disabled>sep.</Button>\r\n      <Button variant={ v.includes(10) ? 'primary':'secondary' } size=\"sm\" disabled>oct.</Button>\r\n      <Button variant={ v.includes(11) ? 'primary':'secondary' } size=\"sm\" disabled>nov.</Button>\r\n      <Button variant={ v.includes(12) ? 'primary':'secondary' } size=\"sm\" disabled>déc.</Button>\r\n    </div>)\r\n  }\r\n}\r\n\r\nexport default JPeriod;","import React, { Component } from 'react'\r\nimport { Badge, Table} from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare } from 'react-icons/ai';\r\nimport './JDoc.css';\r\nimport JPeriod from './JPeriod';\r\n\r\nclass JDoc extends Component {\r\n\r\n  onUnselect() {\r\n    this.props.onUnselect();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"doc-selected\" >\r\n        <Table striped bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <th colSpan=\"2\">\r\n                  <span className=\"entryName\">{this.props.doc.nom}</span>\r\n                  <Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                       style={{cursor: 'pointer'}}\r\n                       onClick={this.onUnselect.bind(this)}>\r\n                    Fermer <AiOutlineCloseSquare />\r\n                  </Badge>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            { this.props.doc.semi && this.props.doc.semi.m ? (\r\n            <tr>\r\n              <td>Semi</td>\r\n              <td><JPeriod name=\"semi\" value={this.props.doc.semi.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { this.props.doc.plantation && this.props.doc.plantation.m ? (\r\n            <tr>\r\n              <td>Plantation</td>\r\n              <td><JPeriod name=\"plantation\" value={this.props.doc.plantation.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { this.props.doc.floraison && this.props.doc.floraison.m ? (\r\n            <tr>\r\n              <td>Floraison</td>\r\n              <td><JPeriod name=\"floraison\" value={this.props.doc.floraison.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { this.props.doc.recolte && this.props.doc.recolte.m ? (\r\n            <tr>\r\n              <td>Récolte</td>\r\n              <td><JPeriod name=\"recolte\" value={this.props.doc.recolte.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            <tr>\r\n              <td>Nom scientifique</td>\r\n              <td>{this.props.doc.nom_scientifique}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Famille</td>\r\n              <td>{this.props.doc.familles.join(' - ')}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Type</td>\r\n              <td>{this.props.doc.type.join(' - ')}</td>\r\n            </tr>\r\n          </tbody>\r\n        </Table>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JDoc;","import React, { Component } from 'react'\r\nimport { Badge } from 'react-bootstrap';\r\nimport { GiFireFlower, GiPear, GiCarrot, GiHighGrass } from 'react-icons/gi'; // https://react-icons.github.io/react-icons/icons?name=gi\r\n\r\nclass JDocChoice extends Component {\r\n\r\n  onSelect(doc) {\r\n    this.props.onSelect(doc);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"doc-choice\" >\r\n        {/*\r\n        <Button variant=\"secondary\" size=\"sm\">\r\n          {this.props.index} - {this.props.doc.nom} - ({this.props.doc.type})\r\n        </Button>\r\n\r\n        badge doc: https://react-bootstrap.github.io/components/badge/#badge-props\r\n        */}\r\n        <Badge variant=\"success\" size=\"sm mr-2 mt-2\"\r\n               style={{cursor: 'pointer'}}\r\n               title={this.props.doc.type}\r\n               onClick={this.onSelect.bind(this, this.props.doc)}>\r\n          {this.props.doc.nom}\r\n          &#160;\r\n          { this.props.doc.type.map( (docType, index) => {\r\n              if (docType === \"fleur\") {\r\n                return ( <GiFireFlower key={index} />)\r\n              }\r\n              if (docType === \"fruit\") {\r\n                return ( <GiPear key={index} />)\r\n              }\r\n              if (docType === \"légume\") {\r\n                return ( <GiCarrot key={index} />)\r\n              }\r\n              return ( <GiHighGrass key={index} />)\r\n            }) }\r\n        </Badge>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JDocChoice;\r\n//onClick={(e) => this.props.onChoice(this.props.index, e)}","class ApiV0 {\r\n  static debug = false;\r\n\r\n  static about(onSuccess, onFailure) {\r\n    fetch('/api/v0/about')\r\n      .then(async response => {\r\n          var aboutResponse = null;\r\n          try {\r\n            aboutResponse = await response.json();\r\n            if (ApiV0.debug) {\r\n              console.log(\"RESPONSE\", aboutResponse);\r\n            }\r\n          } catch (jsonException) {\r\n          }\r\n          if (!response.ok) {\r\n            onFailure();\r\n            return;\r\n          }\r\n          onSuccess(aboutResponse);\r\n      })\r\n      .catch((authError) => {\r\n        if (ApiV0.debug) {\r\n          console.log(\"ERR\", authError);\r\n        }\r\n        onFailure(authError)\r\n      });\r\n  }\r\n\r\n  static getDocs(options, onSuccess, onFailure) {\r\n    const queryString = ApiV0.objToQueryString(options);\r\n    fetch(`/api/v0/docs?${queryString}`)\r\n    .then(async response => {\r\n      const docsResults = await response.json();\r\n      if (ApiV0.debug) {\r\n        console.log(\"RESPONSE\", docsResults);\r\n      }\r\n      // check for error response\r\n      if (!response.ok) {\r\n        // get error message from body or default to response status\r\n        const error = (docsResults && docsResults.details) || (docsResults && docsResults.message) || response.status;\r\n        return Promise.reject(error);\r\n      }\r\n      onSuccess(docsResults);\r\n    })\r\n    .catch((getError) => {\r\n      if (ApiV0.debug) {\r\n        console.log(\"ERR\", getError);\r\n      }\r\n      onFailure(getError);\r\n    })\r\n  }\r\n\r\n  static samples(onSuccess, onFailure) {\r\n    fetch('/api/v0/docs/samples', { method: 'POST' })\r\n      .then(async response => {\r\n          var samplesResponse = null;\r\n          try {\r\n            samplesResponse = await response.json();\r\n            if (ApiV0.debug) {\r\n              console.log(\"RESPONSE\", samplesResponse);\r\n            }\r\n          } catch (jsonException) {\r\n          }\r\n          if (!response.ok) {\r\n            onFailure();\r\n            return;\r\n          }\r\n          onSuccess(samplesResponse.count);\r\n      })\r\n      .catch((authError) => {\r\n        if (ApiV0.debug) {\r\n          console.log(\"ERR\", authError);\r\n        }\r\n        onFailure(authError)\r\n      });\r\n  }\r\n\r\n  static removeAllDocs(onSuccess, onFailure) {\r\n    fetch(`/api/v0/docs`, { method: 'DELETE' })\r\n    .then(async response => {\r\n      const docsResults = await response.json();\r\n      if (ApiV0.debug) {\r\n        console.log(\"RESPONSE\", docsResults);\r\n      }\r\n      // check for error response\r\n      if (!response.ok) {\r\n        // get error message from body or default to response status\r\n        const error = (docsResults && docsResults.details) || (docsResults && docsResults.message) || response.status;\r\n        return Promise.reject(error);\r\n      }\r\n      onSuccess(docsResults.count);\r\n    })\r\n    .catch((getError) => {\r\n      if (ApiV0.debug) {\r\n        console.log(\"ERR\", getError);\r\n      }\r\n      onFailure(getError);\r\n    })\r\n  }\r\n\r\n  static removeAllContribs(onSuccess, onFailure) {\r\n    fetch(`/api/v0/contributions`, { method: 'DELETE' })\r\n    .then(async response => {\r\n      const docsResults = await response.json();\r\n      if (ApiV0.debug) {\r\n        console.log(\"RESPONSE\", docsResults);\r\n      }\r\n      // check for error response\r\n      if (!response.ok) {\r\n        // get error message from body or default to response status\r\n        const error = (docsResults && docsResults.details) || (docsResults && docsResults.message) || response.status;\r\n        return Promise.reject(error);\r\n      }\r\n      onSuccess(docsResults.count);\r\n    })\r\n    .catch((getError) => {\r\n      if (ApiV0.debug) {\r\n        console.log(\"ERR\", getError);\r\n      }\r\n      onFailure(getError);\r\n    })\r\n  }\r\n\r\n  static objToQueryString(obj) {\r\n    const keyValuePairs = [];\r\n    for (const key in obj) {\r\n      keyValuePairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(obj[key]));\r\n    }\r\n    return keyValuePairs.join('&');\r\n  }\r\n\r\n}\r\n\r\nexport default ApiV0;","import React, { Component } from 'react'\r\nimport './JDocs.css';\r\nimport { Alert, Badge } from 'react-bootstrap';\r\nimport { Form, FormControl, Button} from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare } from 'react-icons/ai';\r\nimport JDoc from './JDoc';\r\nimport JDocChoice from './JDocChoice';\r\nimport ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\n\r\nconst ESCAPE_KEY = 27;\r\nconst UP_ARROW = 38;\r\nconst RIGHT_ARROW = 39;\r\n\r\nclass JDocs extends Component {\r\n  state = {\r\n      docs: null,\r\n      errorMessage: null,\r\n      infoMessage: null,\r\n      hasNext: true,\r\n      searchString: '',\r\n      bookmark: '',\r\n      searchLocked: false\r\n  }\r\n\r\n  componentDidMount() {\r\n    // DEBUG // console.info('componentDidMount')\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n    this._refocus();\r\n    this.searchDocs();\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY:\r\n              this.onUnSearch();\r\n              break;\r\n          case RIGHT_ARROW:\r\n              this.onNext();\r\n              break;\r\n          case UP_ARROW:\r\n              this.onReload();\r\n              break;\r\n          default:\r\n              break;\r\n      }\r\n  }\r\n\r\n  _refocus() {\r\n    if (this.entriesSearch) {\r\n          this.entriesSearch.focus();\r\n    }\r\n  }\r\n\r\n  onReload() {\r\n    var jd = this;\r\n    this.setState({searchString:'',bookmark:'', searchLocked: false}, () => jd.searchDocs())\r\n  }\r\n\r\n  onSearch(e) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n    var jd = this;\r\n    var evt = \"search \" + this.entriesSearch.value;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({searchString:this.entriesSearch.value,bookmark:'',searchLocked:true}, () => jd.searchDocs());\r\n  }\r\n\r\n  onNext() {\r\n    var jd = this;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, \"list next\", \"list next\")\r\n    var lastDocId = this.state.docs[this.state.docs.length-1]._id;\r\n    this.setState({bookmark:lastDocId,searchLocked: false}, () => jd.searchDocs());\r\n  }\r\n\r\n  onSelect(doc) {\r\n    var evt = \"select \" + doc.nom;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({doc})\r\n  }\r\n\r\n  onUnselect() {\r\n    var jd = this;\r\n    var evt = \"unselect\" + this.state.doc.nom;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({doc:null}, () => jd.searchDocs())\r\n  }\r\n\r\n  onUnlock() {\r\n    this.setState({searchLocked: false}, () => this.entriesSearch.focus());\r\n  }\r\n  onUnSearch() {\r\n    this.onReload();\r\n  }\r\n\r\n  searchDocs() {\r\n    var bookmark = this.state.bookmark;\r\n    var searchString = this.state.searchString;\r\n    var filter = {\"limit\":5, };\r\n    if (bookmark && bookmark !== '') {\r\n      filter.bookmark = bookmark;\r\n    }\r\n    if (searchString && searchString !== '') {\r\n      filter.nom = searchString;\r\n    }\r\n    // DEBUG // console.info(\"searchDocs\", filter);\r\n    ApiV0.getDocs(filter,\r\n         (docsResults) => {\r\n           if (docsResults.length) {\r\n               this.setState({\r\n                 docs: docsResults,\r\n                 errorMessage: null,\r\n                 infoMessage: null,\r\n                 hasNext: true\r\n               }, () => this._refocus())\r\n           } else {\r\n               var newState = {hasNext: false};\r\n               if (bookmark == null || bookmark === '') {\r\n                 newState.infoMessage = \"aucun résultat\";\r\n                 newState.docs = null;\r\n               }\r\n               this.setState(newState, () => this._refocus())\r\n           }\r\n         },\r\n         (getErrorMessage) => {\r\n             this.setState({errorMessage: getErrorMessage}, () => this._refocus())\r\n         }\r\n     );\r\n  }\r\n\r\n  render() {\r\n    const searchString = this.state.searchString;\r\n    return (\r\n      <div className=\"jdocs\">\r\n\r\n        { this.state.errorMessage ?\r\n            ( <Alert variant=\"warning\">\r\n                {this.state.errorMessage}\r\n              </Alert> )\r\n            : ( null)\r\n        }\r\n        <div className=\"infoBox\">{this.state.infoMessage}&#160;</div>\r\n        { this.state.doc ?\r\n                  (<div> <JDoc doc={this.state.doc} onUnselect={this.onUnselect.bind(this)} /> </div> ) :\r\n                  (\r\n                  <div className=\"docsList\">\r\n                      <p>\r\n                      Entrées liées au jardin\r\n                      </p>\r\n                      { this.state.searchLocked ?\r\n                      (<div className=\"mb-3\">\r\n                        <Badge variant=\"secondary\" size=\"sm mr-2 mt-2\"\r\n                           onClick={this.onUnlock.bind(this)}>search : {this.state.searchString}</Badge>\r\n                        &#160;\r\n                        <AiOutlineCloseSquare\r\n                                    onClick={this.onUnSearch.bind(this)}\r\n                                    style={{cursor: 'pointer'}}\r\n                                    title=\"Annuler la recherche (raccourci: Escape)\"/>\r\n                       </div>) :\r\n                      (<Form inline className=\"mb-3\" onSubmit={this.onSearch.bind(this)}>\r\n                           <FormControl key=\"entriesSearch\"\r\n                                        type=\"text\"\r\n                                        placeholder=\"Recherche par nom\"\r\n                                        value={searchString}\r\n                                        className=\"mr-sm-2\"\r\n                                        onChange={e => this.setState({ searchString:e.target.value})}\r\n                                        ref={(input) => { this.entriesSearch = input; }}\r\n                           />\r\n                           <Button key=\"entriesSearchButton\"\r\n                                   variant=\"outline-success\"\r\n                                   onClick={this.onSearch.bind(this)}\r\n                                   title=\"Lancer la recherche (raccourci: Enter)\"\r\n                                   >Rechercher</Button>\r\n                       </Form>\r\n                      )}\r\n\r\n\r\n                      { this.state.docs && this.state.docs.length ?\r\n                        ( <div>\r\n                          { this.state.docs.map( (doc, index) => { return(\r\n                               <JDocChoice key={index} index={index} doc={doc} onSelect={this.onSelect.bind(this)} />)\r\n                          }) }\r\n                          </div>\r\n                        ) :\r\n                        ( null )\r\n                      }\r\n                      { this.state.hasNext ?\r\n                          (<div><Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                                  style={{cursor: 'pointer'}}\r\n                                  onClick={this.onNext.bind(this)}\r\n                                  title=\"Suivant (raccourci: <Flèche droite>)\"\r\n                                  >...</Badge></div>) :\r\n                          (<div><Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                                  style={{cursor: 'pointer'}}\r\n                                  onClick={this.onReload.bind(this)}\r\n                                  title=\"Raccourci (raccourci: <Flèche du haut>)\"\r\n                                  >Recharger</Badge></div>)\r\n                       }\r\n                  </div>\r\n                  )\r\n                }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JDocs;","import React, { Component } from 'react'\r\nimport { Alert, Button, Table} from 'react-bootstrap';\r\nimport ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\n\r\nclass JAdmin extends Component {\r\n  state = {\r\n      docs: null,\r\n      errorMessage: null,\r\n      infoMessage: null,\r\n  }\r\n\r\n  constructor(props) {\r\n      super(props);\r\n      this.onAddSample = this.onAddSample.bind(this);\r\n      this.onRemoveDocuments = this.onRemoveDocuments.bind(this);\r\n      this.onRemoveContribs = this.onRemoveContribs.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n  }\r\n\r\n  onRemoveDocuments() {\r\n      var admin = this;\r\n      ApiV0.removeAllDocs((nbDeleted) => {\r\n             var actionDone = nbDeleted + \" échantillon(s) supprimé(s)\";\r\n             Event(JConstants.GG_CATEGORY.ADMIN, \"removeAllDocs\", actionDone)\r\n             admin.props.onActionDone(actionDone);\r\n           },\r\n           (getErrorMessage) => {\r\n               this.setState({errorMessage: getErrorMessage})\r\n           }\r\n       );\r\n  }\r\n\r\n  onRemoveContribs() {\r\n      var admin = this;\r\n      ApiV0.removeAllContribs((nbDeleted) => {\r\n             var actionDone = nbDeleted + \" contribution(s) supprimé(s)\";\r\n             Event(JConstants.GG_CATEGORY.ADMIN, \"removeAllContribs\", actionDone)\r\n             admin.props.onActionDone(actionDone);\r\n           },\r\n           (getErrorMessage) => {\r\n               this.setState({errorMessage: getErrorMessage})\r\n           }\r\n       );\r\n  }\r\n\r\n  onAddSample() {\r\n      var admin = this;\r\n      ApiV0.samples((nbSample) => {\r\n             // DEBUG// console.info(\"samplesResult\",nbSample);\r\n             var actionDone = nbSample + \" échantillons en base\";\r\n             Event(JConstants.GG_CATEGORY.ADMIN, \"samples\", actionDone)\r\n             admin.props.onActionDone(actionDone);\r\n           },\r\n           (getErrorMessage) => {\r\n               this.setState({errorMessage: getErrorMessage})\r\n           }\r\n       );\r\n  }\r\n\r\n  render() {\r\n    var docName = null;\r\n    var docCount = null;\r\n    var contribName = null;\r\n    var contribCount = null;\r\n    var isOwner = this.props.about && this.props.about.roles.includes('owner');\r\n    var isAdmin = this.props.about && this.props.about.roles.includes('admin');\r\n    if (this.props.about) {\r\n      docName = this.props.about.dbName\r\n      docCount = this.props.about.documents\r\n      contribName = this.props.about.adminDbName\r\n      contribCount = this.props.about.contributions\r\n    }\r\n    return (\r\n      <div className=\"jadmin\">\r\n        { this.state.errorMessage ?\r\n            ( <Alert variant=\"warning\">\r\n                {this.state.errorMessage}\r\n              </Alert> )\r\n            : ( null)\r\n        }\r\n        { this.state.infoMessage ?\r\n            ( <Alert variant=\"info\">\r\n                {this.state.infoMessage}\r\n              </Alert> )\r\n            : ( null)\r\n        }\r\n        <div className=\"adminContent\">\r\n        <h1>Configuration</h1>\r\n        <Table striped bordered hover size=\"sm\">\r\n          <thead>\r\n            <tr>\r\n              <th>Base</th>\r\n              <th>Nom</th>\r\n              <th>Nombre d&apos;entrées</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td>Utilisateur</td>\r\n              <td>{docName}</td>\r\n              <td>{docCount}</td>\r\n              <td>\r\n                { isOwner ? ( <Button variant=\"secondary\" size=\"sm\" className=\"mr-2\"\r\n                                      onClick={this.onAddSample.bind(this)}\r\n                                      >Ajout d&apos;un échantillon</Button> ) : (null) }\r\n                { isOwner && docCount > 0 ? (<Button variant=\"secondary\" size=\"sm\"\r\n                                      onClick={() => { if (window.confirm('Êtes-vous sûr de vouloir supprimer les documents ?')) this.onRemoveDocuments() } }\r\n                                      >Supprimer</Button> ) : (null) }\r\n              </td>\r\n            </tr>\r\n            { contribName ?\r\n            (<tr>\r\n              <td>Contribution</td>\r\n              <td>{contribName}</td>\r\n              <td>{contribCount}</td>\r\n              <td>\r\n                { isAdmin && contribCount > 0 ? (<Button variant=\"secondary\" size=\"sm\"\r\n                                      onClick={() => { if (window.confirm('Êtes-vous sûr de vouloir supprimer les contributions ?')) this.onRemoveContribs() } }\r\n                                      >Supprimer</Button> ) : (null) }\r\n              </td>\r\n            </tr>) : (null)\r\n            }\r\n          </tbody>\r\n        </Table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JAdmin;","import React, { Component } from 'react'\nimport './JApp.css';\nimport { Alert } from 'react-bootstrap';\nimport JBetaCorner from './core/JBetaCorner';\nimport JMenu from './core/JMenu';\nimport JHome from './core/JHome';\nimport JMonth from './core/JMonth';\nimport JDocs from './docs/JDocs';\nimport JAdmin from './admin/JAdmin';\nimport {JConstants} from './core/JConstants'\nimport {PageView, initGA} from './services/Tracking';\nimport ApiV0 from './services/ApiV0'\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nclass JApp extends Component {\n  state = {\n      errorMessage: null,\n      about: null\n  }\n\n  constructor(props) {\n      super(props);\n      this.onActionDone = this.onActionDone.bind(this);\n  }\n\n  componentDidMount() {\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\n    PageView();\n    if (this.state.about != null || this.state.errorMessage != null) {\n      return;\n    }\n    this.doAbout();\n  }\n\n  doAbout() {\n      ApiV0.about((aboutResults) => {\n             // DEBUG// console.info(\"aboutResults\",aboutResults)\n             this.setState({\n              about: aboutResults\n             })\n           },\n           (getErrorMessage) => {\n               this.setState({errorMessage: getErrorMessage})\n           }\n       );\n  }\n\n  onActionDone(actionMessage) {\n    console.info(\"onActionDone\",actionMessage);\n    this.doAbout();\n  }\n\n  render() {\n    var roles = [];\n    if (this.state.about && this.state.about.roles) {\n      roles = this.state.about.roles;\n    }\n    return (\n     <Router>\n      <JBetaCorner/>\n      { this.state.about ?\n         ( <JBetaCorner version={this.state.about.version.api} /> )\n          : ( <JBetaCorner/> )\n      }\n      <div className=\"app\">\n        { this.state.errorMessage ?\n            ( <Alert variant=\"warning\">\n                {this.state.errorMessage}\n              </Alert> )\n            : ( null)\n        }\n        <div className=\"JMenu\"><JMenu roles={roles}/></div>\n        <div className=\"JContent\">\n          <Switch>\n            <Route exact path=\"/\" component={() => <JHome />} />\n            <Route exact path=\"/month\" component={() => <JMonth />} />\n            <Route exact path=\"/docs\" component={() => <JDocs />} />\n        { roles.includes('owner') ?\n          ( <Route exact path=\"/owner\" component={() =>\n                    <JAdmin about={this.state.about} onActionDone={this.onActionDone} />\n            } /> )\n          : ( null)\n        }\n          </Switch>\n        </div>\n      </div>\n     </Router>\n    );\n  }\n}\n\nexport default JApp;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport JApp from './JApp';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <JApp />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}