{"version":3,"sources":["core/JBetaCorner.js","core/JConstants.js","services/Tracking.js","core/JMenu.js","core/JHome.js","core/JMonth.js","common/JSearchEntries.js","common/JPeriod.js","docs/JDoc.js","docs/JDocChoice.js","services/ApiV0.js","docs/JDocs.js","admin/JAdmin.js","contrib/JContrib.js","contrib/JPeriodSelector.js","contrib/JMultiCreatable.js","contrib/JAddContrib.js","contrib/JContribChoice.js","contrib/JContribsList.js","contrib/JContribuer.js","core/JAbout.js","core/History.js","JApp.js","serviceWorker.js","index.js"],"names":["JBetaCorner","tooltip","this","props","version","className","Component","JConstants","ADMIN","MENU","ENTRIES","CONTRIB","initGA","trackingID","ReactGA","initialize","Event","category","action","label","event","JMenu","onMenuClic","bind","menuEntry","console","info","Navbar","bg","expand","Brand","as","NavLink","active","document","location","pathname","href","onClick","Toggle","aria-controls","Collapse","id","Nav","Link","startsWith","roles","includes","NavDropdown","alignRight","title","Item","Divider","target","JHome","JMonth","data","handleMonthsChange","log","board","fetch","then","res","json","forceUpdate","catch","months","bucket","ground","forEach","element","sowBucket","isBucket","elementBucket","push","name","sowGround","isGround","elementGround","ToggleButtonGroup","type","defaultValue","onChange","ToggleButton","value","JSearchEntries","searchInput","focus","searchLocked","Badge","variant","size","onUnlock","searchString","unSearch","style","cursor","Form","inline","onSubmit","onSearch","FormControl","key","placeholder","e","onSearchStringUpdated","ref","input","Button","JPeriod","v","disabled","JDoc","_handleKeyDown","keyCode","onUnselect","onEdit","state","doc","_id","addEventListener","removeEventListener","editLink","border","cellPadding","valign","nom","Table","striped","bordered","hover","semi","m","plantation","floraison","recolte","nom_scientifique","familles","join","JDocChoice","onSelect","map","docType","index","ApiV0","Promise","resolve","reject","response","_response","options","getQueryString","queryString","stringify","method","entryToAdd","headers","body","JSON","contribId","_jsonPost","consumeResponseBodyAs","ok","details","message","status","txt","jsonConsumer","txtConsumer","a","text","responseString","responseParsed","parse","debug","JDocs","docs","errorMessage","infoMessage","hasNext","bookmark","onUnSearch","onNext","onReload","about","_refocus","searchDocs","searchEntries","jd","setState","preventDefault","evt","lastDocId","length","filter","getDocs","docsResults","newState","getErrorMessage","Alert","unLock","newSearchString","JAdmin","onAddSample","onRemoveDocuments","onRemoveContribs","admin","removeAllDocs","nbDeleted","actionDone","onActionDone","removeAllContribs","samples","nbSample","docName","docCount","contribName","contribCount","isOwner","isAdmin","dbName","documents","adminDbName","contributions","window","confirm","JContrib","onAccept","onReject","contribDoc","contrib","colSpan","color","JPeriodSelector","enabled","preset","selected","field","curSelection","isSelected","splice","indexOf","Error","month","Text","ButtonToolbar","aria-label","ButtonGroup","multiple","toggleOption","getVariantStyle","onDeactivate","onActivate","JMultiCreatable","selectedOptions","handleChange","newValue","actionMeta","flatValues","nw","maxIntValue","max","parseInt","slice","group","groupEnd","typeOptions","docTypes","dt","multiPlaceholder","isMulti","formatCreateLabel","inputValue","multiCreatable","JAddContrib","onCancelAdd","contribNom","myVar","Array","isArray","_isNotEmpty","undefined","contribute","addResult","onAdded","addErrorMessage","onCancel","periode","presetContrib","addContribSchema","Yup","required","contribNomScientifique","validationSchema","handleAddSubmit","initialValues","presetFor","handleSubmit","values","handleBlur","touched","errors","isValid","setFieldValue","noValidate","Group","controlId","Label","Control","isInvalid","Feedback","docFamilies","JContribChoice","substr","JContribsList","JContribuer","contribs","add","onContrib","searchContribs","_handleEditContribution","qs","ignoreQueryPrefix","contribsResults","newEntry","jc","lastContribId","getContribs","_refreshTypes","_refreshFamilies","getTypes","typesResult","getFamilies","familiesResult","acceptContrib","err","acceptedContrib","rejectContrib","rejectedContrib","JAbout","apiVersion","api","frontEndVersion","jlVersion","history","JApp","pageview","search","doAbout","aboutResults","actionMessage","History","exact","path","component","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.73d52bab.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './JBetaCorner.css';\r\n\r\nclass JBetaCorner extends Component {\r\n  render() {\r\n    var tooltip = (this.props.version)?this.props.version:\"\";\r\n    return (\r\n  <div className=\"corner-ribbon bottom-right sticky blue shadow\">Alpha <sup>{tooltip}</sup></div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JBetaCorner;\r\n","export const JConstants = {\r\n  GOOGLE_ANALYTICS_CODE: \"UA-1988442-19\",\r\n  GG_CATEGORY: { ADMIN:\"ADMIN\", MENU:\"MENU\", ENTRIES:\"ENTRIES\", CONTRIB:\"CONTRIB\" }\r\n};","/**\r\n * credit: https://medium.com/@malith.dev/track-users-in-your-react-app-with-google-analytics-6364ebfcbae8\r\n */\r\nimport ReactGA from \"react-ga\";\r\n\r\nexport const initGA = (trackingID) => {\r\n   ReactGA.initialize(trackingID);\r\n}\r\n\r\nexport const PageView = () => {\r\n    ReactGA.pageview(window.location.pathname +\r\n                     window.location.search);\r\n}\r\n\r\n/**\r\n * Event - Add custom tracking event.\r\n * @param {string} category\r\n * @param {string} action\r\n * @param {string} label\r\n */\r\nexport const Event = (category, action, label) => {\r\n  ReactGA.event({\r\n    category: category,\r\n    action: action,\r\n    label: label\r\n  });\r\n};","import React, { Component } from 'react'\r\nimport './JMenu.css';\r\nimport { Navbar, Nav, NavLink, NavDropdown } from 'react-bootstrap';\r\nimport {JConstants} from './JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\nimport { GiFlowerPot } from 'react-icons/gi';\r\n\r\nclass JMenu extends Component {\r\n  constructor(props) {\r\n      super(props);\r\n      this.onMenuClic = this.onMenuClic.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n  }\r\n\r\n  onMenuClic(menuEntry) {\r\n    console.info(\"onMenuClic\", menuEntry)\r\n    Event(JConstants.GG_CATEGORY.MENU, menuEntry, \"Menu clic on \" + menuEntry)\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <Navbar bg=\"light\" expand=\"lg\">\r\n        <Navbar.Brand as={NavLink}\r\n                      active={(document.location.pathname === '/')}\r\n                      href=\"/\"\r\n                      onClick={this.onMenuClic.bind(this, 'logo')}><GiFlowerPot/> JardiCal</Navbar.Brand>\r\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n        <Navbar.Collapse id=\"basic-navbar-nav\">\r\n          <Nav className=\"mr-auto\">\r\n            <Nav.Link as={NavLink}\r\n                      active={document.location.pathname.startsWith('/docs')}\r\n                      href=\"/docs\"\r\n                      onClick={this.onMenuClic.bind(this, 'entrées')}\r\n                      >Entrées</Nav.Link>\r\n            {/* <Nav.Link href=\"/month\">Par mois</Nav.Link> */}\r\n        { this.props.roles && this.props.roles.includes('admin') ?\r\n          ( <Nav.Link as={NavLink}\r\n                      active={document.location.pathname.startsWith('/contrib')}\r\n                      href=\"/contrib\"\r\n                      onClick={this.onMenuClic.bind(this, 'contrib')}\r\n                      >Contribuer</Nav.Link> )\r\n          : ( null)\r\n        }\r\n        { this.props.roles && this.props.roles.includes('owner') ?\r\n          ( <Nav.Link as={NavLink}\r\n                      active={document.location.pathname.startsWith('/owner')}\r\n                      href=\"/owner\"\r\n                      onClick={this.onMenuClic.bind(this, 'admin')}\r\n                      >Admin</Nav.Link> )\r\n          : ( null)\r\n        }\r\n          </Nav>\r\n          <Nav>\r\n            <NavDropdown alignRight title=\"Aide\" id=\"collasible-nav-dropdown\">\r\n              <NavDropdown.Item href=\"/about\" onClick={this.onMenuClic.bind(this, 'about')}>À propos</NavDropdown.Item>\r\n              <NavDropdown.Divider />\r\n              <NavDropdown.Item href=\"https://github.com/boly38/jardiCal\" target=\"_dep\">Github - source</NavDropdown.Item>\r\n            </NavDropdown>\r\n          </Nav>\r\n        </Navbar.Collapse>\r\n      </Navbar>\r\n\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default JMenu;\r\n/*\r\n            <div>\r\n              <ul className=\"jmenu\">\r\n                  <li><NavLink activeClassName={\"active\"} exact={true}  to=\"/\">Home</NavLink></li>\r\n                  <li><NavLink activeClassName={\"active\"} to=\"/month\">Par mois</NavLink></li>\r\n                </ul>\r\n            </div>\r\n*/","import React, { Component } from 'react'\r\n\r\nclass JHome extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"jhome\">\r\n        <h1>JardiCal</h1>\r\n        <p>\r\n        Retrouvez quand planter quoi, et quand récolter !\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JHome;","import React, { Component } from 'react'\r\nimport { ToggleButtonGroup, ToggleButton} from 'react-bootstrap';\r\n\r\nclass JMonth extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.data = \"\";\r\n\r\n    this.handleMonthsChange = this.handleMonthsChange.bind(this);\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    if (this.data !== \"\") {\r\n      return;\r\n    }\r\n    console.log(\"fetch json\");\r\n      var board = this;\r\n      fetch('/garden.json')\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n              board.data = data;\r\n              console.log(\"data\", data);\r\n              this.forceUpdate();\r\n            })\r\n            .catch(console.log)\r\n  }\r\n\r\n\r\n  handleMonthsChange(months) {\r\n    console.log('handleMonthsChange', months);\r\n    this.bucket = [];\r\n    this.ground = [];\r\n    this.data.forEach(element => {\r\n      if (element.sowBucket) {\r\n        var isBucket = false;\r\n        element.sowBucket.forEach(elementBucket => {\r\n            if (months.includes(elementBucket)) {\r\n                isBucket = true;\r\n            }\r\n        })\r\n        if (isBucket) {\r\n            this.bucket.push(element.name);\r\n        }\r\n      }\r\n      if (element.sowGround) {\r\n        var isGround = false;\r\n        element.sowGround.forEach(elementGround => {\r\n            if (months.includes(elementGround)) {\r\n                isGround = true;\r\n            }\r\n        })\r\n        if (isGround) {\r\n            this.ground.push(element.name);\r\n        }\r\n      }\r\n    });\r\n    this.forceUpdate();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"jmonth\">\r\n       <div className=\"selectMonth\">\r\n        <h1>Par mois</h1>\r\n        <p>\r\n        Choisissez un ou plusieurs mois\r\n        </p>\r\n          <ToggleButtonGroup type=\"checkbox\" defaultValue={[]}\r\n            className=\"mb-2\"\r\n            onChange={this.handleMonthsChange}>\r\n            <ToggleButton value={1}>Janvier</ToggleButton>\r\n            <ToggleButton value={2}>Février</ToggleButton>\r\n            <ToggleButton value={3}>Mars</ToggleButton>\r\n            <ToggleButton value={4}>Avril</ToggleButton>\r\n            <ToggleButton value={5}>Mai</ToggleButton>\r\n            <ToggleButton value={6}>Juin</ToggleButton>\r\n            <ToggleButton value={7}>Juillet</ToggleButton>\r\n            <ToggleButton value={8}>Août</ToggleButton>\r\n            <ToggleButton value={9}>Septembre</ToggleButton>\r\n            <ToggleButton value={10}>Octobre</ToggleButton>\r\n            <ToggleButton value={11}>Novembre</ToggleButton>\r\n            <ToggleButton value={12}>Décembre</ToggleButton>\r\n          </ToggleButtonGroup>\r\n       </div>\r\n       <div className=\"showMonth\">\r\n           Semis en godets : { this.bucket }<br/>\r\n           Semis en pleine terre : { this.ground }<br/>\r\n       </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JMonth;","import React, { Component } from 'react'\r\nimport { Badge } from 'react-bootstrap';\r\nimport { Form, FormControl, Button} from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare } from 'react-icons/ai';\r\n\r\nclass JSearchEntries extends Component {\r\n\r\n  focus() {\r\n    if (this.searchInput) {\r\n      this.searchInput.focus();\r\n    }\r\n  }\r\n\r\n  render() {\r\n      return this.props.searchLocked ? (\r\n                <div className=\"mb-3\">\r\n                 <Badge variant=\"secondary\" size=\"sm mr-2 mt-2\"\r\n                    onClick={this.props.onUnlock}>search : {this.props.searchString}</Badge>\r\n                 &#160;\r\n                 <AiOutlineCloseSquare\r\n                             onClick={this.props.unSearch}\r\n                             style={{cursor: 'pointer'}}\r\n                             title=\"Annuler la recherche (raccourci: Escape)\"/>\r\n                </div>\r\n      ) : (\r\n                <Form inline className=\"mb-3\" onSubmit={this.props.onSearch}>\r\n                    <FormControl key=\"entriesSearch\"\r\n                                 type=\"text\"\r\n                                 placeholder=\"Recherche par nom\"\r\n                                 value={this.props.searchString}\r\n                                 className=\"mr-sm-2\"\r\n                                 onChange={e => this.props.onSearchStringUpdated(e.target.value)}\r\n                                 size=\"sm\"\r\n                                 ref={(input) => { this.searchInput = input; }}\r\n                    />\r\n                    <Button key=\"entriesSearchButton\"\r\n                            variant=\"outline-success\"\r\n                            onClick={this.props.onSearch}\r\n                            title=\"Lancer la recherche (raccourci: Enter)\"\r\n                            size=\"sm\"\r\n                            >Rechercher</Button>\r\n                </Form>\r\n      );\r\n  }\r\n}\r\n\r\nexport default JSearchEntries;","import React, { Component } from 'react'\r\nimport { Button} from 'react-bootstrap';\r\n\r\nclass JPeriod extends Component {\r\n  render() {\r\n    var v = this.props.value;\r\n    return (<div>\r\n      <Button variant={ v.includes(1) ? 'primary':'secondary' } size=\"sm\" disabled>jan.</Button>\r\n      <Button variant={ v.includes(2) ? 'primary':'secondary' } size=\"sm\" disabled>fév.</Button>\r\n      <Button variant={ v.includes(3) ? 'primary':'secondary' } size=\"sm\" disabled>mars</Button>\r\n      <Button variant={ v.includes(4) ? 'primary':'secondary' } size=\"sm\" disabled>avril</Button>\r\n      <Button variant={ v.includes(5) ? 'primary':'secondary' } size=\"sm\" disabled>mai</Button>\r\n      <Button variant={ v.includes(6) ? 'primary':'secondary' } size=\"sm\" disabled>juin</Button>\r\n      <Button variant={ v.includes(7) ? 'primary':'secondary' } size=\"sm\" disabled>juil.</Button>\r\n      <Button variant={ v.includes(8) ? 'primary':'secondary' } size=\"sm\" disabled>août</Button>\r\n      <Button variant={ v.includes(9) ? 'primary':'secondary' } size=\"sm\" disabled>sep.</Button>\r\n      <Button variant={ v.includes(10) ? 'primary':'secondary' } size=\"sm\" disabled>oct.</Button>\r\n      <Button variant={ v.includes(11) ? 'primary':'secondary' } size=\"sm\" disabled>nov.</Button>\r\n      <Button variant={ v.includes(12) ? 'primary':'secondary' } size=\"sm\" disabled>déc.</Button>\r\n    </div>)\r\n  }\r\n}\r\n\r\nexport default JPeriod;","import React, { Component } from 'react'\r\nimport { Table, Button} from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare, AiOutlineForm } from 'react-icons/ai';\r\nimport './JDoc.css';\r\nimport JPeriod from '../common/JPeriod';\r\n\r\nconst ESCAPE_KEY = 27;\r\nconst DOWN_ARROW = 40;\r\n\r\nclass JDoc extends Component {\r\n  constructor(props) {\r\n      super(props);\r\n      this.state = {'editLink': '/contrib?id='+this.props.doc._id};\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY: this.onUnselect(); break;\r\n          case DOWN_ARROW: this.onEdit(); break;\r\n          default: break;\r\n      }\r\n  }\r\n\r\n  onUnselect() {\r\n    this.props.onUnselect();\r\n  }\r\n\r\n  onEdit() {\r\n    document.location = this.state.editLink;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"doc-selected\" >\r\n        <table border='0' cellPadding='5px'><tbody><tr>\r\n         <td valign='top'>\r\n          <span className=\"entryName\">{this.props.doc.nom}</span>\r\n         </td>\r\n         { this.props.roles && this.props.roles.includes('admin') ? (\r\n          <td>\r\n           <Button variant=\"secondary\" size=\"sm mr-2 mt-2\" href={this.state.editLink}\r\n                   onClick={this.onEdit.bind(this)}\r\n                   title=\"Modifier (raccourci: <Flèche du bas>)\"\r\n              >Modifier <AiOutlineForm /></Button>\r\n          </td>\r\n         ) : (null) }\r\n         <td>\r\n          <Button variant=\"secondary\" size=\"sm mr-2 mt-2\"\r\n                                     onClick={this.onUnselect.bind(this)}\r\n                                     title=\"Fermer (raccourci: Escape)\"\r\n                             >Fermer <AiOutlineCloseSquare /></Button>\r\n         </td>\r\n        </tr></tbody></table>\r\n        <Table striped bordered hover>\r\n          <tbody>\r\n            { this.props.doc.semi && this.props.doc.semi.m ? (\r\n            <tr>\r\n              <td>Semi</td>\r\n              <td><JPeriod name=\"semi\" value={this.props.doc.semi.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { this.props.doc.plantation && this.props.doc.plantation.m ? (\r\n            <tr>\r\n              <td>Plantation</td>\r\n              <td><JPeriod name=\"plantation\" value={this.props.doc.plantation.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { this.props.doc.floraison && this.props.doc.floraison.m ? (\r\n            <tr>\r\n              <td>Floraison</td>\r\n              <td><JPeriod name=\"floraison\" value={this.props.doc.floraison.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { this.props.doc.recolte && this.props.doc.recolte.m ? (\r\n            <tr>\r\n              <td>Récolte</td>\r\n              <td><JPeriod name=\"recolte\" value={this.props.doc.recolte.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            <tr>\r\n              <td>Nom scientifique</td>\r\n              <td>{this.props.doc.nom_scientifique}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Famille</td>\r\n              <td>{this.props.doc.familles.join(' - ')}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Type</td>\r\n              <td>{this.props.doc.type.join(' - ')}</td>\r\n            </tr>\r\n          </tbody>\r\n        </Table>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JDoc;","import React, { Component } from 'react'\r\nimport { Badge } from 'react-bootstrap';\r\nimport { GiFireFlower, GiPear, GiCarrot, GiHighGrass } from 'react-icons/gi'; // https://react-icons.github.io/react-icons/icons?name=gi\r\n\r\nclass JDocChoice extends Component {\r\n\r\n  onSelect(doc) {\r\n    this.props.onSelect(doc);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"doc-choice\" >\r\n        {/*\r\n        <Button variant=\"secondary\" size=\"sm\">\r\n          {this.props.index} - {this.props.doc.nom} - ({this.props.doc.type})\r\n        </Button>\r\n\r\n        badge doc: https://react-bootstrap.github.io/components/badge/#badge-props\r\n        */}\r\n        <Badge variant=\"success\" size=\"sm mr-2 mt-2\"\r\n               style={{cursor: 'pointer'}}\r\n               title={this.props.doc.type}\r\n               onClick={this.onSelect.bind(this, this.props.doc)}>\r\n          {this.props.doc.nom}\r\n          &#160;\r\n          { this.props.doc.type.map( (docType, index) => {\r\n              if (docType === \"fleur\") {\r\n                return ( <GiFireFlower key={index} />)\r\n              }\r\n              if (docType === \"fruit\") {\r\n                return ( <GiPear key={index} />)\r\n              }\r\n              if (docType === \"légume\") {\r\n                return ( <GiCarrot key={index} />)\r\n              }\r\n              return ( <GiHighGrass key={index} />)\r\n            }) }\r\n        </Badge>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JDocChoice;\r\n//onClick={(e) => this.props.onChoice(this.props.index, e)}","import queryString from 'query-string';\r\n\r\nclass ApiV0 {\r\n  static debug = false;\r\n\r\n  static about() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch('/api/v0/about')\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static getDocs(options) {\r\n    return new Promise((resolve, reject) => {\r\n      const getQueryString = queryString.stringify(options);\r\n      fetch(`/api/v0/docs?${getQueryString}`)\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static getContribs(options) {\r\n    return new Promise((resolve, reject) => {\r\n      const getQueryString = queryString.stringify(options);\r\n      fetch(`/api/v0/contributions?${getQueryString}`)\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static samples() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch('/api/v0/docs/samples', { method: 'POST' })\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static contribute(entryToAdd) {\r\n    return new Promise((resolve, reject) => {\r\n      fetch('/api/v0/contributions',\r\n        { method: 'POST',\r\n          headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(entryToAdd) })\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));;\r\n    });\r\n  }\r\n\r\n  static removeAllDocs() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`/api/v0/docs`, { method: 'DELETE' })\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));;\r\n    });\r\n  }\r\n\r\n  static removeAllContribs() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`/api/v0/contributions`, { method: 'DELETE' })\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static acceptContrib(contribId) {\r\n    return new Promise((resolve, reject) => {\r\n      fetch('/api/v0/contributions/' + contribId + '/accept', ApiV0._jsonPost())\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static rejectContrib(contribId) {\r\n    return new Promise((resolve, reject) => {\r\n      fetch('/api/v0/contributions/' + contribId + '/reject', ApiV0._jsonPost())\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static getTypes() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`/api/v0/types`)\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n  static getFamilies() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`/api/v0/families`)\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static _jsonPost() {\r\n    return { method: 'POST', headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' } };\r\n  }\r\n\r\n  static _response(response, resolve, reject) {\r\n    ApiV0.consumeResponseBodyAs(response,\r\n      (json) => {\r\n        if (!response.ok) {\r\n          reject((json && json.details) || (json && json.message) || response.status);\r\n        } else {\r\n          resolve(json);\r\n        }\r\n      },\r\n      (txt) => {\r\n        if (!response.ok) {\r\n          reject(txt);\r\n        } else {\r\n          resolve(txt);// some strange case\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  static consumeResponseBodyAs(response, jsonConsumer, txtConsumer) {\r\n    (async () => {\r\n      var responseString = await response.text();\r\n      try{\r\n        if (responseString && typeof responseString === \"string\"){\r\n         var responseParsed = JSON.parse(responseString);\r\n         if (ApiV0.debug) {\r\n            console.log(\"RESPONSE(Json)\", responseParsed);\r\n         }\r\n         return jsonConsumer(responseParsed);\r\n        }\r\n      } catch(error) {\r\n        // text is not a valid json so we will consume as text\r\n      }\r\n      if (ApiV0.debug) {\r\n        console.log(\"RESPONSE(Txt)\", responseString);\r\n      }\r\n      return txtConsumer(responseString);\r\n    })();\r\n  }\r\n}\r\n\r\nexport default ApiV0;","import React, { Component } from 'react'\r\nimport './JDocs.css';\r\nimport { Alert, Badge, Button } from 'react-bootstrap';\r\nimport JSearchEntries from '../common/JSearchEntries';\r\nimport JDoc from './JDoc';\r\nimport JDocChoice from './JDocChoice';\r\nimport ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\n\r\nconst ESCAPE_KEY = 27;\r\nconst UP_ARROW = 38;\r\nconst RIGHT_ARROW = 39;\r\n\r\nclass JDocs extends Component {\r\n  state = {\r\n      docs: null,\r\n      errorMessage: null,\r\n      infoMessage: null,\r\n      hasNext: true,\r\n      searchString: '',\r\n      bookmark: '',\r\n      searchLocked: false // toogle search form\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.about) {\r\n      return;\r\n    }\r\n    // DEBUG // console.info('componentDidMount')\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n    this._refocus();\r\n    this.searchDocs();\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (!this.props.about) {\r\n      return;\r\n    }\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY: this.onUnSearch(); break;\r\n          case RIGHT_ARROW: this.onNext(); break;\r\n          case UP_ARROW: this.onReload(); break;\r\n          default: break;\r\n      }\r\n  }\r\n\r\n  _refocus() {\r\n    if (this.searchEntries) {\r\n          this.searchEntries.focus();\r\n    }\r\n  }\r\n\r\n  onReload() {\r\n    var jd = this;\r\n    this.setState({searchString:'',bookmark:'', searchLocked: false}, () => jd.searchDocs())\r\n  }\r\n\r\n  onSearch(e) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n    var jd = this;\r\n    var evt = \"search \" + this.state.searchString;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({searchString:this.state.searchString,bookmark:'',searchLocked:true}, () => jd.searchDocs());\r\n  }\r\n\r\n  onNext() {\r\n    var jd = this;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, \"list next\", \"list next\")\r\n    var lastDocId = this.state.docs[this.state.docs.length-1]._id;\r\n    this.setState({bookmark:lastDocId,searchLocked: false}, () => jd.searchDocs());\r\n  }\r\n\r\n  onSelect(doc) {\r\n    var evt = \"select \" + doc.nom;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({doc})\r\n  }\r\n\r\n  onUnselect() {\r\n    var jd = this;\r\n    var evt = \"unselect\" + this.state.doc.nom;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({doc:null}, () => jd.searchDocs())\r\n  }\r\n\r\n  onUnlock() {\r\n    this.setState({searchLocked: false}, () => this._refocus());\r\n  }\r\n\r\n  onUnSearch() {\r\n    this.onReload();\r\n  }\r\n\r\n  searchDocs() {\r\n    var bookmark = this.state.bookmark;\r\n    var searchString = this.state.searchString;\r\n    var filter = {\"limit\":10, };\r\n    if (bookmark && bookmark !== '') {\r\n      filter.bookmark = bookmark;\r\n    }\r\n    if (searchString && searchString !== '') {\r\n      filter.nom = searchString;\r\n    }\r\n    // DEBUG // console.info(\"searchDocs\", filter);\r\n    ApiV0.getDocs(filter)\r\n      .then((docsResults) => {\r\n        if (docsResults.length) {\r\n          this.setState({ docs: docsResults, errorMessage: null, infoMessage: null, hasNext: true },\r\n            () => this._refocus());\r\n        } else {\r\n          var newState = {hasNext: false};\r\n          if (bookmark == null || bookmark === '') {\r\n            newState.infoMessage = \"aucun résultat\";\r\n            newState.docs = null;\r\n          }\r\n          this.setState(newState, () => this._refocus())\r\n        }\r\n      })\r\n      .catch((getErrorMessage) => { this.setState({errorMessage: getErrorMessage}, () => this._refocus()); });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.errorMessage) {\r\n      console.log(this.state.errorMessage);\r\n    }\r\n    if (!this.props.about) {\r\n      return (null);\r\n    }\r\n    return (\r\n      <div className=\"jdocs\">\r\n\r\n        { this.state.errorMessage ? (<Alert variant=\"warning\">{this.state.errorMessage}</Alert>) : (null) }\r\n        <div className=\"infoBox\">{this.state.infoMessage}&#160;</div>\r\n        { this.state.doc ?\r\n                  (<div> <JDoc doc={this.state.doc} onUnselect={this.onUnselect.bind(this)} roles={this.props.about.roles} /> </div> ) :\r\n                  (\r\n                  <div className=\"docsList\">\r\n                      <p>Entrées liées au jardin</p>\r\n                      <table border='0' cellPadding='5px'><tbody><tr>\r\n                      { this.state.docs ? (\r\n                       <td valign='top'>\r\n                        <JSearchEntries searchLocked={this.state.searchLocked}\r\n                                      searchString={this.state.searchString}\r\n                                      unLock={this.onUnlock.bind(this)}\r\n                                      unSearch={this.onUnSearch.bind(this)}\r\n                                      onSearchStringUpdated={(newSearchString) => this.setState({ searchString:newSearchString})}\r\n                                      onSearch={this.onSearch.bind(this)}\r\n                                      ref={(input) => { this.searchEntries = input; }}/>\r\n                       </td>\r\n                      ) : (null)}\r\n                      <td valign='top'>\r\n                         <Button variant=\"secondary\" size=\"sm mr-2 ml-2\"\r\n                                                     onClick={this.onReload.bind(this)}\r\n                                                     title=\"Recharger la liste des entrées (raccourci: <Flèche du haut>)\"\r\n                                             >Recharger</Button>\r\n                      </td></tr></tbody></table>\r\n                      { this.state.docs && this.state.docs.length ?\r\n                        ( <div>\r\n                          { this.state.docs.map( (doc, index) => { return(\r\n                               <JDocChoice key={index} index={index} doc={doc} onSelect={this.onSelect.bind(this)} />)\r\n                          }) }\r\n                          </div>\r\n                        ) :\r\n                        ( null )\r\n                      }\r\n                      { this.state.hasNext ?\r\n                          (<div><Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                                  style={{cursor: 'pointer'}}\r\n                                  onClick={this.onNext.bind(this)}\r\n                                  title=\"Suivant (raccourci: <Flèche droite>)\"\r\n                                  >...</Badge></div>) :\r\n                          (null)\r\n                       }\r\n                  </div>\r\n                  )\r\n                }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JDocs;","import React, { Component } from 'react'\r\nimport { Alert, Button, Table} from 'react-bootstrap';\r\nimport ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\n\r\nclass JAdmin extends Component {\r\n  state = {\r\n      docs: null,\r\n      errorMessage: null,\r\n      infoMessage: null,\r\n  }\r\n\r\n  constructor(props) {\r\n      super(props);\r\n      this.onAddSample = this.onAddSample.bind(this);\r\n      this.onRemoveDocuments = this.onRemoveDocuments.bind(this);\r\n      this.onRemoveContribs = this.onRemoveContribs.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n  }\r\n\r\n  onRemoveDocuments() {\r\n      var admin = this;\r\n      ApiV0.removeAllDocs()\r\n      .then((nbDeleted) => {\r\n        var actionDone = nbDeleted + \" échantillon(s) supprimé(s)\";\r\n        Event(JConstants.GG_CATEGORY.ADMIN, \"removeAllDocs\", actionDone)\r\n        admin.props.onActionDone(actionDone);\r\n      })\r\n      .catch((getErrorMessage) => {\r\n        this.setState({errorMessage: getErrorMessage})\r\n      });\r\n  }\r\n\r\n  onRemoveContribs() {\r\n      var admin = this;\r\n      ApiV0.removeAllContribs()\r\n      .then((nbDeleted) => {\r\n        var actionDone = nbDeleted + \" contribution(s) supprimé(s)\";\r\n        Event(JConstants.GG_CATEGORY.ADMIN, \"removeAllContribs\", actionDone)\r\n        admin.props.onActionDone(actionDone);\r\n      })\r\n      .catch((getErrorMessage) => {\r\n        this.setState({errorMessage: getErrorMessage})\r\n      });\r\n  }\r\n\r\n  onAddSample() {\r\n      var admin = this;\r\n      ApiV0.samples()\r\n        .then((nbSample) => {\r\n          // DEBUG// console.info(\"samplesResult\",nbSample);\r\n          var actionDone = nbSample + \" échantillons en base\";\r\n          Event(JConstants.GG_CATEGORY.ADMIN, \"samples\", actionDone)\r\n          admin.props.onActionDone(actionDone);\r\n        })\r\n        .catch((getErrorMessage) => { this.setState({errorMessage: getErrorMessage}); } );\r\n  }\r\n\r\n  render() {\r\n    var docName = null;\r\n    var docCount = null;\r\n    var contribName = null;\r\n    var contribCount = null;\r\n    var isOwner = this.props.about && this.props.about.roles.includes('owner');\r\n    var isAdmin = this.props.about && this.props.about.roles.includes('admin');\r\n    if (this.props.about) {\r\n      docName = this.props.about.dbName\r\n      docCount = this.props.about.documents\r\n      contribName = this.props.about.adminDbName\r\n      contribCount = this.props.about.contributions\r\n    }\r\n    return (\r\n      <div className=\"jadmin\">\r\n        { this.state.errorMessage ?\r\n            ( <Alert variant=\"warning\">\r\n                {this.state.errorMessage}\r\n              </Alert> )\r\n            : ( null)\r\n        }\r\n        { this.state.infoMessage ?\r\n            ( <Alert variant=\"info\">\r\n                {this.state.infoMessage}\r\n              </Alert> )\r\n            : ( null)\r\n        }\r\n        <div className=\"adminContent\">\r\n        <h1>Configuration</h1>\r\n        <Table striped bordered hover size=\"sm\">\r\n          <thead>\r\n            <tr>\r\n              <th>Base</th>\r\n              <th>Nom</th>\r\n              <th>Nombre d&apos;entrées</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td>Utilisateur</td>\r\n              <td>{docName}</td>\r\n              <td>{docCount}</td>\r\n              <td>\r\n                { isOwner ? ( <Button variant=\"secondary\" size=\"sm\" className=\"mr-2\"\r\n                                      onClick={this.onAddSample.bind(this)}\r\n                                      >Ajout d&apos;un échantillon</Button> ) : (null) }\r\n                { isOwner && docCount > 0 ? (<Button variant=\"secondary\" size=\"sm\"\r\n                                      onClick={() => { if (window.confirm('Êtes-vous sûr de vouloir supprimer les documents ?')) this.onRemoveDocuments() } }\r\n                                      >Supprimer</Button> ) : (null) }\r\n              </td>\r\n            </tr>\r\n            { contribName ?\r\n            (<tr>\r\n              <td>Contribution</td>\r\n              <td>{contribName}</td>\r\n              <td>{contribCount}</td>\r\n              <td>\r\n                { isAdmin && contribCount > 0 ? (<Button variant=\"secondary\" size=\"sm\"\r\n                                      onClick={() => { if (window.confirm('Êtes-vous sûr de vouloir supprimer les contributions ?')) this.onRemoveContribs() } }\r\n                                      >Supprimer</Button> ) : (null) }\r\n              </td>\r\n            </tr>) : (null)\r\n            }\r\n          </tbody>\r\n        </Table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JAdmin;","import React, { Component } from 'react'\r\nimport { Badge, Button, Table} from 'react-bootstrap';\r\nimport { AiOutlineClose, AiOutlineCloseSquare, AiOutlineCheck } from 'react-icons/ai';\r\nimport JPeriod from '../common/JPeriod';\r\n\r\nconst ESCAPE_KEY = 27;\r\n\r\nclass JContrib extends Component {\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY:\r\n              this.onUnselect();\r\n              break;\r\n          default:\r\n              break;\r\n      }\r\n  }\r\n\r\n  onUnselect() {\r\n    this.props.onUnselect();\r\n  }\r\n\r\n  onAccept() {\r\n    this.props.onAccept();\r\n  }\r\n\r\n  onReject() {\r\n    this.props.onReject();\r\n  }\r\n\r\n  render() {\r\n    var contribDoc = this.props.contrib && this.props.contrib.doc ? this.props.contrib.doc : {};\r\n    return (\r\n      <div className=\"doc-selected\" >\r\n        <Table striped bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <th colSpan=\"2\">\r\n                  <span className=\"entryName\"><span style={{color:\"grey\"}}>Contribution - </span>{this.props.contrib.doc.nom}</span>\r\n                  <Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                       style={{cursor: 'pointer'}}\r\n                       onClick={this.onUnselect.bind(this)}\r\n                       title=\"Fermer (raccourci: Escape)\">\r\n                    Fermer <AiOutlineCloseSquare />\r\n                  </Badge>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            { contribDoc.semi && contribDoc.semi.m ? (\r\n            <tr>\r\n              <td>Semi</td>\r\n              <td><JPeriod name=\"semi\" value={contribDoc.semi.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { contribDoc.plantation && contribDoc.plantation.m ? (\r\n            <tr>\r\n              <td>Plantation</td>\r\n              <td><JPeriod name=\"plantation\" value={contribDoc.plantation.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { contribDoc.floraison && contribDoc.floraison.m ? (\r\n            <tr>\r\n              <td>Floraison</td>\r\n              <td><JPeriod name=\"floraison\" value={contribDoc.floraison.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { contribDoc.recolte && contribDoc.recolte.m ? (\r\n            <tr>\r\n              <td>Récolte</td>\r\n              <td><JPeriod name=\"recolte\" value={contribDoc.recolte.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            <tr>\r\n              <td>Nom scientifique</td>\r\n              <td>{contribDoc.nom_scientifique}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Famille</td>\r\n              <td>{contribDoc.familles.join(' - ')}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Type</td>\r\n              <td>{contribDoc.type.join(' - ')}</td>\r\n            </tr>\r\n          </tbody>\r\n        </Table>\r\n        <Button variant=\"success\" size=\"sm\" className=\"mr-2\"\r\n                onClick={this.onAccept.bind(this)}\r\n                >Accepter <AiOutlineCheck /></Button>\r\n        <Button variant=\"secondary\" size=\"sm\" className=\"mr-2\"\r\n                onClick={this.onReject.bind(this)}\r\n                >Refuser <AiOutlineClose /></Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JContrib;","import React, { Component } from 'react'\r\nimport {  Button, ButtonToolbar, ButtonGroup, Nav, Navbar } from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare, AiOutlineCheck } from 'react-icons/ai';\r\n\r\nclass JPeriodSelector extends Component {\r\n  state = {\r\n      enabled: this.props.preset && this.props.preset.length > 0,\r\n      selected: this.props.preset ? this.props.preset : []\r\n  }\r\n\r\n  onActivate() {\r\n    this.setState({enabled:true});\r\n  }\r\n\r\n  onDeactivate() {\r\n    this.setState({selected: [], enabled:false}, () => this.props.onChange(this.props.field, []) );\r\n  }\r\n\r\n  toggleOption(e) {\r\n    const key = e.target.value; // e.g. '1'\r\n    var curSelection = this.state.selected;\r\n    if (this.isSelected(key)) {\r\n      curSelection.splice(curSelection.indexOf(key), 1);\r\n    } else {\r\n      curSelection.push(key);\r\n    }\r\n    this.setState({ selected: curSelection }, () => {\r\n      if (!this.props.onChange) {\r\n        throw new Error(\"JPeriodSelector need onChange(field, value) handler as property\");\r\n      }\r\n      // DEBUG // console.info(\"onChange(\",this.props.field,curSelection,\")\")\r\n      this.props.onChange(this.props.field, curSelection);\r\n    });\r\n  }\r\n\r\n  isSelected(month) {\r\n    return this.state.selected && this.state.selected.includes(month);\r\n  }\r\n\r\n  getVariantStyle(key) {\r\n   return this.isSelected(key) ? 'primary' : 'default';\r\n  }\r\n\r\n  render() {\r\n    return this.state.enabled ? (\r\n  <Navbar bg=\"light\" variant=\"light\">\r\n    <Nav className=\"mr-auto\">\r\n      <Navbar.Text className=\"mr-2\">Mois</Navbar.Text>\r\n      <ButtonToolbar aria-label=\"Choix des mois de la période\">\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Hiver\" multiple>\r\n          <Button onClick={this.toggleOption.bind(this)} value='1' variant={this.getVariantStyle('1')}>1</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='2' variant={this.getVariantStyle('2')}>2</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='3' variant={this.getVariantStyle('3')}>3</Button>\r\n        </ButtonGroup>\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Printemps\">\r\n          <Button onClick={this.toggleOption.bind(this)} value='4' variant={this.getVariantStyle('4')}>4</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='5' variant={this.getVariantStyle('5')}>5</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='6' variant={this.getVariantStyle('6')}>6</Button>\r\n        </ButtonGroup>\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Été\">\r\n          <Button onClick={this.toggleOption.bind(this)} value='7' variant={this.getVariantStyle('7')}>7</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='8' variant={this.getVariantStyle('8')}>8</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='9' variant={this.getVariantStyle('9')}>9</Button>\r\n        </ButtonGroup>\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Automne\">\r\n          <Button onClick={this.toggleOption.bind(this)} value='10' variant={this.getVariantStyle('10')}>10</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='11' variant={this.getVariantStyle('11')}>11</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='12' variant={this.getVariantStyle('12')}>12</Button>\r\n        </ButtonGroup>\r\n        <Navbar.Text className=\"ml-2\">Période de {this.props.name}</Navbar.Text>\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Actions\">\r\n          <Button onClick={this.onDeactivate.bind(this)} variant='secondary'\r\n                  size=\"sm\" className=\"ml-2\">Désactiver <AiOutlineCloseSquare /></Button>\r\n        </ButtonGroup>\r\n      </ButtonToolbar>\r\n    </Nav>\r\n  </Navbar>\r\n\r\n    ) : (\r\n  <Navbar bg=\"light\" variant=\"light\">\r\n    <Nav>\r\n      <ButtonToolbar aria-label=\"Choix des mois de la période\">\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Actions\">\r\n          <Button onClick={this.onActivate.bind(this)} variant='info'\r\n                  size=\"sm\" className=\"ml-2\">Ajouter une période de {this.props.name}<AiOutlineCheck className=\"ml-2\"/></Button>\r\n        </ButtonGroup>\r\n      </ButtonToolbar>\r\n    </Nav>\r\n  </Navbar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JPeriodSelector;","import React, { Component } from 'react'\r\nimport CreatableSelect from 'react-select/creatable';\r\nimport { Alert } from 'react-bootstrap';\r\n\r\nclass JMultiCreatable extends Component {\r\n  state = {\r\n      selected: this.props.preset ? this.props.preset : [],\r\n      errorMessage: '',\r\n      selectedOptions : this.props.preset ? this.props.preset.map( v => { return {'label':v, 'value':v }}) : []\r\n  }\r\n\r\n  handleChange = (newValue: any, actionMeta: any) => {\r\n    var flatValues = newValue ? newValue.map(nw => nw.value) : [];\r\n    var maxIntValue = this.props.max ? parseInt(this.props.max, 10) : 10;\r\n    if (flatValues.length > maxIntValue) {\r\n      this.setState({errorMessage: 'maximum ' + this.props.max + ' entrées !',\r\n                     selectedOptions:newValue.slice(0, maxIntValue)});\r\n      return;\r\n    }\r\n    console.group('Value Changed');\r\n    console.log(newValue, actionMeta);\r\n    console.log(`action: ${actionMeta.action}`);\r\n    console.info(\"onChange(\",this.props.field,flatValues,\")\")\r\n    console.groupEnd();\r\n    this.setState({selectedOptions:newValue, errorMessage:''}, () => this.props.onChange(this.props.field, flatValues) );\r\n  };\r\n\r\n  render() {\r\n    var typeOptions = this.props.docTypes ? this.props.docTypes.map(dt => { return {'value':dt, 'label': dt}; }) : [];\r\n     /* [{ value: 'chocolate', label: 'Chocolate' }] */\r\n     /*\r\n     MenuPlacer Warnings => https://github.com/JedWatson/react-select/issues/3703\r\n     fix merged on 27 aug => wait next release (last release 3.1.0 on 22 March dont include the fix)\r\n     */\r\n    var multiPlaceholder = 'Choisir ' + this.props.max ? '(maximum ' + this.props.max + ' choix)' : '';\r\n    var multiCreateLabel = (inputValue) => { return 'Créer \\'' + inputValue+ '\\'';}\r\n    return (\r\n      <div>\r\n        { this.state.errorMessage ? ( <Alert variant=\"warning\">{this.state.errorMessage}</Alert> ) : ( null) }\r\n        <CreatableSelect\r\n          isMulti\r\n          name={ this.props.name }\r\n          onChange={ this.handleChange }\r\n          options={typeOptions}\r\n          value={ this.state.selectedOptions }\r\n          placeholder={ multiPlaceholder}\r\n          formatCreateLabel={ multiCreateLabel }\r\n          ref={(input) => { this.multiCreatable = input; }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JMultiCreatable;","import React, { Component } from 'react'\r\nimport { Alert, Button, Form } from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare, AiOutlineCheck } from 'react-icons/ai';\r\nimport {initGA, Event} from '../services/Tracking';\r\nimport ApiV0 from '../services/ApiV0'\r\nimport JPeriodSelector from './JPeriodSelector';\r\nimport JMultiCreatable from './JMultiCreatable';\r\nimport { JConstants } from '../core/JConstants'\r\nimport { Formik } from 'formik';\r\nimport * as Yup from 'yup';\r\n\r\nconst ESCAPE_KEY = 27;\r\nconst ENTER_KEY = 13;\r\n\r\nclass JAddContrib extends Component {\r\n  state = {\r\n      errorMessage: null,\r\n  }\r\n\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n    this._refocus()\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _refocus() {\r\n    this.contribNom.focus()\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY:\r\n              this.onCancelAdd();\r\n              break;\r\n          case ENTER_KEY:\r\n              // this.handleAddSubmit();\r\n              break;\r\n          default:\r\n              // DEBUG // console.info(\"key\", event.keyCode)\r\n              break;\r\n      }\r\n  }\r\n\r\n  _isNotEmpty(myVar) {\r\n    return Array.isArray(myVar)&&myVar.length>0;\r\n  }\r\n\r\n  handleAddSubmit(entryToAdd) {\r\n    console.info(\"handleAddSubmit \", entryToAdd)\r\n    entryToAdd.semi = (this._isNotEmpty(entryToAdd.semi)) ? {m:  entryToAdd.semi } : undefined;\r\n    entryToAdd.plantation = (this._isNotEmpty(entryToAdd.plantation)) ? {m:  entryToAdd.plantation } : undefined;\r\n    entryToAdd.floraison = (this._isNotEmpty(entryToAdd.floraison)) ? {m:  entryToAdd.floraison } : undefined;\r\n    entryToAdd.recolte = (this._isNotEmpty(entryToAdd.recolte)) ? {m:  entryToAdd.recolte } : undefined;\r\n    ApiV0.contribute(entryToAdd)\r\n      .then((addResult) => {\r\n           console.info(\"addResult\", addResult)\r\n           this.props.onAdded(addResult);\r\n         })\r\n      .catch((addErrorMessage) => {\r\n           this.setState({errorMessage: addErrorMessage}, () => this._refocus())\r\n         });\r\n  }\r\n\r\n  onCancelAdd() {\r\n    var evt = \"cancel add contrib\";\r\n    Event(JConstants.GG_CATEGORY.CONTRIB, evt, evt);\r\n    this.props.onCancel();\r\n  }\r\n\r\n  handlePeriodChange(name, value){\r\n    // DEBUG //\r\n    console.info(\"handlePeriodChange\", name, value);\r\n  }\r\n\r\n  presetFor(periode) {\r\n    return this.props.presetContrib && this.props.presetContrib[periode] ?\r\n           this.props.presetContrib[periode].m.map(v => ''+v ) : [];\r\n  }\r\n\r\n  render() {\r\n\r\n    const addContribSchema = Yup.object({\r\n      contribNom: Yup.string().required(),\r\n      contribNomScientifique: Yup.string().required()\r\n    });\r\n\r\n    return (\r\n<div className=\"add-contrib\" >\r\n\r\n      { this.props.presetContrib ?\r\n        (<h1>Adapter {this.props.presetContrib.nom} </h1>) :\r\n        (<h1>Ajout d&apos;une entrée</h1>)\r\n      }\r\n        { this.state.errorMessage ?\r\n            ( <Alert variant=\"warning\">\r\n                {JSON.stringify(this.state.errorMessage)}\r\n              </Alert> )\r\n            : ( null)\r\n        }\r\n      {/*\r\n        DOC https://formik.org/\r\n        https://react-bootstrap.netlify.app/components/forms/#forms-validation-libraries\r\n       */}\r\n      <div className=\"add-contrib-form\">\r\n        <Formik validationSchema={addContribSchema}\r\n                onSubmit={this.handleAddSubmit.bind(this)}\r\n                initialValues={{\r\n                  contribNom: this.props.presetContrib ? this.props.presetContrib.nom : '',\r\n                  contribNomScientifique: this.props.presetContrib ? this.props.presetContrib.nom_scientifique : '',\r\n                  type: this.props.presetContrib ? this.props.presetContrib.type : [],\r\n                  familles: this.props.presetContrib ? this.props.presetContrib.familles : [],\r\n                  semi: this.presetFor('semi'),\r\n                  plantation: this.presetFor('plantation'),\r\n                  floraison: this.presetFor('floraison'),\r\n                  recolte: this.presetFor('recolte')\r\n                }}\r\n        >\r\n         {({\r\n            handleSubmit,\r\n            handleChange,\r\n            handleBlur,\r\n            values,\r\n            touched,\r\n            isValid,\r\n            errors,\r\n            setFieldValue\r\n          }) => (\r\n             <Form noValidate onSubmit={handleSubmit}>\r\n              <Form.Group controlId=\"addContrib.Nom\">\r\n                <Form.Label>Nom</Form.Label>\r\n                <Form.Control\r\n                        required\r\n                        type=\"text\"\r\n                        key=\"contribNom\"\r\n                        name=\"contribNom\"\r\n                        value={values.contribNom}\r\n                        onChange={handleChange}\r\n                        isValid={touched.contribNom && !errors.contribNom}\r\n                        isInvalid={!!errors.contribNom}\r\n                        ref={(input) => { this.contribNom = input; }}\r\n                        placeholder=\"nom commun court\"\r\n                        />\r\n                <Form.Control.Feedback>Valide</Form.Control.Feedback>\r\n                <Form.Control.Feedback type=\"invalid\">Merci de choisir un nom</Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.NomScientifique\">\r\n                <Form.Label>Nom scientifique</Form.Label>\r\n                <Form.Control\r\n                        required\r\n                        type=\"text\"\r\n                        key=\"contribNomScientifique\"\r\n                        name=\"contribNomScientifique\"\r\n                        value={values.contribNomScientifique}\r\n                        onChange={handleChange}\r\n                        isValid={touched.contribNomScientifique && !errors.contribNomScientifique}\r\n                        isInvalid={!!errors.contribNomScientifique}\r\n                        ref={(input) => { this.contribNomScientifique = input; }}\r\n                        placeholder=\"nom scientifique (latin)\"\r\n                        />\r\n                <Form.Control.Feedback>Valide</Form.Control.Feedback>\r\n                <Form.Control.Feedback type=\"invalid\">Le nom scientifique est requis</Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Types\">\r\n                <Form.Label>Type(s)</Form.Label>\r\n                <JMultiCreatable field=\"type\"\r\n                                 name=\"type\"\r\n                                 max=\"3\"\r\n                                 onChange={setFieldValue}\r\n                                 docTypes={this.props.docTypes}\r\n                                 preset={ this.props.presetContrib ? this.props.presetContrib.type : [] }\r\n                                 />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Families\">\r\n                <Form.Label>Famille(s)</Form.Label>\r\n                <JMultiCreatable field=\"familles\"\r\n                                 name=\"familles\"\r\n                                 max=\"5\"\r\n                                 onChange={setFieldValue}\r\n                                 docTypes={this.props.docFamilies}\r\n                                 preset={ this.props.presetContrib ? this.props.presetContrib.familles : [] }\r\n                                 />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Semi\">\r\n                <JPeriodSelector field=\"semi\" name=\"semi\"\r\n                                 onChange={setFieldValue}\r\n                                 preset={ this.presetFor('semi') } />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Plantation\">\r\n                <JPeriodSelector field=\"plantation\" name=\"plantation\"\r\n                                 onChange={setFieldValue}\r\n                                 preset={ this.presetFor('plantation') } />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Floraison\">\r\n                <JPeriodSelector field=\"floraison\" name=\"floraison\"\r\n                                 onChange={setFieldValue}\r\n                                 preset={ this.presetFor('floraison') } />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Récolte\">\r\n                <JPeriodSelector field=\"recolte\" name=\"récolte\"\r\n                                 onChange={setFieldValue}\r\n                                 preset={ this.presetFor('recolte') }/>\r\n              </Form.Group>\r\n\r\n              <Button type=\"submit\" variant=\"primary\" size=\"sm\" className=\"mr-2\"\r\n                      >Ajouter <AiOutlineCheck /></Button>\r\n              <Button variant=\"secondary\" size=\"sm\" className=\"mr-2\"\r\n                      onClick={this.onCancelAdd.bind(this)}>Annuler <AiOutlineCloseSquare /></Button>\r\n            </Form>\r\n\r\n          )}\r\n        </Formik>\r\n      </div>\r\n</div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JAddContrib;","import React, { Component } from 'react'\r\nimport { Badge } from 'react-bootstrap';\r\n\r\nclass JContribChoice extends Component {\r\n\r\n  onSelect(doc) {\r\n    this.props.onSelect(doc);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"contrib-choice\" >\r\n        <Badge variant=\"secondary\" size=\"sm mr-2 mt-2\"\r\n               style={{cursor: 'pointer'}}\r\n               title={this.props.contrib.doc.type}\r\n               onClick={this.onSelect.bind(this, this.props.contrib)}>\r\n          {this.props.contrib._id.substr(17)} - {this.props.contrib.doc.nom}\r\n        </Badge>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JContribChoice;","import React, { Component } from 'react'\r\nimport JContribChoice from './JContribChoice';\r\n\r\nclass JContribsList extends Component {\r\n\r\n  onSelect(contrib) {\r\n    if (this.props.onSelect) {\r\n      this.props.onSelect(contrib);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <div className=\"contribsList\">\r\n          { this.props.docs && this.props.docs.length ?\r\n            ( <div>\r\n              { this.props.docs.map( (contrib, index) => {\r\n                  return( <JContribChoice  key={index} index={index} contrib={contrib} onSelect={this.onSelect.bind(this)} /> )\r\n              }) }\r\n              </div>\r\n            ) :\r\n            ( null )\r\n          }\r\n        </div>\r\n    );\r\n  }\r\n}\r\nexport default JContribsList;","import React, { Component } from 'react'\r\nimport { Alert, Badge, Button } from 'react-bootstrap';\r\n// import ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\nimport JContrib from './JContrib';\r\nimport JAddContrib from './JAddContrib';\r\nimport JSearchEntries from '../common/JSearchEntries';\r\nimport JContribsList from './JContribsList';\r\nimport ApiV0 from '../services/ApiV0'\r\nimport { AiOutlineCheck } from 'react-icons/ai';\r\nimport qs from 'qs';\r\n\r\nconst ESCAPE_KEY = 27;\r\nconst UP_ARROW = 38;\r\nconst RIGHT_ARROW = 39;\r\nconst DOWN_ARROW = 40;\r\n\r\nclass JContribuer extends Component {\r\n  state = {\r\n      contribs: null,\r\n      errorMessage: null,\r\n      infoMessage: null,\r\n      add: false,\r\n      presetContrib: null,\r\n      hasNext: true,\r\n      searchString: '',\r\n      bookmark: '',\r\n      searchLocked: false, // toogle search form\r\n      docTypes: [],\r\n      docFamilies: []\r\n  }\r\n\r\n  componentDidMount() {\r\n    // DEBUG // console.info('componentDidMount')\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n    this.searchContribs();\r\n    this._refocus();\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n    this._handleEditContribution();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      // DEBUG // console.log(event.keyCode)\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY: this.onUnSearch(); break;\r\n          case RIGHT_ARROW: this.onNext(); break;\r\n          case UP_ARROW: this.onReload(); break;\r\n          case DOWN_ARROW: this.onContrib(); break;\r\n          default: break;\r\n      }\r\n  }\r\n\r\n  _refocus() {\r\n    if (this.searchEntries) {\r\n          this.searchEntries.focus();\r\n    }\r\n  }\r\n\r\n  _handleEditContribution() {\r\n    if (document.location.href.includes('?')) {\r\n      var contribId = qs.parse(document.location.href.substr(document.location.href.indexOf('?')), { ignoreQueryPrefix: true }).id;\r\n      // DEBUG // console.info(\"will edit contrib id:\", contribId);\r\n      ApiV0.getDocs({id:contribId})\r\n        .then((contribsResults) => {\r\n          // DEBUG // console.info(\"contribsResults:\", contribsResults);\r\n          this.setState({\r\n                   add:true,\r\n                   presetContrib: contribsResults[0],\r\n                   errorMessage: null,\r\n                   infoMessage: null})\r\n        })\r\n        .catch((getErrorMessage) => { this.setState({errorMessage: getErrorMessage}, () => this._refocus()); });\r\n    }\r\n  }\r\n\r\n  onContrib() {\r\n    var evt = \"open add contrib\";\r\n    Event(JConstants.GG_CATEGORY.CONTRIB, evt, evt);\r\n    this.setState({add:true,\r\n                   presetContrib: null,\r\n                   errorMessage: null,\r\n                   infoMessage: null})\r\n  }\r\n\r\n  onCancelAdd() {\r\n    this.setState({add:false})\r\n  }\r\n\r\n  onAdded(newEntry) {\r\n    var jc = this;\r\n    if (newEntry && newEntry.doc && newEntry.doc.nom) {\r\n      this.setState({contribs: null, add:false, infoMessage: newEntry.doc.nom + \" ajouté\"}, () => jc.searchContribs());\r\n      return;\r\n    }\r\n    console.info(\"no newEntry?\")\r\n  }\r\n\r\n  onUnlock() {\r\n    this.setState({searchLocked: false}, () => this._refocus());\r\n  }\r\n\r\n  onUnSearch() {\r\n    this.onReload();\r\n  }\r\n\r\n  onReload() {\r\n    var jc = this;\r\n    this.setState({contribs: null, searchString:'',\r\n                   bookmark:'', searchLocked: false,\r\n                   errorMessage: null,\r\n                   infoMessage: null}, () => jc.searchContribs())\r\n  }\r\n\r\n  onSearch(e) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n    var jc = this;\r\n    var evt = \"search \" + this.state.searchString;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({contribs: null, searchString:this.state.searchString, bookmark:'', searchLocked:true}, () => jc.searchContribs());\r\n  }\r\n\r\n  onNext() {\r\n    var jc = this;\r\n    if (!this.state.contribs) {\r\n      return;\r\n    }\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, \"list next contributions\", \"list next contributions\")\r\n    var lastContribId = this.state.contribs[this.state.contribs.length-1]._id;\r\n    this.setState({contribs: null, bookmark:lastContribId, searchLocked: false}, () => jc.searchContribs());\r\n  }\r\n\r\n  searchContribs() {\r\n    var bookmark = this.state.bookmark;\r\n    var searchString = this.state.searchString;\r\n    var filter = {\"limit\":5, };\r\n    if (bookmark && bookmark !== '') {\r\n      filter.bookmark = bookmark;\r\n    }\r\n    if (searchString && searchString !== '') {\r\n      filter.nom = searchString;\r\n    }\r\n    // DEBUG // console.info(\"searchContribs\", filter);\r\n    ApiV0.getContribs(filter)\r\n      .then((contribsResults) => {\r\n        if (contribsResults.length) {\r\n          this.setState({ contribs: contribsResults, errorMessage: null, infoMessage: null, hasNext: true },\r\n            () => this._refocus());\r\n        } else {\r\n          var newState = {hasNext: false};\r\n          if (bookmark == null || bookmark === '') {\r\n            newState.infoMessage = \"aucune contribution\";\r\n            newState.docs = null;\r\n          }\r\n          this.setState(newState, () => this._refocus())\r\n        }\r\n      })\r\n      .catch((getErrorMessage) => { this.setState({errorMessage: getErrorMessage}, () => this._refocus()); });\r\n      this._refreshTypes();\r\n      this._refreshFamilies();\r\n  }\r\n\r\n  _refreshTypes() {\r\n      ApiV0.getTypes()\r\n        .then((typesResult) => {\r\n          this.setState({ docTypes: typesResult });\r\n        })\r\n        .catch((getErrorMessage) => console.info(\"getTypes\", getErrorMessage));\r\n  }\r\n\r\n  _refreshFamilies() {\r\n      ApiV0.getFamilies()\r\n        .then((familiesResult) => {\r\n          this.setState({ docFamilies: familiesResult });\r\n        })\r\n        .catch((getErrorMessage) => console.info(\"getFamilies\", getErrorMessage));\r\n  }\r\n\r\n  onSelect(contrib) {\r\n    var evt = \"select \" + contrib.doc.nom;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({contrib})\r\n  }\r\n\r\n  onUnselect() {\r\n    var jc = this;\r\n    var evt = \"unselect\" + this.state.contrib.doc.nom;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({contrib:null}, () => jc.searchContribs())\r\n  }\r\n\r\n  onAccept() {\r\n    console.info(\"onAccept\", this.state.contrib);\r\n    ApiV0.acceptContrib(this.state.contrib._id)\r\n    .catch((err) => { this.setState({errorMessage: err}, () => this._refocus()); })\r\n    .then((acceptedContrib) => {\r\n      this.setState({contribs: null, searchString:'',bookmark:'', searchLocked: false, contrib:null,\r\n                     infoMessage: this.state.contrib.doc.nom + ' contribution acceptée' })\r\n    });\r\n  }\r\n\r\n  onReject() {\r\n    var jc = this;\r\n    console.info(\"onReject\", this.state.contrib);\r\n    ApiV0.rejectContrib(this.state.contrib._id)\r\n    .catch((err) => { this.setState({errorMessage: err}, () => this._refocus()); })\r\n    .then((rejectedContrib) => {\r\n      this.setState({contribs: null, searchString:'',bookmark:'', searchLocked: false, contrib:null,\r\n                     errorMessage: this.state.contrib.doc.nom + ' contribution rejetée'}, () => jc.searchContribs())\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"jcontrib\">\r\n        <div className=\"contribContent\">\r\n        { this.state.add === true\r\n           ?(<JAddContrib onCancel={this.onCancelAdd.bind(this)}\r\n                          onAdded={this.onAdded.bind(this)}\r\n                          docTypes={this.state.docTypes}\r\n                          docFamilies={this.state.docFamilies}\r\n                          presetContrib={this.state.presetContrib}\r\n                   />)\r\n           :\r\n          this.state.contrib\r\n           ?(<JContrib contrib={this.state.contrib}\r\n                       onUnselect={this.onUnselect.bind(this)}\r\n                       onAccept={this.onAccept.bind(this)}\r\n                       onReject={this.onReject.bind(this)}\r\n                   /> )\r\n           :(<div className=\"contribShow\">\r\n                <p>\r\n                  Contributions\r\n                </p>\r\n                <table border='0' cellPadding='5px'><tbody><tr>\r\n                 { this.state.contribs ? (\r\n                 <td valign='top'>\r\n                  <JSearchEntries searchLocked={this.state.searchLocked}\r\n                                searchString={this.state.searchString}\r\n                                unLock={this.onUnlock.bind(this)}\r\n                                unSearch={this.onUnSearch.bind(this)}\r\n                                onSearchStringUpdated={(newSearchString) => this.setState({ searchString:newSearchString})}\r\n                                onSearch={this.onSearch.bind(this)}\r\n                                ref={(input) => { this.searchEntries = input; }}/>\r\n                 </td>\r\n                 ) : (null)}\r\n                 <td valign='top'>\r\n                   <Button variant=\"secondary\" size=\"sm mr-2 ml-2\"\r\n                                               onClick={this.onReload.bind(this)}\r\n                                               title=\"Recharger la liste des contributions (raccourci: <Flèche du haut>)\"\r\n                                       >Recharger</Button>\r\n                </td><td valign='top'>\r\n                   <Button variant=\"secondary\" size=\"sm\" className=\"ml-2\"\r\n                                               onClick={this.onContrib.bind(this)}\r\n                                               title=\"Ajouter une contribution (raccourci: <Flèche du bas>)\"\r\n                                       >Ajouter <AiOutlineCheck /></Button>\r\n                </td></tr></tbody></table>\r\n                <JContribsList docs={this.state.contribs} onSelect={this.onSelect.bind(this)}/>\r\n                { this.state.hasNext ?\r\n                    (<div><Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                            style={{cursor: 'pointer'}}\r\n                            onClick={this.onNext.bind(this)}\r\n                            title=\"Suivant (raccourci: <Flèche droite>)\"\r\n                            >...</Badge></div>) :\r\n                    (null)\r\n                 }\r\n             </div>\r\n            )\r\n        }\r\n        { this.state.errorMessage ?(<Alert variant=\"warning\">{this.state.errorMessage}</Alert>) : (null) }\r\n        { this.state.infoMessage ?(<Alert variant=\"info\">{this.state.infoMessage}</Alert>) : (null) }\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JContribuer;","import React, { Component } from 'react'\r\nimport { Table} from 'react-bootstrap';\r\n// import ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport { initGA } from '../services/Tracking';\r\nimport { GiSpottedBug, GiFlowerPot } from 'react-icons/gi';\r\nimport { GrWorkshop, GrHeroku } from 'react-icons/gr';\r\nimport { GoMarkGithub } from 'react-icons/go';\r\nimport { DiMongodb } from 'react-icons/di';\r\n\r\nclass JAbout extends Component {\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n  }\r\n\r\n  render() {\r\n    var apiVersion = this.props.about ? this.props.about.version.api : \"N/A\";\r\n    var frontEndVersion = this.props.about ? this.props.about.version['front-end'] : \"N/A\";\r\n    var jlVersion = this.props.about ? this.props.about.version['jardi-lib'] : \"N/A\";\r\n    return (\r\n      <div className=\"jabout\">\r\n        <div className=\"aboutContent\">\r\n        <h1><GiFlowerPot/> À propos</h1>\r\n        <p>\r\n          <b><GiFlowerPot/> JardiCal</b> est un service en ligne gratuit et sans publicité en version <GrWorkshop/> alpha .<br/>\r\n          Ce service gratuit est possible grâce aux plans gratuits mis à disposition des projets open-source :<br/>\r\n        </p>\r\n        <ul style={{'marginLeft': '40px'}}>\r\n          <li>Le code source est présent sur <a href=\"https://github.com\" target=\"_dep\"><GoMarkGithub/> Github</a>,</li>\r\n          <li>L&apos;application est hébergée par <a href=\"https://heroku.com/\" target=\"_dep\"><GrHeroku/> Heroku</a>,</li>\r\n          <li>La base de données par <a href=\"https://cloud.mongodb.com/\" target=\"_dep\"><DiMongodb/>Cloud MongoDB</a>.</li>\r\n        </ul>\r\n        <br/>\r\n        <p>\r\n          <code>version <GrWorkshop/> alpha</code> - le service est en cours de construction\r\n          &#160;et peut comporter <a href=\"https://github.com/boly38/jardiCal/issues\" target=\"_dep\">des bugs <GiSpottedBug/></a>,\r\n          &#160;ou connaître de longues périodes d&apos;indisponibilité.\r\n        </p>\r\n        <Table striped bordered hover size=\"sm\">\r\n          <thead>\r\n            <tr>\r\n              <th>Composant</th>\r\n              <th>Détails</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td><a href=\"https://github.com/boly38/jardiCal\" target=\"_dep\">JardiCal</a> version</td>\r\n              <td>{apiVersion} (front-end: {frontEndVersion})</td>\r\n            </tr>\r\n            <tr>\r\n              <td><a href=\"https://github.com/boly38/jardiLib\" target=\"_dep\">JardiLib</a> version</td>\r\n              <td>{jlVersion}</td>\r\n            </tr>\r\n          </tbody>\r\n        </Table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JAbout;","import { createBrowserHistory as history} from 'history';\r\n\r\nexport default history();","import React, { Component } from 'react'\nimport { Router, Switch, Route, } from \"react-router-dom\";\nimport './JApp.css';\nimport { Alert } from 'react-bootstrap';\nimport JBetaCorner from './core/JBetaCorner';\nimport JMenu from './core/JMenu';\nimport JHome from './core/JHome';\nimport JMonth from './core/JMonth';\nimport JDocs from './docs/JDocs';\nimport JAdmin from './admin/JAdmin';\nimport JContribuer from './contrib/JContribuer';\nimport JAbout from './core/JAbout';\nimport History from './core/History';\nimport {JConstants} from './core/JConstants'\nimport {PageView, initGA} from './services/Tracking';\nimport ApiV0 from './services/ApiV0'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nclass JApp extends Component {\n  state = {\n      errorMessage: null,\n      about: null\n  }\n\n  constructor(props) {\n      super(props);\n      this.onActionDone = this.onActionDone.bind(this);\n  }\n\n  componentDidMount() {\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\n    PageView();\n    if (this.state.about != null || this.state.errorMessage != null) {\n      return;\n    }\n    this.doAbout();\n  }\n\n  doAbout() {\n      ApiV0.about()\n        .then((aboutResults) => { this.setState({ about: aboutResults }); })\n        .catch((getErrorMessage) => { this.setState({errorMessage: getErrorMessage}); });\n  }\n\n  onActionDone(actionMessage) {\n    console.info(\"onActionDone\",actionMessage);\n    this.doAbout();\n  }\n\n  render() {\n    var roles = [];\n    if (this.state.about && this.state.about.roles) {\n      roles = this.state.about.roles;\n    }\n    return (\n     <Router history={History}>\n      <JBetaCorner/>\n      { this.state.about ?\n         ( <JBetaCorner version={this.state.about.version.api} /> )\n          : ( <JBetaCorner/> )\n      }\n      <div className=\"app\">\n        { this.state.errorMessage ?\n            ( <Alert variant=\"warning\">\n                {this.state.errorMessage}\n              </Alert> )\n            : ( null)\n        }\n        <div className=\"JMenu\"><JMenu roles={roles}/></div>\n        <div className=\"JContent\">\n          <Switch>\n            <Route exact path=\"/\" component={() => <JHome />} />\n            <Route exact path=\"/month\" component={() => <JMonth />} />\n            <Route exact path=\"/docs\" component={() => <JDocs about={this.state.about}/>}/>\n        { roles.includes('admin') ?\n          ( <Route exact path=\"/contrib\" component={() =>\n                    <JContribuer about={this.state.about} />\n            } /> )\n          : ( null)\n        }\n        { roles.includes('owner') ?\n          ( <Route exact path=\"/owner\" component={() =>\n                    <JAdmin about={this.state.about} onActionDone={this.onActionDone} />\n            } /> )\n          : ( null)\n        }\n            <Route exact path=\"/about\" component={() => <JAbout about={this.state.about}/>} />\n          </Switch>\n        </div>\n      </div>\n     </Router>\n    );\n  }\n}\n\nexport default JApp;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport JApp from './JApp';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <JApp />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}