(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{128:function(e,t,n){e.exports=n(150)},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},150:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(24),i=n.n(o),c=(n(133),n(7)),s=n(8),l=n(31),u=n(10),m=n(9),h=(n(134),n(162)),d=(n(135),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.version?this.props.version:"";return r.a.createElement("div",{className:"corner-ribbon bottom-right sticky blue shadow"},"Alpha ",r.a.createElement("sup",null,e))}}]),n}(a.Component)),p=(n(136),n(160)),f=n(92),b=n(161),v=n(158),E="UA-1988442-19",y={ADMIN:"ADMIN",MENU:"MENU",ENTRIES:"ENTRIES",CONTRIB:"CONTRIB"},g=n(98),k=function(e){g.a.initialize(e)},S=function(e,t,n){g.a.event({category:e,action:t,label:n})},C=n(34),j=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onMenuClic=a.onMenuClic.bind(Object(l.a)(a)),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){k(E)}},{key:"onMenuClic",value:function(e){console.info("onMenuClic",e),S(y.MENU,e,"Menu clic on "+e)}},{key:"render",value:function(){return r.a.createElement(p.a,{bg:"light",expand:"lg"},r.a.createElement(p.a.Brand,{as:f.a,active:"/"===document.location.pathname,href:"/",onClick:this.onMenuClic.bind(this,"logo")},r.a.createElement(C.c,null)," JardiCal"),r.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(b.a,{className:"mr-auto"},r.a.createElement(b.a.Link,{as:f.a,active:document.location.pathname.startsWith("/docs"),href:"/docs",onClick:this.onMenuClic.bind(this,"entr\xe9es")},"Entr\xe9es"),this.props.roles&&this.props.roles.includes("admin")?r.a.createElement(b.a.Link,{as:f.a,active:document.location.pathname.startsWith("/contrib"),href:"/contrib",onClick:this.onMenuClic.bind(this,"contrib")},"Contribuer"):null,this.props.roles&&this.props.roles.includes("owner")?r.a.createElement(b.a.Link,{as:f.a,active:document.location.pathname.startsWith("/owner"),href:"/owner",onClick:this.onMenuClic.bind(this,"admin")},"Admin"):null),r.a.createElement(b.a,null,r.a.createElement(v.a,{alignRight:!0,title:"Aide",id:"collasible-nav-dropdown"},r.a.createElement(v.a.Item,{href:"/about",onClick:this.onMenuClic.bind(this,"about")},"\xc0 propos"),r.a.createElement(v.a.Divider,null),r.a.createElement(v.a.Item,{href:"https://github.com/boly38/jardiCal",target:"_dep"},"Github - source")))))}}]),n}(a.Component),N=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"jhome"},r.a.createElement("h1",null,"JardiCal"),r.a.createElement("p",null,"Retrouvez quand planter quoi, et quand r\xe9colter !"))}}]),n}(a.Component),O=n(163),M=n(115),w=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).data="",a.handleMonthsChange=a.handleMonthsChange.bind(Object(l.a)(a)),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(""===this.data){console.log("fetch json");var t=this;fetch("/garden.json").then((function(e){return e.json()})).then((function(n){t.data=n,console.log("data",n),e.forceUpdate()})).catch(console.log)}}},{key:"handleMonthsChange",value:function(e){var t=this;console.log("handleMonthsChange",e),this.bucket=[],this.ground=[],this.data.forEach((function(n){if(n.sowBucket){var a=!1;n.sowBucket.forEach((function(t){e.includes(t)&&(a=!0)})),a&&t.bucket.push(n.name)}if(n.sowGround){var r=!1;n.sowGround.forEach((function(t){e.includes(t)&&(r=!0)})),r&&t.ground.push(n.name)}})),this.forceUpdate()}},{key:"render",value:function(){return r.a.createElement("div",{className:"jmonth"},r.a.createElement("div",{className:"selectMonth"},r.a.createElement("h1",null,"Par mois"),r.a.createElement("p",null,"Choisissez un ou plusieurs mois"),r.a.createElement(O.a,{type:"checkbox",defaultValue:[],className:"mb-2",onChange:this.handleMonthsChange},r.a.createElement(M.a,{value:1},"Janvier"),r.a.createElement(M.a,{value:2},"F\xe9vrier"),r.a.createElement(M.a,{value:3},"Mars"),r.a.createElement(M.a,{value:4},"Avril"),r.a.createElement(M.a,{value:5},"Mai"),r.a.createElement(M.a,{value:6},"Juin"),r.a.createElement(M.a,{value:7},"Juillet"),r.a.createElement(M.a,{value:8},"Ao\xfbt"),r.a.createElement(M.a,{value:9},"Septembre"),r.a.createElement(M.a,{value:10},"Octobre"),r.a.createElement(M.a,{value:11},"Novembre"),r.a.createElement(M.a,{value:12},"D\xe9cembre"))),r.a.createElement("div",{className:"showMonth"},"Semis en godets : ",this.bucket,r.a.createElement("br",null),"Semis en pleine terre : ",this.ground,r.a.createElement("br",null)))}}]),n}(a.Component),A=(n(141),n(155)),_=n(159),D=n(116),x=n(83),R=n(23),L=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"focus",value:function(){this.searchInput&&this.searchInput.focus()}},{key:"render",value:function(){var e=this;return this.props.searchLocked?r.a.createElement("div",{className:"mb-3"},r.a.createElement(A.a,{variant:"secondary",size:"sm mr-2 mt-2",onClick:this.props.onUnlock},"search : ",this.props.searchString),"\xa0",r.a.createElement(R.c,{onClick:this.props.unSearch,style:{cursor:"pointer"},title:"Annuler la recherche (raccourci: Escape)"})):r.a.createElement(_.a,{inline:!0,className:"mb-3",onSubmit:this.props.onSearch},r.a.createElement(D.a,{key:"entriesSearch",type:"text",placeholder:"Recherche par nom",value:this.props.searchString,className:"mr-sm-2",onChange:function(t){return e.props.onSearchStringUpdated(t.target.value)},size:"sm",ref:function(t){e.searchInput=t}}),r.a.createElement(x.a,{key:"entriesSearchButton",variant:"outline-success",onClick:this.props.onSearch,title:"Lancer la recherche (raccourci: Enter)",size:"sm"},"Rechercher"))}}]),n}(a.Component),T=n(156),U=(n(142),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.value;return r.a.createElement("div",null,r.a.createElement(x.a,{variant:e.includes(1)?"primary":"secondary",size:"sm",disabled:!0},"jan."),r.a.createElement(x.a,{variant:e.includes(2)?"primary":"secondary",size:"sm",disabled:!0},"f\xe9v."),r.a.createElement(x.a,{variant:e.includes(3)?"primary":"secondary",size:"sm",disabled:!0},"mars"),r.a.createElement(x.a,{variant:e.includes(4)?"primary":"secondary",size:"sm",disabled:!0},"avril"),r.a.createElement(x.a,{variant:e.includes(5)?"primary":"secondary",size:"sm",disabled:!0},"mai"),r.a.createElement(x.a,{variant:e.includes(6)?"primary":"secondary",size:"sm",disabled:!0},"juin"),r.a.createElement(x.a,{variant:e.includes(7)?"primary":"secondary",size:"sm",disabled:!0},"juil."),r.a.createElement(x.a,{variant:e.includes(8)?"primary":"secondary",size:"sm",disabled:!0},"ao\xfbt"),r.a.createElement(x.a,{variant:e.includes(9)?"primary":"secondary",size:"sm",disabled:!0},"sep."),r.a.createElement(x.a,{variant:e.includes(10)?"primary":"secondary",size:"sm",disabled:!0},"oct."),r.a.createElement(x.a,{variant:e.includes(11)?"primary":"secondary",size:"sm",disabled:!0},"nov."),r.a.createElement(x.a,{variant:e.includes(12)?"primary":"secondary",size:"sm",disabled:!0},"d\xe9c."))}}]),n}(a.Component)),z=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._handleKeyDown=function(t){switch(t.keyCode){case 27:e.onUnselect()}},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeyDown)}},{key:"onUnselect",value:function(){this.props.onUnselect()}},{key:"render",value:function(){return r.a.createElement("div",{className:"doc-selected"},r.a.createElement(T.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},r.a.createElement("span",{className:"entryName"},this.props.doc.nom),r.a.createElement(A.a,{variant:"info",size:"sm mr-2 mt-2",style:{cursor:"pointer"},onClick:this.onUnselect.bind(this),title:"Fermer (raccourci: Escape)"},"Fermer ",r.a.createElement(R.c,null))))),r.a.createElement("tbody",null,this.props.doc.semi&&this.props.doc.semi.m?r.a.createElement("tr",null,r.a.createElement("td",null,"Semi"),r.a.createElement("td",null,r.a.createElement(U,{name:"semi",value:this.props.doc.semi.m}))):null,this.props.doc.plantation&&this.props.doc.plantation.m?r.a.createElement("tr",null,r.a.createElement("td",null,"Plantation"),r.a.createElement("td",null,r.a.createElement(U,{name:"plantation",value:this.props.doc.plantation.m}))):null,this.props.doc.floraison&&this.props.doc.floraison.m?r.a.createElement("tr",null,r.a.createElement("td",null,"Floraison"),r.a.createElement("td",null,r.a.createElement(U,{name:"floraison",value:this.props.doc.floraison.m}))):null,this.props.doc.recolte&&this.props.doc.recolte.m?r.a.createElement("tr",null,r.a.createElement("td",null,"R\xe9colte"),r.a.createElement("td",null,r.a.createElement(U,{name:"recolte",value:this.props.doc.recolte.m}))):null,r.a.createElement("tr",null,r.a.createElement("td",null,"Nom scientifique"),r.a.createElement("td",null,this.props.doc.nom_scientifique)),r.a.createElement("tr",null,r.a.createElement("td",null,"Famille"),r.a.createElement("td",null,this.props.doc.familles.join(" - "))),r.a.createElement("tr",null,r.a.createElement("td",null,"Type"),r.a.createElement("td",null,this.props.doc.type.join(" - "))))))}}]),n}(a.Component),I=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"onSelect",value:function(e){this.props.onSelect(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"doc-choice"},r.a.createElement(A.a,{variant:"success",size:"sm mr-2 mt-2",style:{cursor:"pointer"},title:this.props.doc.type,onClick:this.onSelect.bind(this,this.props.doc)},this.props.doc.nom,"\xa0",this.props.doc.type.map((function(e,t){return"fleur"===e?r.a.createElement(C.b,{key:t}):"fruit"===e?r.a.createElement(C.e,{key:t}):"l\xe9gume"===e?r.a.createElement(C.a,{key:t}):r.a.createElement(C.d,{key:t})}))))}}]),n}(a.Component),F=n(103),P=n.n(F),q=n(117),V=n(104),J=n.n(V),B=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,null,[{key:"about",value:function(){return new Promise((function(t,n){fetch("/api/v0/about").catch(n).then((function(a){return e._response(a,t,n)}))}))}},{key:"getDocs",value:function(t){return new Promise((function(n,a){var r=J.a.stringify(t);fetch("/api/v0/docs?".concat(r)).catch(a).then((function(t){return e._response(t,n,a)}))}))}},{key:"getContribs",value:function(t){return new Promise((function(n,a){var r=J.a.stringify(t);fetch("/api/v0/contributions?".concat(r)).catch(a).then((function(t){return e._response(t,n,a)}))}))}},{key:"samples",value:function(){return new Promise((function(t,n){fetch("/api/v0/docs/samples",{method:"POST"}).catch(n).then((function(a){return e._response(a,t,n)}))}))}},{key:"contribute",value:function(t){return new Promise((function(n,a){fetch("/api/v0/contributions",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).catch(a).then((function(t){return e._response(t,n,a)}))}))}},{key:"removeAllDocs",value:function(){return new Promise((function(t,n){fetch("/api/v0/docs",{method:"DELETE"}).catch(n).then((function(a){return e._response(a,t,n)}))}))}},{key:"removeAllContribs",value:function(){return new Promise((function(t,n){fetch("/api/v0/contributions",{method:"DELETE"}).catch(n).then((function(a){return e._response(a,t,n)}))}))}},{key:"acceptContrib",value:function(t){return new Promise((function(n,a){fetch("/api/v0/contributions/"+t+"/accept",e._jsonPost()).catch(a).then((function(t){return e._response(t,n,a)}))}))}},{key:"rejectContrib",value:function(t){return new Promise((function(n,a){fetch("/api/v0/contributions/"+t+"/reject",e._jsonPost()).catch(a).then((function(t){return e._response(t,n,a)}))}))}},{key:"getTypes",value:function(){return new Promise((function(t,n){fetch("/api/v0/types").catch(n).then((function(a){return e._response(a,t,n)}))}))}},{key:"getFamilies",value:function(){return new Promise((function(t,n){fetch("/api/v0/families").catch(n).then((function(a){return e._response(a,t,n)}))}))}},{key:"_jsonPost",value:function(){return{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}}},{key:"_response",value:function(t,n,a){e.consumeResponseBodyAs(t,(function(e){t.ok?n(e):a(e&&e.details||e&&e.message||t.status)}),(function(e){t.ok?n(e):a(e)}))}},{key:"consumeResponseBodyAs",value:function(t,n,a){Object(q.a)(P.a.mark((function r(){var o,i;return P.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.text();case 2:if(o=r.sent,r.prev=3,!o||"string"!==typeof o){r.next=8;break}return i=JSON.parse(o),e.debug&&console.log("RESPONSE(Json)",i),r.abrupt("return",n(i));case 8:r.next=12;break;case 10:r.prev=10,r.t0=r.catch(3);case 12:return e.debug&&console.log("RESPONSE(Txt)",o),r.abrupt("return",a(o));case 14:case"end":return r.stop()}}),r,null,[[3,10]])})))()}}]),e}();B.debug=!1;var K=B,G=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={docs:null,errorMessage:null,infoMessage:null,hasNext:!0,searchString:"",bookmark:"",searchLocked:!1},e._handleKeyDown=function(t){switch(t.keyCode){case 27:e.onUnSearch();break;case 39:e.onNext();break;case 38:e.onReload()}},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.about&&(k(E),this._refocus(),this.searchDocs(),document.addEventListener("keydown",this._handleKeyDown))}},{key:"componentWillUnmount",value:function(){this.props.about&&document.removeEventListener("keydown",this._handleKeyDown)}},{key:"_refocus",value:function(){this.searchEntries&&this.searchEntries.focus()}},{key:"onReload",value:function(){var e=this;this.setState({searchString:"",bookmark:"",searchLocked:!1},(function(){return e.searchDocs()}))}},{key:"onSearch",value:function(e){e&&e.preventDefault();var t=this,n="search "+this.state.searchString;S(y.ENTRIES,n,n),this.setState({searchString:this.state.searchString,bookmark:"",searchLocked:!0},(function(){return t.searchDocs()}))}},{key:"onNext",value:function(){var e=this;S(y.ENTRIES,"list next","list next");var t=this.state.docs[this.state.docs.length-1]._id;this.setState({bookmark:t,searchLocked:!1},(function(){return e.searchDocs()}))}},{key:"onSelect",value:function(e){var t="select "+e.nom;S(y.ENTRIES,t,t),this.setState({doc:e})}},{key:"onUnselect",value:function(){var e=this,t="unselect"+this.state.doc.nom;S(y.ENTRIES,t,t),this.setState({doc:null},(function(){return e.searchDocs()}))}},{key:"onUnlock",value:function(){var e=this;this.setState({searchLocked:!1},(function(){return e._refocus()}))}},{key:"onUnSearch",value:function(){this.onReload()}},{key:"searchDocs",value:function(){var e=this,t=this.state.bookmark,n=this.state.searchString,a={limit:5};t&&""!==t&&(a.bookmark=t),n&&""!==n&&(a.nom=n),K.getDocs(a).then((function(n){if(n.length)e.setState({docs:n,errorMessage:null,infoMessage:null,hasNext:!0},(function(){return e._refocus()}));else{var a={hasNext:!1};null!=t&&""!==t||(a.infoMessage="aucun r\xe9sultat",a.docs=null),e.setState(a,(function(){return e._refocus()}))}})).catch((function(t){e.setState({errorMessage:t},(function(){return e._refocus()}))}))}},{key:"render",value:function(){var e=this;return this.state.errorMessage&&console.log(this.state.errorMessage),this.props.about?r.a.createElement("div",{className:"jdocs"},this.state.errorMessage?r.a.createElement(h.a,{variant:"warning"},this.state.errorMessage):null,r.a.createElement("div",{className:"infoBox"},this.state.infoMessage,"\xa0"),this.state.doc?r.a.createElement("div",null," ",r.a.createElement(z,{doc:this.state.doc,onUnselect:this.onUnselect.bind(this)})," "):r.a.createElement("div",{className:"docsList"},r.a.createElement("p",null,"Entr\xe9es li\xe9es au jardin"),r.a.createElement(L,{searchLocked:this.state.searchLocked,searchString:this.state.searchString,unLock:this.onUnlock.bind(this),unSearch:this.onUnSearch.bind(this),onSearchStringUpdated:function(t){return e.setState({searchString:t})},onSearch:this.onSearch.bind(this),ref:function(t){e.searchEntries=t}}),this.state.docs&&this.state.docs.length?r.a.createElement("div",null,this.state.docs.map((function(t,n){return r.a.createElement(I,{key:n,index:n,doc:t,onSelect:e.onSelect.bind(e)})}))):null,this.state.hasNext?r.a.createElement("div",null,r.a.createElement(A.a,{variant:"info",size:"sm mr-2 mt-2",style:{cursor:"pointer"},onClick:this.onNext.bind(this),title:"Suivant (raccourci: <Fl\xe8che droite>)"},"...")):r.a.createElement("div",null,r.a.createElement(A.a,{variant:"info",size:"sm mr-2 mt-2",style:{cursor:"pointer"},onClick:this.onReload.bind(this),title:"Raccourci (raccourci: <Fl\xe8che du haut>)"},"Recharger")))):null}}]),n}(a.Component),W=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={docs:null,errorMessage:null,infoMessage:null},a.onAddSample=a.onAddSample.bind(Object(l.a)(a)),a.onRemoveDocuments=a.onRemoveDocuments.bind(Object(l.a)(a)),a.onRemoveContribs=a.onRemoveContribs.bind(Object(l.a)(a)),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){k(E)}},{key:"onRemoveDocuments",value:function(){var e=this,t=this;K.removeAllDocs().then((function(e){var n=e+" \xe9chantillon(s) supprim\xe9(s)";S(y.ADMIN,"removeAllDocs",n),t.props.onActionDone(n)})).catch((function(t){e.setState({errorMessage:t})}))}},{key:"onRemoveContribs",value:function(){var e=this,t=this;K.removeAllContribs().then((function(e){var n=e+" contribution(s) supprim\xe9(s)";S(y.ADMIN,"removeAllContribs",n),t.props.onActionDone(n)})).catch((function(t){e.setState({errorMessage:t})}))}},{key:"onAddSample",value:function(){var e=this,t=this;K.samples().then((function(e){var n=e+" \xe9chantillons en base";S(y.ADMIN,"samples",n),t.props.onActionDone(n)})).catch((function(t){e.setState({errorMessage:t})}))}},{key:"render",value:function(){var e=this,t=null,n=null,a=null,o=null,i=this.props.about&&this.props.about.roles.includes("owner"),c=this.props.about&&this.props.about.roles.includes("admin");return this.props.about&&(t=this.props.about.dbName,n=this.props.about.documents,a=this.props.about.adminDbName,o=this.props.about.contributions),r.a.createElement("div",{className:"jadmin"},this.state.errorMessage?r.a.createElement(h.a,{variant:"warning"},this.state.errorMessage):null,this.state.infoMessage?r.a.createElement(h.a,{variant:"info"},this.state.infoMessage):null,r.a.createElement("div",{className:"adminContent"},r.a.createElement("h1",null,"Configuration"),r.a.createElement(T.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Base"),r.a.createElement("th",null,"Nom"),r.a.createElement("th",null,"Nombre d'entr\xe9es"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Utilisateur"),r.a.createElement("td",null,t),r.a.createElement("td",null,n),r.a.createElement("td",null,i?r.a.createElement(x.a,{variant:"secondary",size:"sm",className:"mr-2",onClick:this.onAddSample.bind(this)},"Ajout d'un \xe9chantillon"):null,i&&n>0?r.a.createElement(x.a,{variant:"secondary",size:"sm",onClick:function(){window.confirm("\xcates-vous s\xfbr de vouloir supprimer les documents ?")&&e.onRemoveDocuments()}},"Supprimer"):null)),a?r.a.createElement("tr",null,r.a.createElement("td",null,"Contribution"),r.a.createElement("td",null,a),r.a.createElement("td",null,o),r.a.createElement("td",null,c&&o>0?r.a.createElement(x.a,{variant:"secondary",size:"sm",onClick:function(){window.confirm("\xcates-vous s\xfbr de vouloir supprimer les contributions ?")&&e.onRemoveContribs()}},"Supprimer"):null)):null))))}}]),n}(a.Component),H=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._handleKeyDown=function(t){switch(t.keyCode){case 27:e.onUnselect()}},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeyDown)}},{key:"onUnselect",value:function(){this.props.onUnselect()}},{key:"onAccept",value:function(){this.props.onAccept()}},{key:"onReject",value:function(){this.props.onReject()}},{key:"render",value:function(){var e=this.props.contrib&&this.props.contrib.doc?this.props.contrib.doc:{};return r.a.createElement("div",{className:"doc-selected"},r.a.createElement(T.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},r.a.createElement("span",{className:"entryName"},r.a.createElement("span",{style:{color:"grey"}},"Contribution - "),this.props.contrib.doc.nom),r.a.createElement(A.a,{variant:"info",size:"sm mr-2 mt-2",style:{cursor:"pointer"},onClick:this.onUnselect.bind(this),title:"Fermer (raccourci: Escape)"},"Fermer ",r.a.createElement(R.c,null))))),r.a.createElement("tbody",null,e.semi&&e.semi.m?r.a.createElement("tr",null,r.a.createElement("td",null,"Semi"),r.a.createElement("td",null,r.a.createElement(U,{name:"semi",value:e.semi.m}))):null,e.plantation&&e.plantation.m?r.a.createElement("tr",null,r.a.createElement("td",null,"Plantation"),r.a.createElement("td",null,r.a.createElement(U,{name:"plantation",value:e.plantation.m}))):null,e.floraison&&e.floraison.m?r.a.createElement("tr",null,r.a.createElement("td",null,"Floraison"),r.a.createElement("td",null,r.a.createElement(U,{name:"floraison",value:e.floraison.m}))):null,e.recolte&&e.recolte.m?r.a.createElement("tr",null,r.a.createElement("td",null,"R\xe9colte"),r.a.createElement("td",null,r.a.createElement(U,{name:"recolte",value:e.recolte.m}))):null,r.a.createElement("tr",null,r.a.createElement("td",null,"Nom scientifique"),r.a.createElement("td",null,e.nom_scientifique)),r.a.createElement("tr",null,r.a.createElement("td",null,"Famille"),r.a.createElement("td",null,e.familles.join(" - "))),r.a.createElement("tr",null,r.a.createElement("td",null,"Type"),r.a.createElement("td",null,e.type.join(" - "))))),r.a.createElement(x.a,{variant:"success",size:"sm",className:"mr-2",onClick:this.onAccept.bind(this)},"Accepter ",r.a.createElement(R.a,null)),r.a.createElement(x.a,{variant:"secondary",size:"sm",className:"mr-2",onClick:this.onReject.bind(this)},"Refuser ",r.a.createElement(R.b,null)))}}]),n}(a.Component),$=n(157),Q=n(114),X=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={enabled:!1,selected:[]},e}return Object(s.a)(n,[{key:"onActivate",value:function(){this.setState({enabled:!0})}},{key:"onDeactivate",value:function(){var e=this;this.setState({selected:[],enabled:!1},(function(){return e.props.onChange(e.props.field,[])}))}},{key:"toggleOption",value:function(e){var t=this,n=e.target.value,a=this.state.selected;this.isSelected(n)?a.splice(a.indexOf(n),1):a.push(n),this.setState({selected:a},(function(){if(!t.props.onChange)throw new Error("JPeriodSelector need onChange(field, value) handler as property");t.props.onChange(t.props.field,a)}))}},{key:"isSelected",value:function(e){return this.state.selected&&this.state.selected.includes(e)}},{key:"getVariantStyle",value:function(e){return this.isSelected(e)?"primary":"default"}},{key:"render",value:function(){return this.state.enabled?r.a.createElement(p.a,{bg:"light",variant:"light"},r.a.createElement(b.a,{className:"mr-auto"},r.a.createElement(p.a.Text,{className:"mr-2"},"Mois"),r.a.createElement($.a,{"aria-label":"Choix des mois de la p\xe9riode"},r.a.createElement(Q.a,{className:"mr-2","aria-label":"Hiver",multiple:!0},r.a.createElement(x.a,{onClick:this.toggleOption.bind(this),value:"1",variant:this.getVariantStyle("1")},"1"),r.a.createElement(x.a,{onClick:this.toggleOption.bind(this),value:"2",variant:this.getVariantStyle("2")},"2"),r.a.createElement(x.a,{onClick:this.toggleOption.bind(this),value:"3",variant:this.getVariantStyle("3")},"3")),r.a.createElement(Q.a,{className:"mr-2","aria-label":"Printemps"},r.a.createElement(x.a,{onClick:this.toggleOption.bind(this),value:"4",variant:this.getVariantStyle("4")},"4"),r.a.createElement(x.a,{onClick:this.toggleOption.bind(this),value:"5",variant:this.getVariantStyle("5")},"5"),r.a.createElement(x.a,{onClick:this.toggleOption.bind(this),value:"6",variant:this.getVariantStyle("6")},"6")),r.a.createElement(Q.a,{className:"mr-2","aria-label":"\xc9t\xe9"},r.a.createElement(x.a,{onClick:this.toggleOption.bind(this),value:"7",variant:this.getVariantStyle("7")},"7"),r.a.createElement(x.a,{onClick:this.toggleOption.bind(this),value:"8",variant:this.getVariantStyle("8")},"8"),r.a.createElement(x.a,{onClick:this.toggleOption.bind(this),value:"9",variant:this.getVariantStyle("9")},"9")),r.a.createElement(Q.a,{className:"mr-2","aria-label":"Automne"},r.a.createElement(x.a,{onClick:this.toggleOption.bind(this),value:"10",variant:this.getVariantStyle("10")},"10"),r.a.createElement(x.a,{onClick:this.toggleOption.bind(this),value:"11",variant:this.getVariantStyle("11")},"11"),r.a.createElement(x.a,{onClick:this.toggleOption.bind(this),value:"12",variant:this.getVariantStyle("12")},"12")),r.a.createElement(p.a.Text,{className:"ml-2"},"P\xe9riode de ",this.props.name),r.a.createElement(Q.a,{className:"mr-2","aria-label":"Actions"},r.a.createElement(x.a,{onClick:this.onDeactivate.bind(this),variant:"secondary",size:"sm",className:"ml-2"},"D\xe9sactiver ",r.a.createElement(R.c,null)))))):r.a.createElement(p.a,{bg:"light",variant:"light"},r.a.createElement(b.a,null,r.a.createElement($.a,{"aria-label":"Choix des mois de la p\xe9riode"},r.a.createElement(Q.a,{className:"mr-2","aria-label":"Actions"},r.a.createElement(x.a,{onClick:this.onActivate.bind(this),variant:"info",size:"sm",className:"ml-2"},"Ajouter une p\xe9riode de ",this.props.name,r.a.createElement(R.a,{className:"ml-2"}))))))}}]),n}(a.Component),Y=n(125),Z=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={selected:[],errorMessage:"",selectedOptions:[]},e.handleChange=function(t,n){var a=t?t.map((function(e){return e.value})):[],r=e.props.max?parseInt(e.props.max,10):10;a.length>r?e.setState({errorMessage:"maximum "+e.props.max+" entr\xe9es !",selectedOptions:t.slice(0,r)}):(console.group("Value Changed"),console.log(t,n),console.log("action: ".concat(n.action)),console.info("onChange(",e.props.field,a,")"),console.groupEnd(),e.setState({selectedOptions:t,errorMessage:""},(function(){return e.props.onChange(e.props.field,a)})))},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props.docTypes?this.props.docTypes.map((function(e){return{value:e,label:e}})):[],n="(maximum "+this.props.max+" choix)";return r.a.createElement("div",null,this.state.errorMessage?r.a.createElement(h.a,{variant:"warning"},this.state.errorMessage):null,r.a.createElement(Y.a,{isMulti:!0,name:this.props.name,onChange:this.handleChange,options:t,value:this.state.selectedOptions,placeholder:n,formatCreateLabel:function(e){return"Cr\xe9er '"+e+"'"},ref:function(t){e.multiCreatable=t}}))}}]),n}(a.Component),ee=n(126),te=n(97),ne=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={errorMessage:null},e._handleKeyDown=function(t){switch(t.keyCode){case 27:e.onCancelAdd()}},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){k(E),this._refocus(),document.addEventListener("keydown",this._handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeyDown)}},{key:"_refocus",value:function(){this.contribNom.focus()}},{key:"_isNotEmpty",value:function(e){return Array.isArray(e)&&e.length>0}},{key:"handleAddSubmit",value:function(e){var t=this;console.info("handleAddSubmit ",e),e.semi=this._isNotEmpty(e.semi)?{m:e.semi}:void 0,e.plantation=this._isNotEmpty(e.plantation)?{m:e.plantation}:void 0,e.floraison=this._isNotEmpty(e.floraison)?{m:e.floraison}:void 0,e.recolte=this._isNotEmpty(e.recolte)?{m:e.recolte}:void 0,K.contribute(e).then((function(e){console.info("addResult",e),t.props.onAdded(e)})).catch((function(e){t.setState({errorMessage:e},(function(){return t._refocus()}))}))}},{key:"onCancelAdd",value:function(){var e="cancel add contrib";S(y.CONTRIB,e,e),this.props.onCancel()}},{key:"handlePeriodChange",value:function(e,t){console.info("handlePeriodChange",e,t)}},{key:"render",value:function(){var e=this,t=te.a({contribNom:te.b().required(),contribNomScientifique:te.b().required()});return r.a.createElement("div",{className:"add-contrib"},r.a.createElement("h1",null,"Ajout d'une entr\xe9e"),this.state.errorMessage?r.a.createElement(h.a,{variant:"warning"},JSON.stringify(this.state.errorMessage)):null,r.a.createElement("div",{className:"add-contrib-form"},r.a.createElement(ee.a,{validationSchema:t,onSubmit:this.handleAddSubmit.bind(this),initialValues:{contribNom:"MaFleur",contribNomScientifique:"MaFleurLatine"}},(function(t){var n=t.handleSubmit,a=t.handleChange,o=(t.handleBlur,t.values),i=t.touched,c=(t.isValid,t.errors),s=t.setFieldValue;return r.a.createElement(_.a,{noValidate:!0,onSubmit:n},r.a.createElement(_.a.Group,{controlId:"addContrib.Nom"},r.a.createElement(_.a.Label,null,"Nom"),r.a.createElement(_.a.Control,{required:!0,type:"text",key:"contribNom",name:"contribNom",value:o.contribNom,onChange:a,isValid:i.contribNom&&!c.contribNom,isInvalid:!!c.contribNom,ref:function(t){e.contribNom=t},placeholder:"nom commun court"}),r.a.createElement(_.a.Control.Feedback,null,"Valide"),r.a.createElement(_.a.Control.Feedback,{type:"invalid"},"Merci de choisir un nom")),r.a.createElement(_.a.Group,{controlId:"addContrib.NomScientifique"},r.a.createElement(_.a.Label,null,"Nom scientifique"),r.a.createElement(_.a.Control,{required:!0,type:"text",key:"contribNomScientifique",name:"contribNomScientifique",value:o.contribNomScientifique,onChange:a,isValid:i.contribNomScientifique&&!c.contribNomScientifique,isInvalid:!!c.contribNomScientifique,ref:function(t){e.contribNomScientifique=t},placeholder:"nom scientifique (latin)"}),r.a.createElement(_.a.Control.Feedback,null,"Valide"),r.a.createElement(_.a.Control.Feedback,{type:"invalid"},"Le nom scientifique est requis")),r.a.createElement(_.a.Group,{controlId:"addContrib.Types"},r.a.createElement(_.a.Label,null,"Type(s)"),r.a.createElement(Z,{field:"type",name:"type",max:"3",onChange:s,docTypes:e.props.docTypes})),r.a.createElement(_.a.Group,{controlId:"addContrib.Families"},r.a.createElement(_.a.Label,null,"Famille(s)"),r.a.createElement(Z,{field:"familles",name:"familles",max:"5",onChange:s,docTypes:e.props.docFamilies})),r.a.createElement(_.a.Group,{controlId:"addContrib.Semi"},r.a.createElement(X,{field:"semi",name:"semi",onChange:s})),r.a.createElement(_.a.Group,{controlId:"addContrib.Plantation"},r.a.createElement(X,{field:"plantation",name:"plantation",onChange:s})),r.a.createElement(_.a.Group,{controlId:"addContrib.Floraison"},r.a.createElement(X,{field:"floraison",name:"floraison",onChange:s})),r.a.createElement(_.a.Group,{controlId:"addContrib.R\xe9colte"},r.a.createElement(X,{field:"recolte",name:"r\xe9colte",onChange:s})),r.a.createElement(x.a,{type:"submit",variant:"primary",size:"sm",className:"mr-2"},"Ajouter ",r.a.createElement(R.a,null)),r.a.createElement(x.a,{variant:"secondary",size:"sm",className:"mr-2",onClick:e.onCancelAdd.bind(e)},"Annuler ",r.a.createElement(R.c,null)))}))))}}]),n}(a.Component),ae=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"onSelect",value:function(e){this.props.onSelect(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"contrib-choice"},r.a.createElement(A.a,{variant:"secondary",size:"sm mr-2 mt-2",style:{cursor:"pointer"},title:this.props.contrib.doc.type,onClick:this.onSelect.bind(this,this.props.contrib)},this.props.contrib._id.substr(17)," - ",this.props.contrib.doc.nom))}}]),n}(a.Component),re=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"onSelect",value:function(e){this.props.onSelect&&this.props.onSelect(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"contribsList"},this.props.docs&&this.props.docs.length?r.a.createElement("div",null,this.props.docs.map((function(t,n){return r.a.createElement(ae,{key:n,index:n,contrib:t,onSelect:e.onSelect.bind(e)})}))):null)}}]),n}(a.Component),oe=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={contribs:null,errorMessage:null,infoMessage:null,add:!1,hasNext:!0,searchString:"",bookmark:"",searchLocked:!1,docTypes:[],docFamilies:[]},e._handleKeyDown=function(t){switch(t.keyCode){case 27:e.onUnSearch();break;case 39:break;case 38:e.onReload()}},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){k(E),this.searchContribs(),this._refocus(),document.addEventListener("keydown",this._handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeyDown)}},{key:"_refocus",value:function(){this.searchEntries&&this.searchEntries.focus()}},{key:"onContrib",value:function(){var e="open add contrib";S(y.CONTRIB,e,e),this.setState({add:!0})}},{key:"onCancelAdd",value:function(){this.setState({add:!1})}},{key:"onAdded",value:function(e){var t=this;e&&e.doc&&e.doc.nom?this.setState({contribs:null,add:!1,infoMessage:e.doc.nom+" ajout\xe9"},(function(){return t.searchContribs()})):console.info("no newEntry?")}},{key:"onUnlock",value:function(){var e=this;this.setState({searchLocked:!1},(function(){return e._refocus()}))}},{key:"onUnSearch",value:function(){this.onReload()}},{key:"onReload",value:function(){var e=this;this.setState({contribs:null,searchString:"",bookmark:"",searchLocked:!1},(function(){return e.searchContribs()}))}},{key:"onSearch",value:function(e){e&&e.preventDefault();var t=this,n="search "+this.state.searchString;S(y.ENTRIES,n,n),this.setState({contribs:null,searchString:this.state.searchString,bookmark:"",searchLocked:!0},(function(){return t.searchContribs()}))}},{key:"onNext",value:function(){var e=this;S(y.ENTRIES,"list next contributions","list next contributions");var t=this.state.contribs[this.state.contribs.length-1]._id;this.setState({contribs:null,bookmark:t,searchLocked:!1},(function(){return e.searchContribs()}))}},{key:"searchContribs",value:function(){var e=this,t=this.state.bookmark,n=this.state.searchString,a={limit:5};t&&""!==t&&(a.bookmark=t),n&&""!==n&&(a.nom=n),K.getContribs(a).then((function(n){if(n.length)e.setState({contribs:n,errorMessage:null,infoMessage:null,hasNext:!0},(function(){return e._refocus()}));else{var a={hasNext:!1};null!=t&&""!==t||(a.infoMessage="aucune contribution",a.docs=null),e.setState(a,(function(){return e._refocus()}))}})).catch((function(t){e.setState({errorMessage:t},(function(){return e._refocus()}))})),this._refreshTypes(),this._refreshFamilies()}},{key:"_refreshTypes",value:function(){var e=this;K.getTypes().then((function(t){e.setState({docTypes:t})})).catch((function(e){return console.info("getTypes",e)}))}},{key:"_refreshFamilies",value:function(){var e=this;K.getFamilies().then((function(t){e.setState({docFamilies:t})})).catch((function(e){return console.info("getFamilies",e)}))}},{key:"onSelect",value:function(e){var t="select "+e.doc.nom;S(y.ENTRIES,t,t),this.setState({contrib:e})}},{key:"onUnselect",value:function(){var e=this,t="unselect"+this.state.contrib.doc.nom;S(y.ENTRIES,t,t),this.setState({contrib:null},(function(){return e.searchContribs()}))}},{key:"onAccept",value:function(){var e=this,t=this;console.info("onAccept",this.state.contrib),K.acceptContrib(this.state.contrib._id).catch((function(t){e.setState({errorMessage:t},(function(){return e._refocus()}))})).then((function(n){e.setState({contribs:null,searchString:"",bookmark:"",searchLocked:!1,contrib:null,infoMessage:n+" contribution accept\xe9e"},(function(){return t.searchContribs()}))}))}},{key:"onReject",value:function(){var e=this,t=this;console.info("onReject",this.state.contrib),K.rejectContrib(this.state.contrib._id).catch((function(t){e.setState({errorMessage:t},(function(){return e._refocus()}))})).then((function(n){e.setState({contribs:null,searchString:"",bookmark:"",searchLocked:!1,contrib:null,infoMessage:n+" contribution rejet\xe9e"},(function(){return t.searchContribs()}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"jcontrib"},this.state.errorMessage?r.a.createElement(h.a,{variant:"warning"},this.state.errorMessage):null,this.state.infoMessage?r.a.createElement(h.a,{variant:"info"},this.state.infoMessage):null,r.a.createElement("div",{className:"contribContent"},!0===this.state.add?r.a.createElement(ne,{onCancel:this.onCancelAdd.bind(this),onAdded:this.onAdded.bind(this),docTypes:this.state.docTypes,docFamilies:this.state.docFamilies}):this.state.contrib?r.a.createElement(H,{contrib:this.state.contrib,onUnselect:this.onUnselect.bind(this),onAccept:this.onAccept.bind(this),onReject:this.onReject.bind(this)}):r.a.createElement("div",{className:"contribShow"},r.a.createElement("p",null,"Contributions"),r.a.createElement(L,{searchLocked:this.state.searchLocked,searchString:this.state.searchString,unLock:this.onUnlock.bind(this),unSearch:this.onUnSearch.bind(this),onSearchStringUpdated:function(t){return e.setState({searchString:t})},onSearch:this.onSearch.bind(this),ref:function(t){e.searchEntries=t}}),r.a.createElement(re,{docs:this.state.contribs,onSelect:this.onSelect.bind(this)}),this.state.hasNext?r.a.createElement("div",null,r.a.createElement(A.a,{variant:"info",size:"sm mr-2 mt-2",style:{cursor:"pointer"},onClick:this.onNext.bind(this),title:"Suivant (raccourci: <Fl\xe8che droite>)"},"...")):r.a.createElement("div",null,r.a.createElement(A.a,{variant:"info",size:"sm mr-2 mt-2",style:{cursor:"pointer"},onClick:this.onReload.bind(this),title:"Raccourci (raccourci: <Fl\xe8che du haut>)"},"Recharger")),r.a.createElement(x.a,{variant:"secondary",size:"sm",className:"mr-2",onClick:this.onContrib.bind(this)},"Contribuer"))))}}]),n}(a.Component),ie=n(96),ce=n(121),se=n(122),le=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){k(E)}},{key:"render",value:function(){var e=this.props.about?this.props.about.version.api:"N/A",t=this.props.about?this.props.about.version["jardi-lib"]:"N/A";return r.a.createElement("div",{className:"jabout"},r.a.createElement("div",{className:"aboutContent"},r.a.createElement("h1",null,r.a.createElement(C.c,null)," \xc0 propos"),r.a.createElement("p",null,r.a.createElement("b",null,r.a.createElement(C.c,null)," JardiCal")," est un service en ligne gratuit et sans publicit\xe9 en version ",r.a.createElement(ie.b,null)," alpha .",r.a.createElement("br",null),"Ce service gratuit est possible gr\xe2ce aux plans gratuits mis \xe0 disposition des projets open-source :",r.a.createElement("br",null)),r.a.createElement("ul",{style:{marginLeft:"40px"}},r.a.createElement("li",null,"Le code source est pr\xe9sent sur ",r.a.createElement("a",{href:"https://github.com",target:"_dep"},r.a.createElement(ce.a,null)," Github"),","),r.a.createElement("li",null,"L'application est h\xe9berg\xe9e par ",r.a.createElement("a",{href:"https://heroku.com/",target:"_dep"},r.a.createElement(ie.a,null)," Heroku"),","),r.a.createElement("li",null,"La base de donn\xe9es par ",r.a.createElement("a",{href:"https://cloud.mongodb.com/",target:"_dep"},r.a.createElement(se.a,null),"Cloud MongoDB"),".")),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("code",null,"version ",r.a.createElement(ie.b,null)," alpha")," - le service est en cours de construction \xa0et peut comporter ",r.a.createElement("a",{href:"https://github.com/boly38/jardiCal/issues",target:"_dep"},"des bugs ",r.a.createElement(C.f,null)),", \xa0ou conna\xeetre de longues p\xe9riodes d'indisponibilit\xe9."),r.a.createElement(T.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Composant"),r.a.createElement("th",null,"D\xe9tails"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("a",{href:"https://github.com/boly38/jardiCal",target:"_dep"},"JardiCal")," version"),r.a.createElement("td",null,e)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("a",{href:"https://github.com/boly38/jardiLib",target:"_dep"},"JardiLib")," version"),r.a.createElement("td",null,t))))))}}]),n}(a.Component),ue=n(123),me=n(12),he=(n(148),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={errorMessage:null,about:null},a.onActionDone=a.onActionDone.bind(Object(l.a)(a)),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){k(E),g.a.pageview(window.location.pathname+window.location.search),null==this.state.about&&null==this.state.errorMessage&&this.doAbout()}},{key:"doAbout",value:function(){var e=this;K.about().then((function(t){e.setState({about:t})})).catch((function(t){e.setState({errorMessage:t})}))}},{key:"onActionDone",value:function(e){console.info("onActionDone",e),this.doAbout()}},{key:"render",value:function(){var e=this,t=[];return this.state.about&&this.state.about.roles&&(t=this.state.about.roles),r.a.createElement(ue.a,null,r.a.createElement(d,null),this.state.about?r.a.createElement(d,{version:this.state.about.version.api}):r.a.createElement(d,null),r.a.createElement("div",{className:"app"},this.state.errorMessage?r.a.createElement(h.a,{variant:"warning"},this.state.errorMessage):null,r.a.createElement("div",{className:"JMenu"},r.a.createElement(j,{roles:t})),r.a.createElement("div",{className:"JContent"},r.a.createElement(me.c,null,r.a.createElement(me.a,{exact:!0,path:"/",component:function(){return r.a.createElement(N,null)}}),r.a.createElement(me.a,{exact:!0,path:"/month",component:function(){return r.a.createElement(w,null)}}),r.a.createElement(me.a,{exact:!0,path:"/docs",component:function(){return r.a.createElement(G,{about:e.state.about})}}),t.includes("admin")?r.a.createElement(me.a,{exact:!0,path:"/contrib",component:function(){return r.a.createElement(oe,{about:e.state.about})}}):null,t.includes("owner")?r.a.createElement(me.a,{exact:!0,path:"/owner",component:function(){return r.a.createElement(W,{about:e.state.about,onActionDone:e.onActionDone})}}):null,r.a.createElement(me.a,{exact:!0,path:"/about",component:function(){return r.a.createElement(le,{about:e.state.about})}})))))}}]),n}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[128,1,2]]]);
//# sourceMappingURL=main.7ab2f587.chunk.js.map