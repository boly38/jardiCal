{"version":3,"sources":["core/JBetaCorner.js","core/JConstants.js","services/Tracking.js","core/JMenu.js","core/JHome.js","core/JMonth.js","common/JSearchEntries.js","common/JPeriod.js","docs/JDoc.js","docs/JDocChoice.js","services/ApiV0.js","docs/JDocs.js","admin/JAdmin.js","contrib/JContrib.js","contrib/JPeriodSelector.js","contrib/JMultiCreatable.js","contrib/JAddContrib.js","contrib/JContribChoice.js","contrib/JContribsList.js","contrib/JContribuer.js","core/JAbout.js","JApp.js","serviceWorker.js","index.js"],"names":["JBetaCorner","tooltip","this","props","version","className","Component","JConstants","ADMIN","MENU","ENTRIES","CONTRIB","initGA","trackingID","ReactGA","initialize","Event","category","action","label","event","JMenu","onMenuClic","bind","menuEntry","console","info","Navbar","bg","expand","Brand","as","NavLink","active","document","location","pathname","href","onClick","Toggle","aria-controls","Collapse","id","Nav","Link","startsWith","roles","includes","NavDropdown","alignRight","title","Item","Divider","target","JHome","JMonth","data","handleMonthsChange","log","board","fetch","then","res","json","forceUpdate","catch","months","bucket","ground","forEach","element","sowBucket","isBucket","elementBucket","push","name","sowGround","isGround","elementGround","ToggleButtonGroup","type","defaultValue","onChange","ToggleButton","value","JSearchEntries","searchInput","focus","searchLocked","Badge","variant","size","onUnlock","searchString","unSearch","style","cursor","Form","inline","onSubmit","onSearch","FormControl","key","placeholder","e","onSearchStringUpdated","ref","input","Button","JPeriod","v","disabled","JDoc","_handleKeyDown","keyCode","onUnselect","addEventListener","removeEventListener","Table","striped","bordered","hover","colSpan","doc","nom","semi","m","plantation","floraison","recolte","nom_scientifique","familles","join","JDocChoice","onSelect","map","docType","index","ApiV0","Promise","resolve","reject","response","_response","options","getQueryString","queryString","stringify","method","entryToAdd","headers","body","JSON","contribId","_jsonPost","consumeResponseBodyAs","ok","details","message","status","txt","jsonConsumer","txtConsumer","a","text","responseString","responseParsed","parse","debug","JDocs","state","docs","errorMessage","infoMessage","hasNext","bookmark","onUnSearch","onNext","onReload","about","_refocus","searchDocs","searchEntries","jd","setState","preventDefault","evt","lastDocId","length","_id","filter","getDocs","docsResults","newState","getErrorMessage","Alert","unLock","newSearchString","JAdmin","onAddSample","onRemoveDocuments","onRemoveContribs","admin","removeAllDocs","nbDeleted","actionDone","onActionDone","removeAllContribs","samples","nbSample","docName","docCount","contribName","contribCount","isOwner","isAdmin","dbName","documents","adminDbName","contributions","window","confirm","JContrib","onAccept","onReject","contribDoc","contrib","color","JPeriodSelector","enabled","selected","field","curSelection","isSelected","splice","indexOf","Error","month","Text","ButtonToolbar","aria-label","ButtonGroup","multiple","toggleOption","getVariantStyle","onDeactivate","onActivate","JMultiCreatable","selectedOptions","handleChange","newValue","actionMeta","flatValues","nw","maxIntValue","max","parseInt","slice","group","groupEnd","typeOptions","docTypes","dt","multiPlaceholder","isMulti","formatCreateLabel","inputValue","multiCreatable","JAddContrib","onCancelAdd","contribNom","myVar","Array","isArray","_isNotEmpty","undefined","contribute","addResult","onAdded","addErrorMessage","onCancel","addContribSchema","Yup","required","contribNomScientifique","validationSchema","handleAddSubmit","initialValues","handleSubmit","values","handleBlur","touched","errors","isValid","setFieldValue","noValidate","Group","controlId","Label","Control","isInvalid","Feedback","docFamilies","JContribChoice","substr","JContribsList","JContribuer","contribs","add","searchContribs","newEntry","jc","lastContribId","getContribs","contribsResults","_refreshTypes","_refreshFamilies","getTypes","typesResult","getFamilies","familiesResult","acceptContrib","err","acceptedContrib","rejectContrib","rejectedContrib","onContrib","JAbout","apiVersion","api","jlVersion","JApp","pageview","search","doAbout","aboutResults","actionMessage","exact","path","component","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.7ab2f587.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './JBetaCorner.css';\r\n\r\nclass JBetaCorner extends Component {\r\n  render() {\r\n    var tooltip = (this.props.version)?this.props.version:\"\";\r\n    return (\r\n  <div className=\"corner-ribbon bottom-right sticky blue shadow\">Alpha <sup>{tooltip}</sup></div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JBetaCorner;\r\n","export const JConstants = {\r\n  GOOGLE_ANALYTICS_CODE: \"UA-1988442-19\",\r\n  GG_CATEGORY: { ADMIN:\"ADMIN\", MENU:\"MENU\", ENTRIES:\"ENTRIES\", CONTRIB:\"CONTRIB\" }\r\n};","/**\r\n * credit: https://medium.com/@malith.dev/track-users-in-your-react-app-with-google-analytics-6364ebfcbae8\r\n */\r\nimport ReactGA from \"react-ga\";\r\n\r\nexport const initGA = (trackingID) => {\r\n   ReactGA.initialize(trackingID);\r\n}\r\n\r\nexport const PageView = () => {\r\n    ReactGA.pageview(window.location.pathname +\r\n                     window.location.search);\r\n}\r\n\r\n/**\r\n * Event - Add custom tracking event.\r\n * @param {string} category\r\n * @param {string} action\r\n * @param {string} label\r\n */\r\nexport const Event = (category, action, label) => {\r\n  ReactGA.event({\r\n    category: category,\r\n    action: action,\r\n    label: label\r\n  });\r\n};","import React, { Component } from 'react'\r\nimport './JMenu.css';\r\nimport { Navbar, Nav, NavLink, NavDropdown } from 'react-bootstrap';\r\nimport {JConstants} from './JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\nimport { GiFlowerPot } from 'react-icons/gi';\r\n\r\nclass JMenu extends Component {\r\n  constructor(props) {\r\n      super(props);\r\n      this.onMenuClic = this.onMenuClic.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n  }\r\n\r\n  onMenuClic(menuEntry) {\r\n    console.info(\"onMenuClic\", menuEntry)\r\n    Event(JConstants.GG_CATEGORY.MENU, menuEntry, \"Menu clic on \" + menuEntry)\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <Navbar bg=\"light\" expand=\"lg\">\r\n        <Navbar.Brand as={NavLink}\r\n                      active={(document.location.pathname === '/')}\r\n                      href=\"/\"\r\n                      onClick={this.onMenuClic.bind(this, 'logo')}><GiFlowerPot/> JardiCal</Navbar.Brand>\r\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n        <Navbar.Collapse id=\"basic-navbar-nav\">\r\n          <Nav className=\"mr-auto\">\r\n            <Nav.Link as={NavLink}\r\n                      active={document.location.pathname.startsWith('/docs')}\r\n                      href=\"/docs\"\r\n                      onClick={this.onMenuClic.bind(this, 'entrées')}\r\n                      >Entrées</Nav.Link>\r\n            {/* <Nav.Link href=\"/month\">Par mois</Nav.Link> */}\r\n        { this.props.roles && this.props.roles.includes('admin') ?\r\n          ( <Nav.Link as={NavLink}\r\n                      active={document.location.pathname.startsWith('/contrib')}\r\n                      href=\"/contrib\"\r\n                      onClick={this.onMenuClic.bind(this, 'contrib')}\r\n                      >Contribuer</Nav.Link> )\r\n          : ( null)\r\n        }\r\n        { this.props.roles && this.props.roles.includes('owner') ?\r\n          ( <Nav.Link as={NavLink}\r\n                      active={document.location.pathname.startsWith('/owner')}\r\n                      href=\"/owner\"\r\n                      onClick={this.onMenuClic.bind(this, 'admin')}\r\n                      >Admin</Nav.Link> )\r\n          : ( null)\r\n        }\r\n          </Nav>\r\n          <Nav>\r\n            <NavDropdown alignRight title=\"Aide\" id=\"collasible-nav-dropdown\">\r\n              <NavDropdown.Item href=\"/about\" onClick={this.onMenuClic.bind(this, 'about')}>À propos</NavDropdown.Item>\r\n              <NavDropdown.Divider />\r\n              <NavDropdown.Item href=\"https://github.com/boly38/jardiCal\" target=\"_dep\">Github - source</NavDropdown.Item>\r\n            </NavDropdown>\r\n          </Nav>\r\n        </Navbar.Collapse>\r\n      </Navbar>\r\n\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default JMenu;\r\n/*\r\n            <div>\r\n              <ul className=\"jmenu\">\r\n                  <li><NavLink activeClassName={\"active\"} exact={true}  to=\"/\">Home</NavLink></li>\r\n                  <li><NavLink activeClassName={\"active\"} to=\"/month\">Par mois</NavLink></li>\r\n                </ul>\r\n            </div>\r\n*/","import React, { Component } from 'react'\r\n\r\nclass JHome extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"jhome\">\r\n        <h1>JardiCal</h1>\r\n        <p>\r\n        Retrouvez quand planter quoi, et quand récolter !\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JHome;","import React, { Component } from 'react'\r\nimport { ToggleButtonGroup, ToggleButton} from 'react-bootstrap';\r\n\r\nclass JMonth extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.data = \"\";\r\n\r\n    this.handleMonthsChange = this.handleMonthsChange.bind(this);\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    if (this.data !== \"\") {\r\n      return;\r\n    }\r\n    console.log(\"fetch json\");\r\n      var board = this;\r\n      fetch('/garden.json')\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n              board.data = data;\r\n              console.log(\"data\", data);\r\n              this.forceUpdate();\r\n            })\r\n            .catch(console.log)\r\n  }\r\n\r\n\r\n  handleMonthsChange(months) {\r\n    console.log('handleMonthsChange', months);\r\n    this.bucket = [];\r\n    this.ground = [];\r\n    this.data.forEach(element => {\r\n      if (element.sowBucket) {\r\n        var isBucket = false;\r\n        element.sowBucket.forEach(elementBucket => {\r\n            if (months.includes(elementBucket)) {\r\n                isBucket = true;\r\n            }\r\n        })\r\n        if (isBucket) {\r\n            this.bucket.push(element.name);\r\n        }\r\n      }\r\n      if (element.sowGround) {\r\n        var isGround = false;\r\n        element.sowGround.forEach(elementGround => {\r\n            if (months.includes(elementGround)) {\r\n                isGround = true;\r\n            }\r\n        })\r\n        if (isGround) {\r\n            this.ground.push(element.name);\r\n        }\r\n      }\r\n    });\r\n    this.forceUpdate();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"jmonth\">\r\n       <div className=\"selectMonth\">\r\n        <h1>Par mois</h1>\r\n        <p>\r\n        Choisissez un ou plusieurs mois\r\n        </p>\r\n          <ToggleButtonGroup type=\"checkbox\" defaultValue={[]}\r\n            className=\"mb-2\"\r\n            onChange={this.handleMonthsChange}>\r\n            <ToggleButton value={1}>Janvier</ToggleButton>\r\n            <ToggleButton value={2}>Février</ToggleButton>\r\n            <ToggleButton value={3}>Mars</ToggleButton>\r\n            <ToggleButton value={4}>Avril</ToggleButton>\r\n            <ToggleButton value={5}>Mai</ToggleButton>\r\n            <ToggleButton value={6}>Juin</ToggleButton>\r\n            <ToggleButton value={7}>Juillet</ToggleButton>\r\n            <ToggleButton value={8}>Août</ToggleButton>\r\n            <ToggleButton value={9}>Septembre</ToggleButton>\r\n            <ToggleButton value={10}>Octobre</ToggleButton>\r\n            <ToggleButton value={11}>Novembre</ToggleButton>\r\n            <ToggleButton value={12}>Décembre</ToggleButton>\r\n          </ToggleButtonGroup>\r\n       </div>\r\n       <div className=\"showMonth\">\r\n           Semis en godets : { this.bucket }<br/>\r\n           Semis en pleine terre : { this.ground }<br/>\r\n       </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JMonth;","import React, { Component } from 'react'\r\nimport { Badge } from 'react-bootstrap';\r\nimport { Form, FormControl, Button} from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare } from 'react-icons/ai';\r\n\r\nclass JSearchEntries extends Component {\r\n\r\n  focus() {\r\n    if (this.searchInput) {\r\n      this.searchInput.focus();\r\n    }\r\n  }\r\n\r\n  render() {\r\n      return this.props.searchLocked ? (\r\n                <div className=\"mb-3\">\r\n                 <Badge variant=\"secondary\" size=\"sm mr-2 mt-2\"\r\n                    onClick={this.props.onUnlock}>search : {this.props.searchString}</Badge>\r\n                 &#160;\r\n                 <AiOutlineCloseSquare\r\n                             onClick={this.props.unSearch}\r\n                             style={{cursor: 'pointer'}}\r\n                             title=\"Annuler la recherche (raccourci: Escape)\"/>\r\n                </div>\r\n      ) : (\r\n                <Form inline className=\"mb-3\" onSubmit={this.props.onSearch}>\r\n                    <FormControl key=\"entriesSearch\"\r\n                                 type=\"text\"\r\n                                 placeholder=\"Recherche par nom\"\r\n                                 value={this.props.searchString}\r\n                                 className=\"mr-sm-2\"\r\n                                 onChange={e => this.props.onSearchStringUpdated(e.target.value)}\r\n                                 size=\"sm\"\r\n                                 ref={(input) => { this.searchInput = input; }}\r\n                    />\r\n                    <Button key=\"entriesSearchButton\"\r\n                            variant=\"outline-success\"\r\n                            onClick={this.props.onSearch}\r\n                            title=\"Lancer la recherche (raccourci: Enter)\"\r\n                            size=\"sm\"\r\n                            >Rechercher</Button>\r\n                </Form>\r\n      );\r\n  }\r\n}\r\n\r\nexport default JSearchEntries;","import React, { Component } from 'react'\r\nimport { Button} from 'react-bootstrap';\r\n\r\nclass JPeriod extends Component {\r\n  render() {\r\n    var v = this.props.value;\r\n    return (<div>\r\n      <Button variant={ v.includes(1) ? 'primary':'secondary' } size=\"sm\" disabled>jan.</Button>\r\n      <Button variant={ v.includes(2) ? 'primary':'secondary' } size=\"sm\" disabled>fév.</Button>\r\n      <Button variant={ v.includes(3) ? 'primary':'secondary' } size=\"sm\" disabled>mars</Button>\r\n      <Button variant={ v.includes(4) ? 'primary':'secondary' } size=\"sm\" disabled>avril</Button>\r\n      <Button variant={ v.includes(5) ? 'primary':'secondary' } size=\"sm\" disabled>mai</Button>\r\n      <Button variant={ v.includes(6) ? 'primary':'secondary' } size=\"sm\" disabled>juin</Button>\r\n      <Button variant={ v.includes(7) ? 'primary':'secondary' } size=\"sm\" disabled>juil.</Button>\r\n      <Button variant={ v.includes(8) ? 'primary':'secondary' } size=\"sm\" disabled>août</Button>\r\n      <Button variant={ v.includes(9) ? 'primary':'secondary' } size=\"sm\" disabled>sep.</Button>\r\n      <Button variant={ v.includes(10) ? 'primary':'secondary' } size=\"sm\" disabled>oct.</Button>\r\n      <Button variant={ v.includes(11) ? 'primary':'secondary' } size=\"sm\" disabled>nov.</Button>\r\n      <Button variant={ v.includes(12) ? 'primary':'secondary' } size=\"sm\" disabled>déc.</Button>\r\n    </div>)\r\n  }\r\n}\r\n\r\nexport default JPeriod;","import React, { Component } from 'react'\r\nimport { Badge, Table} from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare } from 'react-icons/ai';\r\nimport './JDoc.css';\r\nimport JPeriod from '../common/JPeriod';\r\n\r\nconst ESCAPE_KEY = 27;\r\n\r\nclass JDoc extends Component {\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY:\r\n              this.onUnselect();\r\n              break;\r\n          default:\r\n              break;\r\n      }\r\n  }\r\n\r\n  onUnselect() {\r\n    this.props.onUnselect();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"doc-selected\" >\r\n        <Table striped bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <th colSpan=\"2\">\r\n                  <span className=\"entryName\">{this.props.doc.nom}</span>\r\n                  <Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                       style={{cursor: 'pointer'}}\r\n                       onClick={this.onUnselect.bind(this)}\r\n                       title=\"Fermer (raccourci: Escape)\">\r\n                    Fermer <AiOutlineCloseSquare />\r\n                  </Badge>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            { this.props.doc.semi && this.props.doc.semi.m ? (\r\n            <tr>\r\n              <td>Semi</td>\r\n              <td><JPeriod name=\"semi\" value={this.props.doc.semi.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { this.props.doc.plantation && this.props.doc.plantation.m ? (\r\n            <tr>\r\n              <td>Plantation</td>\r\n              <td><JPeriod name=\"plantation\" value={this.props.doc.plantation.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { this.props.doc.floraison && this.props.doc.floraison.m ? (\r\n            <tr>\r\n              <td>Floraison</td>\r\n              <td><JPeriod name=\"floraison\" value={this.props.doc.floraison.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { this.props.doc.recolte && this.props.doc.recolte.m ? (\r\n            <tr>\r\n              <td>Récolte</td>\r\n              <td><JPeriod name=\"recolte\" value={this.props.doc.recolte.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            <tr>\r\n              <td>Nom scientifique</td>\r\n              <td>{this.props.doc.nom_scientifique}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Famille</td>\r\n              <td>{this.props.doc.familles.join(' - ')}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Type</td>\r\n              <td>{this.props.doc.type.join(' - ')}</td>\r\n            </tr>\r\n          </tbody>\r\n        </Table>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JDoc;","import React, { Component } from 'react'\r\nimport { Badge } from 'react-bootstrap';\r\nimport { GiFireFlower, GiPear, GiCarrot, GiHighGrass } from 'react-icons/gi'; // https://react-icons.github.io/react-icons/icons?name=gi\r\n\r\nclass JDocChoice extends Component {\r\n\r\n  onSelect(doc) {\r\n    this.props.onSelect(doc);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"doc-choice\" >\r\n        {/*\r\n        <Button variant=\"secondary\" size=\"sm\">\r\n          {this.props.index} - {this.props.doc.nom} - ({this.props.doc.type})\r\n        </Button>\r\n\r\n        badge doc: https://react-bootstrap.github.io/components/badge/#badge-props\r\n        */}\r\n        <Badge variant=\"success\" size=\"sm mr-2 mt-2\"\r\n               style={{cursor: 'pointer'}}\r\n               title={this.props.doc.type}\r\n               onClick={this.onSelect.bind(this, this.props.doc)}>\r\n          {this.props.doc.nom}\r\n          &#160;\r\n          { this.props.doc.type.map( (docType, index) => {\r\n              if (docType === \"fleur\") {\r\n                return ( <GiFireFlower key={index} />)\r\n              }\r\n              if (docType === \"fruit\") {\r\n                return ( <GiPear key={index} />)\r\n              }\r\n              if (docType === \"légume\") {\r\n                return ( <GiCarrot key={index} />)\r\n              }\r\n              return ( <GiHighGrass key={index} />)\r\n            }) }\r\n        </Badge>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JDocChoice;\r\n//onClick={(e) => this.props.onChoice(this.props.index, e)}","import queryString from 'query-string';\r\n\r\nclass ApiV0 {\r\n  static debug = false;\r\n\r\n  static about() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch('/api/v0/about')\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static getDocs(options) {\r\n    return new Promise((resolve, reject) => {\r\n      const getQueryString = queryString.stringify(options);\r\n      fetch(`/api/v0/docs?${getQueryString}`)\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static getContribs(options) {\r\n    return new Promise((resolve, reject) => {\r\n      const getQueryString = queryString.stringify(options);\r\n      fetch(`/api/v0/contributions?${getQueryString}`)\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static samples() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch('/api/v0/docs/samples', { method: 'POST' })\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static contribute(entryToAdd) {\r\n    return new Promise((resolve, reject) => {\r\n      fetch('/api/v0/contributions',\r\n        { method: 'POST',\r\n          headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(entryToAdd) })\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));;\r\n    });\r\n  }\r\n\r\n  static removeAllDocs() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`/api/v0/docs`, { method: 'DELETE' })\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));;\r\n    });\r\n  }\r\n\r\n  static removeAllContribs() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`/api/v0/contributions`, { method: 'DELETE' })\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static acceptContrib(contribId) {\r\n    return new Promise((resolve, reject) => {\r\n      fetch('/api/v0/contributions/' + contribId + '/accept', ApiV0._jsonPost())\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static rejectContrib(contribId) {\r\n    return new Promise((resolve, reject) => {\r\n      fetch('/api/v0/contributions/' + contribId + '/reject', ApiV0._jsonPost())\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static getTypes() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`/api/v0/types`)\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n  static getFamilies() {\r\n    return new Promise((resolve, reject) => {\r\n      fetch(`/api/v0/families`)\r\n      .catch(reject)\r\n      .then(response => ApiV0._response(response, resolve, reject));\r\n    });\r\n  }\r\n\r\n  static _jsonPost() {\r\n    return { method: 'POST', headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' } };\r\n  }\r\n\r\n  static _response(response, resolve, reject) {\r\n    ApiV0.consumeResponseBodyAs(response,\r\n      (json) => {\r\n        if (!response.ok) {\r\n          reject((json && json.details) || (json && json.message) || response.status);\r\n        } else {\r\n          resolve(json);\r\n        }\r\n      },\r\n      (txt) => {\r\n        if (!response.ok) {\r\n          reject(txt);\r\n        } else {\r\n          resolve(txt);// some strange case\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  static consumeResponseBodyAs(response, jsonConsumer, txtConsumer) {\r\n    (async () => {\r\n      var responseString = await response.text();\r\n      try{\r\n        if (responseString && typeof responseString === \"string\"){\r\n         var responseParsed = JSON.parse(responseString);\r\n         if (ApiV0.debug) {\r\n            console.log(\"RESPONSE(Json)\", responseParsed);\r\n         }\r\n         return jsonConsumer(responseParsed);\r\n        }\r\n      } catch(error) {\r\n        // text is not a valid json so we will consume as text\r\n      }\r\n      if (ApiV0.debug) {\r\n        console.log(\"RESPONSE(Txt)\", responseString);\r\n      }\r\n      return txtConsumer(responseString);\r\n    })();\r\n  }\r\n}\r\n\r\nexport default ApiV0;","import React, { Component } from 'react'\r\nimport './JDocs.css';\r\nimport { Alert, Badge } from 'react-bootstrap';\r\nimport JSearchEntries from '../common/JSearchEntries';\r\nimport JDoc from './JDoc';\r\nimport JDocChoice from './JDocChoice';\r\nimport ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\n\r\nconst ESCAPE_KEY = 27;\r\nconst UP_ARROW = 38;\r\nconst RIGHT_ARROW = 39;\r\n\r\nclass JDocs extends Component {\r\n  state = {\r\n      docs: null,\r\n      errorMessage: null,\r\n      infoMessage: null,\r\n      hasNext: true,\r\n      searchString: '',\r\n      bookmark: '',\r\n      searchLocked: false // toogle search form\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.about) {\r\n      return;\r\n    }\r\n    // DEBUG // console.info('componentDidMount')\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n    this._refocus();\r\n    this.searchDocs();\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (!this.props.about) {\r\n      return;\r\n    }\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY:\r\n              this.onUnSearch();\r\n              break;\r\n          case RIGHT_ARROW:\r\n              this.onNext();\r\n              break;\r\n          case UP_ARROW:\r\n              this.onReload();\r\n              break;\r\n          default:\r\n              break;\r\n      }\r\n  }\r\n\r\n  _refocus() {\r\n    if (this.searchEntries) {\r\n          this.searchEntries.focus();\r\n    }\r\n  }\r\n\r\n  onReload() {\r\n    var jd = this;\r\n    this.setState({searchString:'',bookmark:'', searchLocked: false}, () => jd.searchDocs())\r\n  }\r\n\r\n  onSearch(e) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n    var jd = this;\r\n    var evt = \"search \" + this.state.searchString;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({searchString:this.state.searchString,bookmark:'',searchLocked:true}, () => jd.searchDocs());\r\n  }\r\n\r\n  onNext() {\r\n    var jd = this;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, \"list next\", \"list next\")\r\n    var lastDocId = this.state.docs[this.state.docs.length-1]._id;\r\n    this.setState({bookmark:lastDocId,searchLocked: false}, () => jd.searchDocs());\r\n  }\r\n\r\n  onSelect(doc) {\r\n    var evt = \"select \" + doc.nom;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({doc})\r\n  }\r\n\r\n  onUnselect() {\r\n    var jd = this;\r\n    var evt = \"unselect\" + this.state.doc.nom;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({doc:null}, () => jd.searchDocs())\r\n  }\r\n\r\n  onUnlock() {\r\n    this.setState({searchLocked: false}, () => this._refocus());\r\n  }\r\n\r\n  onUnSearch() {\r\n    this.onReload();\r\n  }\r\n\r\n  searchDocs() {\r\n    var bookmark = this.state.bookmark;\r\n    var searchString = this.state.searchString;\r\n    var filter = {\"limit\":5, };\r\n    if (bookmark && bookmark !== '') {\r\n      filter.bookmark = bookmark;\r\n    }\r\n    if (searchString && searchString !== '') {\r\n      filter.nom = searchString;\r\n    }\r\n    // DEBUG // console.info(\"searchDocs\", filter);\r\n    ApiV0.getDocs(filter)\r\n      .then((docsResults) => {\r\n        if (docsResults.length) {\r\n          this.setState({ docs: docsResults, errorMessage: null, infoMessage: null, hasNext: true },\r\n            () => this._refocus());\r\n        } else {\r\n          var newState = {hasNext: false};\r\n          if (bookmark == null || bookmark === '') {\r\n            newState.infoMessage = \"aucun résultat\";\r\n            newState.docs = null;\r\n          }\r\n          this.setState(newState, () => this._refocus())\r\n        }\r\n      })\r\n      .catch((getErrorMessage) => { this.setState({errorMessage: getErrorMessage}, () => this._refocus()); });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.errorMessage) {\r\n      console.log(this.state.errorMessage);\r\n    }\r\n    if (!this.props.about) {\r\n      return (null);\r\n    }\r\n    return (\r\n      <div className=\"jdocs\">\r\n\r\n        { this.state.errorMessage ? (<Alert variant=\"warning\">{this.state.errorMessage}</Alert>) : (null) }\r\n        <div className=\"infoBox\">{this.state.infoMessage}&#160;</div>\r\n        { this.state.doc ?\r\n                  (<div> <JDoc doc={this.state.doc} onUnselect={this.onUnselect.bind(this)} /> </div> ) :\r\n                  (\r\n                  <div className=\"docsList\">\r\n                      <p>Entrées liées au jardin</p>\r\n                      <JSearchEntries searchLocked={this.state.searchLocked}\r\n                                      searchString={this.state.searchString}\r\n                                      unLock={this.onUnlock.bind(this)}\r\n                                      unSearch={this.onUnSearch.bind(this)}\r\n                                      onSearchStringUpdated={(newSearchString) => this.setState({ searchString:newSearchString})}\r\n                                      onSearch={this.onSearch.bind(this)}\r\n                                      ref={(input) => { this.searchEntries = input; }}/>\r\n\r\n                      { this.state.docs && this.state.docs.length ?\r\n                        ( <div>\r\n                          { this.state.docs.map( (doc, index) => { return(\r\n                               <JDocChoice key={index} index={index} doc={doc} onSelect={this.onSelect.bind(this)} />)\r\n                          }) }\r\n                          </div>\r\n                        ) :\r\n                        ( null )\r\n                      }\r\n                      { this.state.hasNext ?\r\n                          (<div><Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                                  style={{cursor: 'pointer'}}\r\n                                  onClick={this.onNext.bind(this)}\r\n                                  title=\"Suivant (raccourci: <Flèche droite>)\"\r\n                                  >...</Badge></div>) :\r\n                          (<div><Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                                  style={{cursor: 'pointer'}}\r\n                                  onClick={this.onReload.bind(this)}\r\n                                  title=\"Raccourci (raccourci: <Flèche du haut>)\"\r\n                                  >Recharger</Badge></div>)\r\n                       }\r\n                  </div>\r\n                  )\r\n                }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JDocs;","import React, { Component } from 'react'\r\nimport { Alert, Button, Table} from 'react-bootstrap';\r\nimport ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\n\r\nclass JAdmin extends Component {\r\n  state = {\r\n      docs: null,\r\n      errorMessage: null,\r\n      infoMessage: null,\r\n  }\r\n\r\n  constructor(props) {\r\n      super(props);\r\n      this.onAddSample = this.onAddSample.bind(this);\r\n      this.onRemoveDocuments = this.onRemoveDocuments.bind(this);\r\n      this.onRemoveContribs = this.onRemoveContribs.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n  }\r\n\r\n  onRemoveDocuments() {\r\n      var admin = this;\r\n      ApiV0.removeAllDocs()\r\n      .then((nbDeleted) => {\r\n        var actionDone = nbDeleted + \" échantillon(s) supprimé(s)\";\r\n        Event(JConstants.GG_CATEGORY.ADMIN, \"removeAllDocs\", actionDone)\r\n        admin.props.onActionDone(actionDone);\r\n      })\r\n      .catch((getErrorMessage) => {\r\n        this.setState({errorMessage: getErrorMessage})\r\n      });\r\n  }\r\n\r\n  onRemoveContribs() {\r\n      var admin = this;\r\n      ApiV0.removeAllContribs()\r\n      .then((nbDeleted) => {\r\n        var actionDone = nbDeleted + \" contribution(s) supprimé(s)\";\r\n        Event(JConstants.GG_CATEGORY.ADMIN, \"removeAllContribs\", actionDone)\r\n        admin.props.onActionDone(actionDone);\r\n      })\r\n      .catch((getErrorMessage) => {\r\n        this.setState({errorMessage: getErrorMessage})\r\n      });\r\n  }\r\n\r\n  onAddSample() {\r\n      var admin = this;\r\n      ApiV0.samples()\r\n        .then((nbSample) => {\r\n          // DEBUG// console.info(\"samplesResult\",nbSample);\r\n          var actionDone = nbSample + \" échantillons en base\";\r\n          Event(JConstants.GG_CATEGORY.ADMIN, \"samples\", actionDone)\r\n          admin.props.onActionDone(actionDone);\r\n        })\r\n        .catch((getErrorMessage) => { this.setState({errorMessage: getErrorMessage}); } );\r\n  }\r\n\r\n  render() {\r\n    var docName = null;\r\n    var docCount = null;\r\n    var contribName = null;\r\n    var contribCount = null;\r\n    var isOwner = this.props.about && this.props.about.roles.includes('owner');\r\n    var isAdmin = this.props.about && this.props.about.roles.includes('admin');\r\n    if (this.props.about) {\r\n      docName = this.props.about.dbName\r\n      docCount = this.props.about.documents\r\n      contribName = this.props.about.adminDbName\r\n      contribCount = this.props.about.contributions\r\n    }\r\n    return (\r\n      <div className=\"jadmin\">\r\n        { this.state.errorMessage ?\r\n            ( <Alert variant=\"warning\">\r\n                {this.state.errorMessage}\r\n              </Alert> )\r\n            : ( null)\r\n        }\r\n        { this.state.infoMessage ?\r\n            ( <Alert variant=\"info\">\r\n                {this.state.infoMessage}\r\n              </Alert> )\r\n            : ( null)\r\n        }\r\n        <div className=\"adminContent\">\r\n        <h1>Configuration</h1>\r\n        <Table striped bordered hover size=\"sm\">\r\n          <thead>\r\n            <tr>\r\n              <th>Base</th>\r\n              <th>Nom</th>\r\n              <th>Nombre d&apos;entrées</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td>Utilisateur</td>\r\n              <td>{docName}</td>\r\n              <td>{docCount}</td>\r\n              <td>\r\n                { isOwner ? ( <Button variant=\"secondary\" size=\"sm\" className=\"mr-2\"\r\n                                      onClick={this.onAddSample.bind(this)}\r\n                                      >Ajout d&apos;un échantillon</Button> ) : (null) }\r\n                { isOwner && docCount > 0 ? (<Button variant=\"secondary\" size=\"sm\"\r\n                                      onClick={() => { if (window.confirm('Êtes-vous sûr de vouloir supprimer les documents ?')) this.onRemoveDocuments() } }\r\n                                      >Supprimer</Button> ) : (null) }\r\n              </td>\r\n            </tr>\r\n            { contribName ?\r\n            (<tr>\r\n              <td>Contribution</td>\r\n              <td>{contribName}</td>\r\n              <td>{contribCount}</td>\r\n              <td>\r\n                { isAdmin && contribCount > 0 ? (<Button variant=\"secondary\" size=\"sm\"\r\n                                      onClick={() => { if (window.confirm('Êtes-vous sûr de vouloir supprimer les contributions ?')) this.onRemoveContribs() } }\r\n                                      >Supprimer</Button> ) : (null) }\r\n              </td>\r\n            </tr>) : (null)\r\n            }\r\n          </tbody>\r\n        </Table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JAdmin;","import React, { Component } from 'react'\r\nimport { Badge, Button, Table} from 'react-bootstrap';\r\nimport { AiOutlineClose, AiOutlineCloseSquare, AiOutlineCheck } from 'react-icons/ai';\r\nimport JPeriod from '../common/JPeriod';\r\n\r\nconst ESCAPE_KEY = 27;\r\n\r\nclass JContrib extends Component {\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY:\r\n              this.onUnselect();\r\n              break;\r\n          default:\r\n              break;\r\n      }\r\n  }\r\n\r\n  onUnselect() {\r\n    this.props.onUnselect();\r\n  }\r\n\r\n  onAccept() {\r\n    this.props.onAccept();\r\n  }\r\n\r\n  onReject() {\r\n    this.props.onReject();\r\n  }\r\n\r\n  render() {\r\n    var contribDoc = this.props.contrib && this.props.contrib.doc ? this.props.contrib.doc : {};\r\n    return (\r\n      <div className=\"doc-selected\" >\r\n        <Table striped bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <th colSpan=\"2\">\r\n                  <span className=\"entryName\"><span style={{color:\"grey\"}}>Contribution - </span>{this.props.contrib.doc.nom}</span>\r\n                  <Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                       style={{cursor: 'pointer'}}\r\n                       onClick={this.onUnselect.bind(this)}\r\n                       title=\"Fermer (raccourci: Escape)\">\r\n                    Fermer <AiOutlineCloseSquare />\r\n                  </Badge>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            { contribDoc.semi && contribDoc.semi.m ? (\r\n            <tr>\r\n              <td>Semi</td>\r\n              <td><JPeriod name=\"semi\" value={contribDoc.semi.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { contribDoc.plantation && contribDoc.plantation.m ? (\r\n            <tr>\r\n              <td>Plantation</td>\r\n              <td><JPeriod name=\"plantation\" value={contribDoc.plantation.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { contribDoc.floraison && contribDoc.floraison.m ? (\r\n            <tr>\r\n              <td>Floraison</td>\r\n              <td><JPeriod name=\"floraison\" value={contribDoc.floraison.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            { contribDoc.recolte && contribDoc.recolte.m ? (\r\n            <tr>\r\n              <td>Récolte</td>\r\n              <td><JPeriod name=\"recolte\" value={contribDoc.recolte.m}/></td>\r\n            </tr>\r\n            ) : (null) }\r\n            <tr>\r\n              <td>Nom scientifique</td>\r\n              <td>{contribDoc.nom_scientifique}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Famille</td>\r\n              <td>{contribDoc.familles.join(' - ')}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Type</td>\r\n              <td>{contribDoc.type.join(' - ')}</td>\r\n            </tr>\r\n          </tbody>\r\n        </Table>\r\n        <Button variant=\"success\" size=\"sm\" className=\"mr-2\"\r\n                onClick={this.onAccept.bind(this)}\r\n                >Accepter <AiOutlineCheck /></Button>\r\n        <Button variant=\"secondary\" size=\"sm\" className=\"mr-2\"\r\n                onClick={this.onReject.bind(this)}\r\n                >Refuser <AiOutlineClose /></Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JContrib;","import React, { Component } from 'react'\r\nimport {  Button, ButtonToolbar, ButtonGroup, Nav, Navbar } from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare, AiOutlineCheck } from 'react-icons/ai';\r\n\r\nclass JPeriodSelector extends Component {\r\n  state = {\r\n      enabled: false,\r\n      selected: []\r\n  }\r\n\r\n  onActivate() {\r\n    this.setState({enabled:true});\r\n  }\r\n\r\n  onDeactivate() {\r\n    this.setState({selected: [], enabled:false}, () => this.props.onChange(this.props.field, []) );\r\n  }\r\n\r\n  toggleOption(e) {\r\n    const key = e.target.value; // e.g. '1'\r\n    var curSelection = this.state.selected;\r\n    if (this.isSelected(key)) {\r\n      curSelection.splice(curSelection.indexOf(key), 1);\r\n    } else {\r\n      curSelection.push(key);\r\n    }\r\n    this.setState({ selected: curSelection }, () => {\r\n      if (!this.props.onChange) {\r\n        throw new Error(\"JPeriodSelector need onChange(field, value) handler as property\");\r\n      }\r\n      // DEBUG // console.info(\"onChange(\",this.props.field,curSelection,\")\")\r\n      this.props.onChange(this.props.field, curSelection);\r\n    });\r\n  }\r\n\r\n  isSelected(month) {\r\n    return this.state.selected && this.state.selected.includes(month)\r\n  }\r\n\r\n  getVariantStyle(key) {\r\n   return this.isSelected(key) ? 'primary' : 'default';\r\n  }\r\n\r\n  render() {\r\n    return this.state.enabled ? (\r\n  <Navbar bg=\"light\" variant=\"light\">\r\n    <Nav className=\"mr-auto\">\r\n      <Navbar.Text className=\"mr-2\">Mois</Navbar.Text>\r\n      <ButtonToolbar aria-label=\"Choix des mois de la période\">\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Hiver\" multiple>\r\n          <Button onClick={this.toggleOption.bind(this)} value='1' variant={this.getVariantStyle('1')}>1</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='2' variant={this.getVariantStyle('2')}>2</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='3' variant={this.getVariantStyle('3')}>3</Button>\r\n        </ButtonGroup>\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Printemps\">\r\n          <Button onClick={this.toggleOption.bind(this)} value='4' variant={this.getVariantStyle('4')}>4</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='5' variant={this.getVariantStyle('5')}>5</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='6' variant={this.getVariantStyle('6')}>6</Button>\r\n        </ButtonGroup>\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Été\">\r\n          <Button onClick={this.toggleOption.bind(this)} value='7' variant={this.getVariantStyle('7')}>7</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='8' variant={this.getVariantStyle('8')}>8</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='9' variant={this.getVariantStyle('9')}>9</Button>\r\n        </ButtonGroup>\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Automne\">\r\n          <Button onClick={this.toggleOption.bind(this)} value='10' variant={this.getVariantStyle('10')}>10</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='11' variant={this.getVariantStyle('11')}>11</Button>\r\n          <Button onClick={this.toggleOption.bind(this)} value='12' variant={this.getVariantStyle('12')}>12</Button>\r\n        </ButtonGroup>\r\n        <Navbar.Text className=\"ml-2\">Période de {this.props.name}</Navbar.Text>\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Actions\">\r\n          <Button onClick={this.onDeactivate.bind(this)} variant='secondary'\r\n                  size=\"sm\" className=\"ml-2\">Désactiver <AiOutlineCloseSquare /></Button>\r\n        </ButtonGroup>\r\n      </ButtonToolbar>\r\n    </Nav>\r\n  </Navbar>\r\n\r\n    ) : (\r\n  <Navbar bg=\"light\" variant=\"light\">\r\n    <Nav>\r\n      <ButtonToolbar aria-label=\"Choix des mois de la période\">\r\n        <ButtonGroup className=\"mr-2\" aria-label=\"Actions\">\r\n          <Button onClick={this.onActivate.bind(this)} variant='info'\r\n                  size=\"sm\" className=\"ml-2\">Ajouter une période de {this.props.name}<AiOutlineCheck className=\"ml-2\"/></Button>\r\n        </ButtonGroup>\r\n      </ButtonToolbar>\r\n    </Nav>\r\n  </Navbar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JPeriodSelector;","import React, { Component } from 'react'\r\nimport CreatableSelect from 'react-select/creatable';\r\nimport { Alert } from 'react-bootstrap';\r\n\r\nclass JMultiCreatable extends Component {\r\n  state = {\r\n      selected: [],\r\n      errorMessage: '',\r\n      selectedOptions : []\r\n  }\r\n\r\n  handleChange = (newValue: any, actionMeta: any) => {\r\n    var flatValues = newValue ? newValue.map(nw => nw.value) : [];\r\n    var maxIntValue = this.props.max ? parseInt(this.props.max, 10) : 10;\r\n    if (flatValues.length > maxIntValue) {\r\n      this.setState({errorMessage: 'maximum ' + this.props.max + ' entrées !',\r\n                     selectedOptions:newValue.slice(0, maxIntValue)});\r\n      return;\r\n    }\r\n    console.group('Value Changed');\r\n    console.log(newValue, actionMeta);\r\n    console.log(`action: ${actionMeta.action}`);\r\n    console.info(\"onChange(\",this.props.field,flatValues,\")\")\r\n    console.groupEnd();\r\n    this.setState({selectedOptions:newValue, errorMessage:''}, () => this.props.onChange(this.props.field, flatValues) );\r\n  };\r\n\r\n  render() {\r\n    var typeOptions = this.props.docTypes ? this.props.docTypes.map(dt => { return {'value':dt, 'label': dt}; }) : [];\r\n     /* [{ value: 'chocolate', label: 'Chocolate' }] */\r\n     /*\r\n     MenuPlacer Warnings => https://github.com/JedWatson/react-select/issues/3703\r\n     fix merged on 27 aug => wait next release (last release 3.1.0 on 22 March dont include the fix)\r\n     */\r\n    var multiPlaceholder = 'Choisir ' + this.props.max ? '(maximum ' + this.props.max + ' choix)' : '';\r\n    var multiCreateLabel = (inputValue) => { return 'Créer \\'' + inputValue+ '\\'';}\r\n    return (\r\n      <div>\r\n        { this.state.errorMessage ? ( <Alert variant=\"warning\">{this.state.errorMessage}</Alert> ) : ( null) }\r\n        <CreatableSelect\r\n          isMulti\r\n          name={ this.props.name }\r\n          onChange={ this.handleChange }\r\n          options={typeOptions}\r\n          value={ this.state.selectedOptions }\r\n          placeholder={ multiPlaceholder}\r\n          formatCreateLabel={ multiCreateLabel }\r\n          ref={(input) => { this.multiCreatable = input; }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JMultiCreatable;","import React, { Component } from 'react'\r\nimport { Alert, Button, Form } from 'react-bootstrap';\r\nimport { AiOutlineCloseSquare, AiOutlineCheck } from 'react-icons/ai';\r\nimport {initGA, Event} from '../services/Tracking';\r\nimport ApiV0 from '../services/ApiV0'\r\nimport JPeriodSelector from './JPeriodSelector';\r\nimport JMultiCreatable from './JMultiCreatable';\r\nimport { JConstants } from '../core/JConstants'\r\nimport { Formik } from 'formik';\r\nimport * as Yup from 'yup';\r\n\r\nconst ESCAPE_KEY = 27;\r\nconst ENTER_KEY = 13;\r\n\r\nclass JAddContrib extends Component {\r\n  state = {\r\n      errorMessage: null,\r\n  }\r\n\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n    this._refocus()\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _refocus() {\r\n    this.contribNom.focus()\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY:\r\n              this.onCancelAdd();\r\n              break;\r\n          case ENTER_KEY:\r\n              // this.handleAddSubmit();\r\n              break;\r\n          default:\r\n              // DEBUG // console.info(\"key\", event.keyCode)\r\n              break;\r\n      }\r\n  }\r\n\r\n  _isNotEmpty(myVar) {\r\n    return Array.isArray(myVar)&&myVar.length>0;\r\n  }\r\n\r\n  handleAddSubmit(entryToAdd) {\r\n    console.info(\"handleAddSubmit \", entryToAdd)\r\n    entryToAdd.semi = (this._isNotEmpty(entryToAdd.semi)) ? {m:  entryToAdd.semi } : undefined;\r\n    entryToAdd.plantation = (this._isNotEmpty(entryToAdd.plantation)) ? {m:  entryToAdd.plantation } : undefined;\r\n    entryToAdd.floraison = (this._isNotEmpty(entryToAdd.floraison)) ? {m:  entryToAdd.floraison } : undefined;\r\n    entryToAdd.recolte = (this._isNotEmpty(entryToAdd.recolte)) ? {m:  entryToAdd.recolte } : undefined;\r\n    ApiV0.contribute(entryToAdd)\r\n      .then((addResult) => {\r\n           console.info(\"addResult\", addResult)\r\n           this.props.onAdded(addResult);\r\n         })\r\n      .catch((addErrorMessage) => {\r\n           this.setState({errorMessage: addErrorMessage}, () => this._refocus())\r\n         });\r\n  }\r\n\r\n  onCancelAdd() {\r\n    var evt = \"cancel add contrib\";\r\n    Event(JConstants.GG_CATEGORY.CONTRIB, evt, evt);\r\n    this.props.onCancel();\r\n  }\r\n\r\n  handlePeriodChange(name, value){\r\n    // DEBUG //\r\n    console.info(\"handlePeriodChange\", name, value);\r\n  }\r\n\r\n  render() {\r\n\r\n    const addContribSchema = Yup.object({\r\n      contribNom: Yup.string().required(),\r\n      contribNomScientifique: Yup.string().required()\r\n    });\r\n\r\n\r\n    return (\r\n<div className=\"add-contrib\" >\r\n\r\n      <h1>Ajout d&apos;une entrée</h1>\r\n        { this.state.errorMessage ?\r\n            ( <Alert variant=\"warning\">\r\n                {JSON.stringify(this.state.errorMessage)}\r\n              </Alert> )\r\n            : ( null)\r\n        }\r\n      {/*\r\n        DOC https://formik.org/\r\n        https://react-bootstrap.netlify.app/components/forms/#forms-validation-libraries\r\n       */}\r\n      <div className=\"add-contrib-form\">\r\n        <Formik validationSchema={addContribSchema}\r\n                onSubmit={this.handleAddSubmit.bind(this)}\r\n                initialValues={{\r\n                  contribNom: 'MaFleur',\r\n                  contribNomScientifique: 'MaFleurLatine'\r\n                }}\r\n        >\r\n         {({\r\n            handleSubmit,\r\n            handleChange,\r\n            handleBlur,\r\n            values,\r\n            touched,\r\n            isValid,\r\n            errors,\r\n            setFieldValue\r\n          }) => (\r\n             <Form noValidate onSubmit={handleSubmit}>\r\n              <Form.Group controlId=\"addContrib.Nom\">\r\n                <Form.Label>Nom</Form.Label>\r\n                <Form.Control\r\n                        required\r\n                        type=\"text\"\r\n                        key=\"contribNom\"\r\n                        name=\"contribNom\"\r\n                        value={values.contribNom}\r\n                        onChange={handleChange}\r\n                        isValid={touched.contribNom && !errors.contribNom}\r\n                        isInvalid={!!errors.contribNom}\r\n                        ref={(input) => { this.contribNom = input; }}\r\n                        placeholder=\"nom commun court\"\r\n                        />\r\n                <Form.Control.Feedback>Valide</Form.Control.Feedback>\r\n                <Form.Control.Feedback type=\"invalid\">Merci de choisir un nom</Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.NomScientifique\">\r\n                <Form.Label>Nom scientifique</Form.Label>\r\n                <Form.Control\r\n                        required\r\n                        type=\"text\"\r\n                        key=\"contribNomScientifique\"\r\n                        name=\"contribNomScientifique\"\r\n                        value={values.contribNomScientifique}\r\n                        onChange={handleChange}\r\n                        isValid={touched.contribNomScientifique && !errors.contribNomScientifique}\r\n                        isInvalid={!!errors.contribNomScientifique}\r\n                        ref={(input) => { this.contribNomScientifique = input; }}\r\n                        placeholder=\"nom scientifique (latin)\"\r\n                        />\r\n                <Form.Control.Feedback>Valide</Form.Control.Feedback>\r\n                <Form.Control.Feedback type=\"invalid\">Le nom scientifique est requis</Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Types\">\r\n                <Form.Label>Type(s)</Form.Label>\r\n                <JMultiCreatable field=\"type\"\r\n                                 name=\"type\"\r\n                                 max=\"3\"\r\n                                 onChange={setFieldValue}\r\n                                 docTypes={this.props.docTypes}\r\n                                 />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Families\">\r\n                <Form.Label>Famille(s)</Form.Label>\r\n                <JMultiCreatable field=\"familles\"\r\n                                 name=\"familles\"\r\n                                 max=\"5\"\r\n                                 onChange={setFieldValue}\r\n                                 docTypes={this.props.docFamilies}\r\n                                 />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Semi\">\r\n                <JPeriodSelector field=\"semi\" name=\"semi\" onChange={setFieldValue}/>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Plantation\">\r\n                <JPeriodSelector field=\"plantation\" name=\"plantation\" onChange={setFieldValue}/>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Floraison\">\r\n                <JPeriodSelector field=\"floraison\" name=\"floraison\" onChange={setFieldValue}/>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"addContrib.Récolte\">\r\n                <JPeriodSelector field=\"recolte\" name=\"récolte\" onChange={setFieldValue}/>\r\n              </Form.Group>\r\n\r\n              <Button type=\"submit\" variant=\"primary\" size=\"sm\" className=\"mr-2\"\r\n                      >Ajouter <AiOutlineCheck /></Button>\r\n              <Button variant=\"secondary\" size=\"sm\" className=\"mr-2\"\r\n                      onClick={this.onCancelAdd.bind(this)}>Annuler <AiOutlineCloseSquare /></Button>\r\n            </Form>\r\n\r\n          )}\r\n        </Formik>\r\n      </div>\r\n  {/* TODO: Famille / Type */}\r\n</div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JAddContrib;","import React, { Component } from 'react'\r\nimport { Badge } from 'react-bootstrap';\r\n\r\nclass JContribChoice extends Component {\r\n\r\n  onSelect(doc) {\r\n    this.props.onSelect(doc);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"contrib-choice\" >\r\n        <Badge variant=\"secondary\" size=\"sm mr-2 mt-2\"\r\n               style={{cursor: 'pointer'}}\r\n               title={this.props.contrib.doc.type}\r\n               onClick={this.onSelect.bind(this, this.props.contrib)}>\r\n          {this.props.contrib._id.substr(17)} - {this.props.contrib.doc.nom}\r\n        </Badge>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JContribChoice;","import React, { Component } from 'react'\r\nimport JContribChoice from './JContribChoice';\r\n\r\nclass JContribsList extends Component {\r\n\r\n  onSelect(contrib) {\r\n    if (this.props.onSelect) {\r\n      this.props.onSelect(contrib);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <div className=\"contribsList\">\r\n          { this.props.docs && this.props.docs.length ?\r\n            ( <div>\r\n              { this.props.docs.map( (contrib, index) => {\r\n                  return( <JContribChoice  key={index} index={index} contrib={contrib} onSelect={this.onSelect.bind(this)} /> )\r\n              }) }\r\n              </div>\r\n            ) :\r\n            ( null )\r\n          }\r\n        </div>\r\n    );\r\n  }\r\n}\r\nexport default JContribsList;","import React, { Component } from 'react'\r\nimport { Alert, Badge, Button } from 'react-bootstrap';\r\n// import ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport {initGA, Event} from '../services/Tracking';\r\nimport JContrib from './JContrib';\r\nimport JAddContrib from './JAddContrib';\r\nimport JSearchEntries from '../common/JSearchEntries';\r\nimport JContribsList from './JContribsList';\r\nimport ApiV0 from '../services/ApiV0'\r\n\r\nconst ESCAPE_KEY = 27;\r\nconst UP_ARROW = 38;\r\nconst RIGHT_ARROW = 39;\r\n\r\nclass JContribuer extends Component {\r\n  state = {\r\n      contribs: null,\r\n      errorMessage: null,\r\n      infoMessage: null,\r\n      add: false,\r\n      hasNext: true,\r\n      searchString: '',\r\n      bookmark: '',\r\n      searchLocked: false, // toogle search form\r\n      docTypes: [],\r\n      docFamilies: []\r\n  }\r\n\r\n  componentDidMount() {\r\n    // DEBUG // console.info('componentDidMount')\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n    this.searchContribs();\r\n    this._refocus();\r\n    document.addEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown);\r\n  }\r\n\r\n  _handleKeyDown = (event) => {\r\n      switch( event.keyCode ) {\r\n          case ESCAPE_KEY:\r\n              this.onUnSearch();\r\n              break;\r\n          case RIGHT_ARROW:\r\n              // this.onNext();\r\n              break;\r\n          case UP_ARROW:\r\n              this.onReload();\r\n              break;\r\n          default:\r\n              break;\r\n      }\r\n  }\r\n\r\n  _refocus() {\r\n    if (this.searchEntries) {\r\n          this.searchEntries.focus();\r\n    }\r\n  }\r\n\r\n  onContrib() {\r\n    var evt = \"open add contrib\";\r\n    Event(JConstants.GG_CATEGORY.CONTRIB, evt, evt);\r\n    this.setState({add:true})\r\n  }\r\n\r\n  onCancelAdd() {\r\n    this.setState({add:false})\r\n  }\r\n\r\n  onAdded(newEntry) {\r\n    var jc = this;\r\n    if (newEntry && newEntry.doc && newEntry.doc.nom) {\r\n      this.setState({contribs: null, add:false, infoMessage: newEntry.doc.nom + \" ajouté\"}, () => jc.searchContribs());\r\n      return;\r\n    }\r\n    console.info(\"no newEntry?\")\r\n  }\r\n\r\n  onUnlock() {\r\n    this.setState({searchLocked: false}, () => this._refocus());\r\n  }\r\n\r\n  onUnSearch() {\r\n    this.onReload();\r\n  }\r\n\r\n  onReload() {\r\n    var jc = this;\r\n    this.setState({contribs: null, searchString:'',bookmark:'', searchLocked: false}, () => jc.searchContribs())\r\n  }\r\n\r\n  onSearch(e) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n    var jc = this;\r\n    var evt = \"search \" + this.state.searchString;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({contribs: null, searchString:this.state.searchString, bookmark:'', searchLocked:true}, () => jc.searchContribs());\r\n  }\r\n\r\n  onNext() {\r\n    var jc = this;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, \"list next contributions\", \"list next contributions\")\r\n    var lastContribId = this.state.contribs[this.state.contribs.length-1]._id;\r\n    this.setState({contribs: null, bookmark:lastContribId, searchLocked: false}, () => jc.searchContribs());\r\n  }\r\n\r\n  searchContribs() {\r\n    var bookmark = this.state.bookmark;\r\n    var searchString = this.state.searchString;\r\n    var filter = {\"limit\":5, };\r\n    if (bookmark && bookmark !== '') {\r\n      filter.bookmark = bookmark;\r\n    }\r\n    if (searchString && searchString !== '') {\r\n      filter.nom = searchString;\r\n    }\r\n    // DEBUG // console.info(\"searchContribs\", filter);\r\n    ApiV0.getContribs(filter)\r\n      .then((contribsResults) => {\r\n        if (contribsResults.length) {\r\n          this.setState({ contribs: contribsResults, errorMessage: null, infoMessage: null, hasNext: true },\r\n            () => this._refocus());\r\n        } else {\r\n          var newState = {hasNext: false};\r\n          if (bookmark == null || bookmark === '') {\r\n            newState.infoMessage = \"aucune contribution\";\r\n            newState.docs = null;\r\n          }\r\n          this.setState(newState, () => this._refocus())\r\n        }\r\n      })\r\n      .catch((getErrorMessage) => { this.setState({errorMessage: getErrorMessage}, () => this._refocus()); });\r\n      this._refreshTypes();\r\n      this._refreshFamilies();\r\n  }\r\n\r\n  _refreshTypes() {\r\n      ApiV0.getTypes()\r\n        .then((typesResult) => {\r\n          this.setState({ docTypes: typesResult });\r\n        })\r\n        .catch((getErrorMessage) => console.info(\"getTypes\", getErrorMessage));\r\n  }\r\n\r\n  _refreshFamilies() {\r\n      ApiV0.getFamilies()\r\n        .then((familiesResult) => {\r\n          this.setState({ docFamilies: familiesResult });\r\n        })\r\n        .catch((getErrorMessage) => console.info(\"getFamilies\", getErrorMessage));\r\n  }\r\n\r\n  onSelect(contrib) {\r\n    var evt = \"select \" + contrib.doc.nom;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({contrib})\r\n  }\r\n\r\n  onUnselect() {\r\n    var jc = this;\r\n    var evt = \"unselect\" + this.state.contrib.doc.nom;\r\n    Event(JConstants.GG_CATEGORY.ENTRIES, evt, evt)\r\n    this.setState({contrib:null}, () => jc.searchContribs())\r\n  }\r\n\r\n  onAccept() {\r\n    var jc = this;\r\n    console.info(\"onAccept\", this.state.contrib);\r\n    ApiV0.acceptContrib(this.state.contrib._id)\r\n    .catch((err) => { this.setState({errorMessage: err}, () => this._refocus()); })\r\n    .then((acceptedContrib) => {\r\n      this.setState({contribs: null, searchString:'',bookmark:'', searchLocked: false, contrib:null,\r\n                     infoMessage: acceptedContrib + ' contribution acceptée' }, () => jc.searchContribs())\r\n    });\r\n  }\r\n\r\n  onReject() {\r\n    var jc = this;\r\n    console.info(\"onReject\", this.state.contrib);\r\n    ApiV0.rejectContrib(this.state.contrib._id)\r\n    .catch((err) => { this.setState({errorMessage: err}, () => this._refocus()); })\r\n    .then((rejectedContrib) => {\r\n      this.setState({contribs: null, searchString:'',bookmark:'', searchLocked: false, contrib:null,\r\n                     infoMessage: rejectedContrib + ' contribution rejetée'}, () => jc.searchContribs())\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"jcontrib\">\r\n        { this.state.errorMessage ?(<Alert variant=\"warning\">{this.state.errorMessage}</Alert>) : (null) }\r\n        { this.state.infoMessage ?(<Alert variant=\"info\">{this.state.infoMessage}</Alert>) : (null) }\r\n        <div className=\"contribContent\">\r\n        { this.state.add === true\r\n           ?(<JAddContrib onCancel={this.onCancelAdd.bind(this)}\r\n                          onAdded={this.onAdded.bind(this)}\r\n                          docTypes={this.state.docTypes}\r\n                          docFamilies={this.state.docFamilies}\r\n                   />)\r\n           :\r\n          this.state.contrib\r\n           ?(<JContrib contrib={this.state.contrib}\r\n                       onUnselect={this.onUnselect.bind(this)}\r\n                       onAccept={this.onAccept.bind(this)}\r\n                       onReject={this.onReject.bind(this)}\r\n                   /> )\r\n           :(<div className=\"contribShow\">\r\n                <p>Contributions</p>\r\n                <JSearchEntries searchLocked={this.state.searchLocked}\r\n                                searchString={this.state.searchString}\r\n                                unLock={this.onUnlock.bind(this)}\r\n                                unSearch={this.onUnSearch.bind(this)}\r\n                                onSearchStringUpdated={(newSearchString) => this.setState({ searchString:newSearchString})}\r\n                                onSearch={this.onSearch.bind(this)}\r\n                                ref={(input) => { this.searchEntries = input; }}/>\r\n\r\n                <JContribsList docs={this.state.contribs} onSelect={this.onSelect.bind(this)}/>\r\n                { this.state.hasNext ?\r\n                    (<div><Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                            style={{cursor: 'pointer'}}\r\n                            onClick={this.onNext.bind(this)}\r\n                            title=\"Suivant (raccourci: <Flèche droite>)\"\r\n                            >...</Badge></div>) :\r\n                    (<div><Badge variant=\"info\" size=\"sm mr-2 mt-2\"\r\n                            style={{cursor: 'pointer'}}\r\n                            onClick={this.onReload.bind(this)}\r\n                            title=\"Raccourci (raccourci: <Flèche du haut>)\"\r\n                            >Recharger</Badge></div>)\r\n                 }\r\n                <Button variant=\"secondary\" size=\"sm\" className=\"mr-2\" onClick={this.onContrib.bind(this)}\r\n                    >Contribuer</Button>\r\n             </div>\r\n            )\r\n        }\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JContribuer;","import React, { Component } from 'react'\r\nimport { Table} from 'react-bootstrap';\r\n// import ApiV0 from '../services/ApiV0'\r\nimport {JConstants} from '../core/JConstants'\r\nimport { initGA } from '../services/Tracking';\r\nimport { GiSpottedBug, GiFlowerPot } from 'react-icons/gi';\r\nimport { GrWorkshop, GrHeroku } from 'react-icons/gr';\r\nimport { GoMarkGithub } from 'react-icons/go';\r\nimport { DiMongodb } from 'react-icons/di';\r\n\r\nclass JAbout extends Component {\r\n  componentDidMount() {\r\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\r\n  }\r\n\r\n  render() {\r\n    var apiVersion = this.props.about ? this.props.about.version.api : \"N/A\";\r\n    var jlVersion = this.props.about ? this.props.about.version['jardi-lib'] : \"N/A\";\r\n    return (\r\n      <div className=\"jabout\">\r\n        <div className=\"aboutContent\">\r\n        <h1><GiFlowerPot/> À propos</h1>\r\n        <p>\r\n          <b><GiFlowerPot/> JardiCal</b> est un service en ligne gratuit et sans publicité en version <GrWorkshop/> alpha .<br/>\r\n          Ce service gratuit est possible grâce aux plans gratuits mis à disposition des projets open-source :<br/>\r\n        </p>\r\n        <ul style={{'marginLeft': '40px'}}>\r\n          <li>Le code source est présent sur <a href=\"https://github.com\" target=\"_dep\"><GoMarkGithub/> Github</a>,</li>\r\n          <li>L&apos;application est hébergée par <a href=\"https://heroku.com/\" target=\"_dep\"><GrHeroku/> Heroku</a>,</li>\r\n          <li>La base de données par <a href=\"https://cloud.mongodb.com/\" target=\"_dep\"><DiMongodb/>Cloud MongoDB</a>.</li>\r\n        </ul>\r\n        <br/>\r\n        <p>\r\n          <code>version <GrWorkshop/> alpha</code> - le service est en cours de construction\r\n          &#160;et peut comporter <a href=\"https://github.com/boly38/jardiCal/issues\" target=\"_dep\">des bugs <GiSpottedBug/></a>,\r\n          &#160;ou connaître de longues périodes d&apos;indisponibilité.\r\n        </p>\r\n        <Table striped bordered hover size=\"sm\">\r\n          <thead>\r\n            <tr>\r\n              <th>Composant</th>\r\n              <th>Détails</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td><a href=\"https://github.com/boly38/jardiCal\" target=\"_dep\">JardiCal</a> version</td>\r\n              <td>{apiVersion}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><a href=\"https://github.com/boly38/jardiLib\" target=\"_dep\">JardiLib</a> version</td>\r\n              <td>{jlVersion}</td>\r\n            </tr>\r\n          </tbody>\r\n        </Table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JAbout;","import React, { Component } from 'react'\nimport './JApp.css';\nimport { Alert } from 'react-bootstrap';\nimport JBetaCorner from './core/JBetaCorner';\nimport JMenu from './core/JMenu';\nimport JHome from './core/JHome';\nimport JMonth from './core/JMonth';\nimport JDocs from './docs/JDocs';\nimport JAdmin from './admin/JAdmin';\nimport JContribuer from './contrib/JContribuer';\nimport JAbout from './core/JAbout';\nimport {JConstants} from './core/JConstants'\nimport {PageView, initGA} from './services/Tracking';\nimport ApiV0 from './services/ApiV0'\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nclass JApp extends Component {\n  state = {\n      errorMessage: null,\n      about: null\n  }\n\n  constructor(props) {\n      super(props);\n      this.onActionDone = this.onActionDone.bind(this);\n  }\n\n  componentDidMount() {\n    initGA(JConstants.GOOGLE_ANALYTICS_CODE);\n    PageView();\n    if (this.state.about != null || this.state.errorMessage != null) {\n      return;\n    }\n    this.doAbout();\n  }\n\n  doAbout() {\n      ApiV0.about()\n        .then((aboutResults) => { this.setState({ about: aboutResults }); })\n        .catch((getErrorMessage) => { this.setState({errorMessage: getErrorMessage}); });\n  }\n\n  onActionDone(actionMessage) {\n    console.info(\"onActionDone\",actionMessage);\n    this.doAbout();\n  }\n\n  render() {\n    var roles = [];\n    if (this.state.about && this.state.about.roles) {\n      roles = this.state.about.roles;\n    }\n    return (\n     <Router>\n      <JBetaCorner/>\n      { this.state.about ?\n         ( <JBetaCorner version={this.state.about.version.api} /> )\n          : ( <JBetaCorner/> )\n      }\n      <div className=\"app\">\n        { this.state.errorMessage ?\n            ( <Alert variant=\"warning\">\n                {this.state.errorMessage}\n              </Alert> )\n            : ( null)\n        }\n        <div className=\"JMenu\"><JMenu roles={roles}/></div>\n        <div className=\"JContent\">\n          <Switch>\n            <Route exact path=\"/\" component={() => <JHome />} />\n            <Route exact path=\"/month\" component={() => <JMonth />} />\n            <Route exact path=\"/docs\" component={() => <JDocs about={this.state.about}/>}/>\n        { roles.includes('admin') ?\n          ( <Route exact path=\"/contrib\" component={() =>\n                    <JContribuer about={this.state.about} />\n            } /> )\n          : ( null)\n        }\n        { roles.includes('owner') ?\n          ( <Route exact path=\"/owner\" component={() =>\n                    <JAdmin about={this.state.about} onActionDone={this.onActionDone} />\n            } /> )\n          : ( null)\n        }\n            <Route exact path=\"/about\" component={() => <JAbout about={this.state.about}/>} />\n          </Switch>\n        </div>\n      </div>\n     </Router>\n    );\n  }\n}\n\nexport default JApp;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport JApp from './JApp';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <JApp />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}